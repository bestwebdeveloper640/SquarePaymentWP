(()=>{var e={758:(e,t,r)=>{"use strict";e=r.hmd(e)},6046:(e,t,r)=>{"use strict";r(1422),e=r.hmd(e)},8518:(e,t,r)=>{"use strict";function n(){return"undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}function i(){return"npm"}r.d(t,{S:()=>i,n:()=>n})},1422:(e,t,r)=>{"use strict";r.d(t,{$y:()=>s,KV:()=>i,l$:()=>o});var n=r(8518);function i(){return!(0,n.n)()&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function o(e,t){return e.require(t)}function s(t){let r;try{r=o(e,t)}catch(e){}try{const{cwd:n}=o(e,"process");r=o(e,`${n()}/node_modules/${t}`)}catch(e){}return r}e=r.hmd(e)},1170:(e,t,r)=>{"use strict";r.d(t,{ph:()=>l,yW:()=>u});var n=r(1422),i=r(1235);e=r.hmd(e);const o=(0,i.Rf)(),s={nowSeconds:()=>Date.now()/1e3},a=(0,n.KV)()?function(){try{return(0,n.l$)(e,"perf_hooks").performance}catch(e){return}}():function(){const{performance:e}=o;if(e&&e.now)return{now:()=>e.now(),timeOrigin:Date.now()-e.now()}}(),c=void 0===a?s:{nowSeconds:()=>(a.timeOrigin+a.now())/1e3},u=s.nowSeconds.bind(s),l=c.nowSeconds.bind(c);let d;(()=>{const{performance:e}=o;if(!e||!e.now)return void(d="none");const t=36e5,r=e.now(),n=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+r-n):t,s=i<t,a=e.timing&&e.timing.navigationStart,c="number"==typeof a?Math.abs(a+r-n):t;s||c<t?i<=c?(d="timeOrigin",e.timeOrigin):d="navigationStart":d="dateNow"})()},1235:(e,t,r)=>{"use strict";function n(e){return e&&e.Math==Math?e:void 0}r.d(t,{Rf:()=>o,YO:()=>s,n2:()=>i});const i="object"==typeof globalThis&&n(globalThis)||"object"==typeof window&&n(window)||"object"==typeof self&&n(self)||"object"==typeof r.g&&n(r.g)||function(){return this}()||{};function o(){return i}function s(e,t,r){const n=r||i,o=n.__SENTRY__=n.__SENTRY__||{};return o[e]||(o[e]=t())}},9662:(e,t,r)=>{var n=r(614),i=r(6330),o=TypeError;e.exports=function(e){if(n(e))return e;throw o(i(e)+" is not a function")}},9483:(e,t,r)=>{var n=r(4411),i=r(6330),o=TypeError;e.exports=function(e){if(n(e))return e;throw o(i(e)+" is not a constructor")}},6077:(e,t,r)=>{var n=r(614),i=String,o=TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw o("Can't set "+i(e)+" as a prototype")}},1223:(e,t,r)=>{var n=r(5112),i=r(30),o=r(3070).f,s=n("unscopables"),a=Array.prototype;null==a[s]&&o(a,s,{configurable:!0,value:i(null)}),e.exports=function(e){a[s][e]=!0}},1530:(e,t,r)=>{"use strict";var n=r(8710).charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},5787:(e,t,r)=>{var n=r(7976),i=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw i("Incorrect invocation")}},9670:(e,t,r)=>{var n=r(111),i=String,o=TypeError;e.exports=function(e){if(n(e))return e;throw o(i(e)+" is not an object")}},8533:(e,t,r)=>{"use strict";var n=r(2092).forEach,i=r(9341)("forEach");e.exports=i?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},8457:(e,t,r)=>{"use strict";var n=r(9974),i=r(6916),o=r(7908),s=r(3411),a=r(7659),c=r(4411),u=r(6244),l=r(6135),d=r(4121),p=r(1246),h=Array;e.exports=function(e){var t=o(e),r=c(this),f=arguments.length,g=f>1?arguments[1]:void 0,m=void 0!==g;m&&(g=n(g,f>2?arguments[2]:void 0));var E,y,v,_,A,S,I=p(t),C=0;if(!I||this===h&&a(I))for(E=u(t),y=r?new this(E):h(E);E>C;C++)S=m?g(t[C],C):t[C],l(y,C,S);else for(A=(_=d(t,I)).next,y=r?new this:[];!(v=i(A,_)).done;C++)S=m?s(_,g,[v.value,C],!0):v.value,l(y,C,S);return y.length=C,y}},1318:(e,t,r)=>{var n=r(5656),i=r(1400),o=r(6244),s=function(e){return function(t,r,s){var a,c=n(t),u=o(c),l=i(s,u);if(e&&r!=r){for(;u>l;)if((a=c[l++])!=a)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},2092:(e,t,r)=>{var n=r(9974),i=r(1702),o=r(8361),s=r(7908),a=r(6244),c=r(5417),u=i([].push),l=function(e){var t=1==e,r=2==e,i=3==e,l=4==e,d=6==e,p=7==e,h=5==e||d;return function(f,g,m,E){for(var y,v,_=s(f),A=o(_),S=n(g,m),I=a(A),C=0,O=E||c,T=t?O(f,I):r||p?O(f,0):void 0;I>C;C++)if((h||C in A)&&(v=S(y=A[C],C,_),e))if(t)T[C]=v;else if(v)switch(e){case 3:return!0;case 5:return y;case 6:return C;case 2:u(T,y)}else switch(e){case 4:return!1;case 7:u(T,y)}return d?-1:i||l?l:T}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},9341:(e,t,r)=>{"use strict";var n=r(7293);e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){return 1},1)}))}},3671:(e,t,r)=>{var n=r(9662),i=r(7908),o=r(8361),s=r(6244),a=TypeError,c=function(e){return function(t,r,c,u){n(r);var l=i(t),d=o(l),p=s(l),h=e?p-1:0,f=e?-1:1;if(c<2)for(;;){if(h in d){u=d[h],h+=f;break}if(h+=f,e?h<0:p<=h)throw a("Reduce of empty array with no initial value")}for(;e?h>=0:p>h;h+=f)h in d&&(u=r(u,d[h],h,l));return u}};e.exports={left:c(!1),right:c(!0)}},1589:(e,t,r)=>{var n=r(1400),i=r(6244),o=r(6135),s=Array,a=Math.max;e.exports=function(e,t,r){for(var c=i(e),u=n(t,c),l=n(void 0===r?c:r,c),d=s(a(l-u,0)),p=0;u<l;u++,p++)o(d,p,e[u]);return d.length=p,d}},4362:(e,t,r)=>{var n=r(1589),i=Math.floor,o=function(e,t){var r=e.length,c=i(r/2);return r<8?s(e,t):a(e,o(n(e,0,c),t),o(n(e,c),t),t)},s=function(e,t){for(var r,n,i=e.length,o=1;o<i;){for(n=o,r=e[o];n&&t(e[n-1],r)>0;)e[n]=e[--n];n!==o++&&(e[n]=r)}return e},a=function(e,t,r,n){for(var i=t.length,o=r.length,s=0,a=0;s<i||a<o;)e[s+a]=s<i&&a<o?n(t[s],r[a])<=0?t[s++]:r[a++]:s<i?t[s++]:r[a++];return e};e.exports=o},7475:(e,t,r)=>{var n=r(3157),i=r(4411),o=r(111),s=r(5112)("species"),a=Array;e.exports=function(e){var t;return n(e)&&(t=e.constructor,(i(t)&&(t===a||n(t.prototype))||o(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?a:t}},5417:(e,t,r)=>{var n=r(7475);e.exports=function(e,t){return new(n(e))(0===t?0:t)}},3411:(e,t,r)=>{var n=r(9670),i=r(9212);e.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){i(e,"throw",t)}}},4326:(e,t,r)=>{var n=r(1702),i=n({}.toString),o=n("".slice);e.exports=function(e){return o(i(e),8,-1)}},648:(e,t,r)=>{var n=r(1694),i=r(614),o=r(4326),s=r(5112)("toStringTag"),a=Object,c="Arguments"==o(function(){return arguments}());e.exports=n?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=a(e),s))?r:c?o(t):"Object"==(n=o(t))&&i(t.callee)?"Arguments":n}},9920:(e,t,r)=>{var n=r(2597),i=r(3887),o=r(1236),s=r(3070);e.exports=function(e,t,r){for(var a=i(t),c=s.f,u=o.f,l=0;l<a.length;l++){var d=a[l];n(e,d)||r&&n(r,d)||c(e,d,u(t,d))}}},4964:(e,t,r)=>{var n=r(5112)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,"/./"[e](t)}catch(e){}}return!1}},8544:(e,t,r)=>{var n=r(7293);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},6178:e=>{e.exports=function(e,t){return{value:e,done:t}}},8880:(e,t,r)=>{var n=r(9781),i=r(3070),o=r(9114);e.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},9114:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6135:(e,t,r)=>{"use strict";var n=r(4948),i=r(3070),o=r(9114);e.exports=function(e,t,r){var s=n(t);s in e?i.f(e,s,o(0,r)):e[s]=r}},7045:(e,t,r)=>{var n=r(6339),i=r(3070);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),i.f(e,t,r)}},8052:(e,t,r)=>{var n=r(614),i=r(3070),o=r(6339),s=r(3072);e.exports=function(e,t,r,a){a||(a={});var c=a.enumerable,u=void 0!==a.name?a.name:t;if(n(r)&&o(r,u,a),a.global)c?e[t]=r:s(t,r);else{try{a.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=r:i.f(e,t,{value:r,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},9190:(e,t,r)=>{var n=r(8052);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},3072:(e,t,r)=>{var n=r(7854),i=Object.defineProperty;e.exports=function(e,t){try{i(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},9781:(e,t,r)=>{var n=r(7293);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:e=>{var t="object"==typeof document&&document.all,r=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:r}},317:(e,t,r)=>{var n=r(7854),i=r(111),o=n.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},8324:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(e,t,r)=>{var n=r(317)("span").classList,i=n&&n.constructor&&n.constructor.prototype;e.exports=i===Object.prototype?void 0:i},5268:(e,t,r)=>{var n=r(4326);e.exports="undefined"!=typeof process&&"process"==n(process)},8113:e=>{e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:(e,t,r)=>{var n,i,o=r(7854),s=r(8113),a=o.process,c=o.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l&&(i=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(i=+n[1]),e.exports=i},748:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(e,t,r)=>{var n=r(7854),i=r(1236).f,o=r(8880),s=r(8052),a=r(3072),c=r(9920),u=r(4705);e.exports=function(e,t){var r,l,d,p,h,f=e.target,g=e.global,m=e.stat;if(r=g?n:m?n[f]||a(f,{}):(n[f]||{}).prototype)for(l in t){if(p=t[l],d=e.dontCallGetSet?(h=i(r,l))&&h.value:r[l],!u(g?l:f+(m?".":"#")+l,e.forced)&&void 0!==d){if(typeof p==typeof d)continue;c(p,d)}(e.sham||d&&d.sham)&&o(p,"sham",!0),s(r,l,p,e)}}},7293:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},7007:(e,t,r)=>{"use strict";r(4916);var n=r(1470),i=r(8052),o=r(2261),s=r(7293),a=r(5112),c=r(8880),u=a("species"),l=RegExp.prototype;e.exports=function(e,t,r,d){var p=a(e),h=!s((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),f=h&&!s((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[u]=function(){return r},r.flags="",r[p]=/./[p]),r.exec=function(){return t=!0,null},r[p](""),!t}));if(!h||!f||r){var g=n(/./[p]),m=t(p,""[e],(function(e,t,r,i,s){var a=n(e),c=t.exec;return c===o||c===l.exec?h&&!s?{done:!0,value:g(t,r,i)}:{done:!0,value:a(r,t,i)}:{done:!1}}));i(String.prototype,e,m[0]),i(l,p,m[1])}d&&c(l[p],"sham",!0)}},2104:(e,t,r)=>{var n=r(4374),i=Function.prototype,o=i.apply,s=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?s.bind(o):function(){return s.apply(o,arguments)})},9974:(e,t,r)=>{var n=r(1470),i=r(9662),o=r(4374),s=n(n.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?s(e,t):function(){return e.apply(t,arguments)}}},4374:(e,t,r)=>{var n=r(7293);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},6916:(e,t,r)=>{var n=r(4374),i=Function.prototype.call;e.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},6530:(e,t,r)=>{var n=r(9781),i=r(2597),o=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,a=i(o,"name"),c=a&&"something"===function(){}.name,u=a&&(!n||n&&s(o,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},5668:(e,t,r)=>{var n=r(1702),i=r(9662);e.exports=function(e,t,r){try{return n(i(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},1470:(e,t,r)=>{var n=r(4326),i=r(1702);e.exports=function(e){if("Function"===n(e))return i(e)}},1702:(e,t,r)=>{var n=r(4374),i=Function.prototype,o=i.call,s=n&&i.bind.bind(o,o);e.exports=n?s:function(e){return function(){return o.apply(e,arguments)}}},5005:(e,t,r)=>{var n=r(7854),i=r(614),o=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(n[e]):n[e]&&n[e][t]}},1246:(e,t,r)=>{var n=r(648),i=r(8173),o=r(8554),s=r(7497),a=r(5112)("iterator");e.exports=function(e){if(!o(e))return i(e,a)||i(e,"@@iterator")||s[n(e)]}},4121:(e,t,r)=>{var n=r(6916),i=r(9662),o=r(9670),s=r(6330),a=r(1246),c=TypeError;e.exports=function(e,t){var r=arguments.length<2?a(e):t;if(i(r))return o(n(r,e));throw c(s(e)+" is not iterable")}},8173:(e,t,r)=>{var n=r(9662),i=r(8554);e.exports=function(e,t){var r=e[t];return i(r)?void 0:n(r)}},647:(e,t,r)=>{var n=r(1702),i=r(7908),o=Math.floor,s=n("".charAt),a=n("".replace),c=n("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,n,d,p){var h=r+e.length,f=n.length,g=l;return void 0!==d&&(d=i(d),g=u),a(p,g,(function(i,a){var u;switch(s(a,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,r);case"'":return c(t,h);case"<":u=d[c(a,1,-1)];break;default:var l=+a;if(0===l)return i;if(l>f){var p=o(l/10);return 0===p?i:p<=f?void 0===n[p-1]?s(a,1):n[p-1]+s(a,1):i}u=n[l-1]}return void 0===u?"":u}))}},7854:(e,t,r)=>{var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},2597:(e,t,r)=>{var n=r(1702),i=r(7908),o=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},3501:e=>{e.exports={}},490:(e,t,r)=>{var n=r(5005);e.exports=n("document","documentElement")},4664:(e,t,r)=>{var n=r(9781),i=r(7293),o=r(317);e.exports=!n&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8361:(e,t,r)=>{var n=r(1702),i=r(7293),o=r(4326),s=Object,a=n("".split);e.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?a(e,""):s(e)}:s},9587:(e,t,r)=>{var n=r(614),i=r(111),o=r(7674);e.exports=function(e,t,r){var s,a;return o&&n(s=t.constructor)&&s!==r&&i(a=s.prototype)&&a!==r.prototype&&o(e,a),e}},2788:(e,t,r)=>{var n=r(1702),i=r(614),o=r(5465),s=n(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return s(e)}),e.exports=o.inspectSource},9909:(e,t,r)=>{var n,i,o,s=r(4811),a=r(7854),c=r(111),u=r(8880),l=r(2597),d=r(5465),p=r(6200),h=r(3501),f="Object already initialized",g=a.TypeError,m=a.WeakMap;if(s||d.state){var E=d.state||(d.state=new m);E.get=E.get,E.has=E.has,E.set=E.set,n=function(e,t){if(E.has(e))throw g(f);return t.facade=e,E.set(e,t),t},i=function(e){return E.get(e)||{}},o=function(e){return E.has(e)}}else{var y=p("state");h[y]=!0,n=function(e,t){if(l(e,y))throw g(f);return t.facade=e,u(e,y,t),t},i=function(e){return l(e,y)?e[y]:{}},o=function(e){return l(e,y)}}e.exports={set:n,get:i,has:o,enforce:function(e){return o(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=i(t)).type!==e)throw g("Incompatible receiver, "+e+" required");return r}}}},7659:(e,t,r)=>{var n=r(5112),i=r(7497),o=n("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[o]===e)}},3157:(e,t,r)=>{var n=r(4326);e.exports=Array.isArray||function(e){return"Array"==n(e)}},614:(e,t,r)=>{var n=r(4154),i=n.all;e.exports=n.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},4411:(e,t,r)=>{var n=r(1702),i=r(7293),o=r(614),s=r(648),a=r(5005),c=r(2788),u=function(){},l=[],d=a("Reflect","construct"),p=/^\s*(?:class|function)\b/,h=n(p.exec),f=!p.exec(u),g=function(e){if(!o(e))return!1;try{return d(u,l,e),!0}catch(e){return!1}},m=function(e){if(!o(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!h(p,c(e))}catch(e){return!0}};m.sham=!0,e.exports=!d||i((function(){var e;return g(g.call)||!g(Object)||!g((function(){e=!0}))||e}))?m:g},4705:(e,t,r)=>{var n=r(7293),i=r(614),o=/#|\.prototype\./,s=function(e,t){var r=c[a(e)];return r==l||r!=u&&(i(t)?n(t):!!t)},a=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=s.data={},u=s.NATIVE="N",l=s.POLYFILL="P";e.exports=s},8554:e=>{e.exports=function(e){return null==e}},111:(e,t,r)=>{var n=r(614),i=r(4154),o=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:n(e)||e===o}:function(e){return"object"==typeof e?null!==e:n(e)}},1913:e=>{e.exports=!1},7850:(e,t,r)=>{var n=r(111),i=r(4326),o=r(5112)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},2190:(e,t,r)=>{var n=r(5005),i=r(614),o=r(7976),s=r(3307),a=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return i(t)&&o(t.prototype,a(e))}},408:(e,t,r)=>{var n=r(9974),i=r(6916),o=r(9670),s=r(6330),a=r(7659),c=r(6244),u=r(7976),l=r(4121),d=r(1246),p=r(9212),h=TypeError,f=function(e,t){this.stopped=e,this.result=t},g=f.prototype;e.exports=function(e,t,r){var m,E,y,v,_,A,S,I=r&&r.that,C=!(!r||!r.AS_ENTRIES),O=!(!r||!r.IS_RECORD),T=!(!r||!r.IS_ITERATOR),P=!(!r||!r.INTERRUPTED),R=n(t,I),w=function(e){return m&&p(m,"normal",e),new f(!0,e)},b=function(e){return C?(o(e),P?R(e[0],e[1],w):R(e[0],e[1])):P?R(e,w):R(e)};if(O)m=e.iterator;else if(T)m=e;else{if(!(E=d(e)))throw h(s(e)+" is not iterable");if(a(E)){for(y=0,v=c(e);v>y;y++)if((_=b(e[y]))&&u(g,_))return _;return new f(!1)}m=l(e,E)}for(A=O?e.next:m.next;!(S=i(A,m)).done;){try{_=b(S.value)}catch(e){p(m,"throw",e)}if("object"==typeof _&&_&&u(g,_))return _}return new f(!1)}},9212:(e,t,r)=>{var n=r(6916),i=r(9670),o=r(8173);e.exports=function(e,t,r){var s,a;i(e);try{if(!(s=o(e,"return"))){if("throw"===t)throw r;return r}s=n(s,e)}catch(e){a=!0,s=e}if("throw"===t)throw r;if(a)throw s;return i(s),r}},3061:(e,t,r)=>{"use strict";var n=r(3383).IteratorPrototype,i=r(30),o=r(9114),s=r(8003),a=r(7497),c=function(){return this};e.exports=function(e,t,r,u){var l=t+" Iterator";return e.prototype=i(n,{next:o(+!u,r)}),s(e,l,!1,!0),a[l]=c,e}},1656:(e,t,r)=>{"use strict";var n=r(2109),i=r(6916),o=r(1913),s=r(6530),a=r(614),c=r(3061),u=r(9518),l=r(7674),d=r(8003),p=r(8880),h=r(8052),f=r(5112),g=r(7497),m=r(3383),E=s.PROPER,y=s.CONFIGURABLE,v=m.IteratorPrototype,_=m.BUGGY_SAFARI_ITERATORS,A=f("iterator"),S="keys",I="values",C="entries",O=function(){return this};e.exports=function(e,t,r,s,f,m,T){c(r,t,s);var P,R,w,b=function(e){if(e===f&&U)return U;if(!_&&e in L)return L[e];switch(e){case S:case I:case C:return function(){return new r(this,e)}}return function(){return new r(this)}},N=t+" Iterator",D=!1,L=e.prototype,x=L[A]||L["@@iterator"]||f&&L[f],U=!_&&x||b(f),k="Array"==t&&L.entries||x;if(k&&(P=u(k.call(new e)))!==Object.prototype&&P.next&&(o||u(P)===v||(l?l(P,v):a(P[A])||h(P,A,O)),d(P,N,!0,!0),o&&(g[N]=O)),E&&f==I&&x&&x.name!==I&&(!o&&y?p(L,"name",I):(D=!0,U=function(){return i(x,this)})),f)if(R={values:b(I),keys:m?U:b(S),entries:b(C)},T)for(w in R)(_||D||!(w in L))&&h(L,w,R[w]);else n({target:t,proto:!0,forced:_||D},R);return o&&!T||L[A]===U||h(L,A,U,{name:f}),g[t]=U,R}},3383:(e,t,r)=>{"use strict";var n,i,o,s=r(7293),a=r(614),c=r(111),u=r(30),l=r(9518),d=r(8052),p=r(5112),h=r(1913),f=p("iterator"),g=!1;[].keys&&("next"in(o=[].keys())?(i=l(l(o)))!==Object.prototype&&(n=i):g=!0),!c(n)||s((function(){var e={};return n[f].call(e)!==e}))?n={}:h&&(n=u(n)),a(n[f])||d(n,f,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:g}},7497:e=>{e.exports={}},6244:(e,t,r)=>{var n=r(7466);e.exports=function(e){return n(e.length)}},6339:(e,t,r)=>{var n=r(1702),i=r(7293),o=r(614),s=r(2597),a=r(9781),c=r(6530).CONFIGURABLE,u=r(2788),l=r(9909),d=l.enforce,p=l.get,h=String,f=Object.defineProperty,g=n("".slice),m=n("".replace),E=n([].join),y=a&&!i((function(){return 8!==f((function(){}),"length",{value:8}).length})),v=String(String).split("String"),_=e.exports=function(e,t,r){"Symbol("===g(h(t),0,7)&&(t="["+m(h(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!s(e,"name")||c&&e.name!==t)&&(a?f(e,"name",{value:t,configurable:!0}):e.name=t),y&&r&&s(r,"arity")&&e.length!==r.arity&&f(e,"length",{value:r.arity});try{r&&s(r,"constructor")&&r.constructor?a&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=d(e);return s(n,"source")||(n.source=E(v,"string"==typeof t?t:"")),e};Function.prototype.toString=_((function(){return o(this)&&p(this).source||u(this)}),"toString")},4758:e=>{var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},3929:(e,t,r)=>{var n=r(7850),i=TypeError;e.exports=function(e){if(n(e))throw i("The method doesn't accept regular expressions");return e}},2814:(e,t,r)=>{var n=r(7854),i=r(7293),o=r(1702),s=r(1340),a=r(3111).trim,c=r(1361),u=o("".charAt),l=n.parseFloat,d=n.Symbol,p=d&&d.iterator,h=1/l(c+"-0")!=-1/0||p&&!i((function(){l(Object(p))}));e.exports=h?function(e){var t=a(s(e)),r=l(t);return 0===r&&"-"==u(t,0)?-0:r}:l},3009:(e,t,r)=>{var n=r(7854),i=r(7293),o=r(1702),s=r(1340),a=r(3111).trim,c=r(1361),u=n.parseInt,l=n.Symbol,d=l&&l.iterator,p=/^[+-]?0x/i,h=o(p.exec),f=8!==u(c+"08")||22!==u(c+"0x16")||d&&!i((function(){u(Object(d))}));e.exports=f?function(e,t){var r=a(s(e));return u(r,t>>>0||(h(p,r)?16:10))}:u},1574:(e,t,r)=>{"use strict";var n=r(9781),i=r(1702),o=r(6916),s=r(7293),a=r(1956),c=r(5181),u=r(5296),l=r(7908),d=r(8361),p=Object.assign,h=Object.defineProperty,f=i([].concat);e.exports=!p||s((function(){if(n&&1!==p({b:1},p(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol(),i="abcdefghijklmnopqrst";return e[r]=7,i.split("").forEach((function(e){t[e]=e})),7!=p({},e)[r]||a(p({},t)).join("")!=i}))?function(e,t){for(var r=l(e),i=arguments.length,s=1,p=c.f,h=u.f;i>s;)for(var g,m=d(arguments[s++]),E=p?f(a(m),p(m)):a(m),y=E.length,v=0;y>v;)g=E[v++],n&&!o(h,m,g)||(r[g]=m[g]);return r}:p},30:(e,t,r)=>{var n,i=r(9670),o=r(6048),s=r(748),a=r(3501),c=r(490),u=r(317),l=r(6200)("IE_PROTO"),d=function(){},p=function(e){return"<script>"+e+"<\/script>"},h=function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t},f=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t;f="undefined"!=typeof document?document.domain&&n?h(n):((t=u("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F):h(n);for(var r=s.length;r--;)delete f.prototype[s[r]];return f()};a[l]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(d.prototype=i(e),r=new d,d.prototype=null,r[l]=e):r=f(),void 0===t?r:o.f(r,t)}},6048:(e,t,r)=>{var n=r(9781),i=r(3353),o=r(3070),s=r(9670),a=r(5656),c=r(1956);t.f=n&&!i?Object.defineProperties:function(e,t){s(e);for(var r,n=a(t),i=c(t),u=i.length,l=0;u>l;)o.f(e,r=i[l++],n[r]);return e}},3070:(e,t,r)=>{var n=r(9781),i=r(4664),o=r(3353),s=r(9670),a=r(4948),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor;t.f=n?o?function(e,t,r){if(s(e),t=a(t),s(r),"function"==typeof e&&"prototype"===t&&"value"in r&&"writable"in r&&!r.writable){var n=l(e,t);n&&n.writable&&(e[t]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return u(e,t,r)}:u:function(e,t,r){if(s(e),t=a(t),s(r),i)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},1236:(e,t,r)=>{var n=r(9781),i=r(6916),o=r(5296),s=r(9114),a=r(5656),c=r(4948),u=r(2597),l=r(4664),d=Object.getOwnPropertyDescriptor;t.f=n?d:function(e,t){if(e=a(e),t=c(t),l)try{return d(e,t)}catch(e){}if(u(e,t))return s(!i(o.f,e,t),e[t])}},8006:(e,t,r)=>{var n=r(6324),i=r(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},5181:(e,t)=>{t.f=Object.getOwnPropertySymbols},9518:(e,t,r)=>{var n=r(2597),i=r(614),o=r(7908),s=r(6200),a=r(8544),c=s("IE_PROTO"),u=Object,l=u.prototype;e.exports=a?u.getPrototypeOf:function(e){var t=o(e);if(n(t,c))return t[c];var r=t.constructor;return i(r)&&t instanceof r?r.prototype:t instanceof u?l:null}},7976:(e,t,r)=>{var n=r(1702);e.exports=n({}.isPrototypeOf)},6324:(e,t,r)=>{var n=r(1702),i=r(2597),o=r(5656),s=r(1318).indexOf,a=r(3501),c=n([].push);e.exports=function(e,t){var r,n=o(e),u=0,l=[];for(r in n)!i(a,r)&&i(n,r)&&c(l,r);for(;t.length>u;)i(n,r=t[u++])&&(~s(l,r)||c(l,r));return l}},1956:(e,t,r)=>{var n=r(6324),i=r(748);e.exports=Object.keys||function(e){return n(e,i)}},5296:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);t.f=i?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},7674:(e,t,r)=>{var n=r(5668),i=r(9670),o=r(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return i(r),o(n),t?e(r,n):r.__proto__=n,r}}():void 0)},4699:(e,t,r)=>{var n=r(9781),i=r(1702),o=r(1956),s=r(5656),a=i(r(5296).f),c=i([].push),u=function(e){return function(t){for(var r,i=s(t),u=o(i),l=u.length,d=0,p=[];l>d;)r=u[d++],n&&!a(i,r)||c(p,e?[r,i[r]]:i[r]);return p}};e.exports={entries:u(!0),values:u(!1)}},2140:(e,t,r)=>{var n=r(6916),i=r(614),o=r(111),s=TypeError;e.exports=function(e,t){var r,a;if("string"===t&&i(r=e.toString)&&!o(a=n(r,e)))return a;if(i(r=e.valueOf)&&!o(a=n(r,e)))return a;if("string"!==t&&i(r=e.toString)&&!o(a=n(r,e)))return a;throw s("Can't convert object to primitive value")}},3887:(e,t,r)=>{var n=r(5005),i=r(1702),o=r(8006),s=r(5181),a=r(9670),c=i([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(a(e)),r=s.f;return r?c(t,r(e)):t}},2626:(e,t,r)=>{var n=r(3070).f;e.exports=function(e,t,r){r in e||n(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})}},7651:(e,t,r)=>{var n=r(6916),i=r(9670),o=r(614),s=r(4326),a=r(2261),c=TypeError;e.exports=function(e,t){var r=e.exec;if(o(r)){var u=n(r,e,t);return null!==u&&i(u),u}if("RegExp"===s(e))return n(a,e,t);throw c("RegExp#exec called on incompatible receiver")}},2261:(e,t,r)=>{"use strict";var n,i,o=r(6916),s=r(1702),a=r(1340),c=r(7066),u=r(2999),l=r(2309),d=r(30),p=r(9909).get,h=r(9441),f=r(7168),g=l("native-string-replace",String.prototype.replace),m=RegExp.prototype.exec,E=m,y=s("".charAt),v=s("".indexOf),_=s("".replace),A=s("".slice),S=(i=/b*/g,o(m,n=/a/,"a"),o(m,i,"a"),0!==n.lastIndex||0!==i.lastIndex),I=u.BROKEN_CARET,C=void 0!==/()??/.exec("")[1];(S||C||I||h||f)&&(E=function(e){var t,r,n,i,s,u,l,h=this,f=p(h),O=a(e),T=f.raw;if(T)return T.lastIndex=h.lastIndex,t=o(E,T,O),h.lastIndex=T.lastIndex,t;var P=f.groups,R=I&&h.sticky,w=o(c,h),b=h.source,N=0,D=O;if(R&&(w=_(w,"y",""),-1===v(w,"g")&&(w+="g"),D=A(O,h.lastIndex),h.lastIndex>0&&(!h.multiline||h.multiline&&"\n"!==y(O,h.lastIndex-1))&&(b="(?: "+b+")",D=" "+D,N++),r=new RegExp("^(?:"+b+")",w)),C&&(r=new RegExp("^"+b+"$(?!\\s)",w)),S&&(n=h.lastIndex),i=o(m,R?r:h,D),R?i?(i.input=A(i.input,N),i[0]=A(i[0],N),i.index=h.lastIndex,h.lastIndex+=i[0].length):h.lastIndex=0:S&&i&&(h.lastIndex=h.global?i.index+i[0].length:n),C&&i&&i.length>1&&o(g,i[0],r,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i&&P)for(i.groups=u=d(null),s=0;s<P.length;s++)u[(l=P[s])[0]]=i[l[1]];return i}),e.exports=E},7066:(e,t,r)=>{"use strict";var n=r(9670);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},4706:(e,t,r)=>{var n=r(6916),i=r(2597),o=r(7976),s=r(7066),a=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in a||i(e,"flags")||!o(a,e)?t:n(s,e)}},2999:(e,t,r)=>{var n=r(7293),i=r(7854).RegExp,o=n((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),s=o||n((function(){return!i("a","y").sticky})),a=o||n((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:o}},9441:(e,t,r)=>{var n=r(7293),i=r(7854).RegExp;e.exports=n((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},7168:(e,t,r)=>{var n=r(7293),i=r(7854).RegExp;e.exports=n((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},4488:(e,t,r)=>{var n=r(8554),i=TypeError;e.exports=function(e){if(n(e))throw i("Can't call method on "+e);return e}},1150:e=>{e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},6340:(e,t,r)=>{"use strict";var n=r(5005),i=r(7045),o=r(5112),s=r(9781),a=o("species");e.exports=function(e){var t=n(e);s&&t&&!t[a]&&i(t,a,{configurable:!0,get:function(){return this}})}},8003:(e,t,r)=>{var n=r(3070).f,i=r(2597),o=r(5112)("toStringTag");e.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!i(e,o)&&n(e,o,{configurable:!0,value:t})}},6200:(e,t,r)=>{var n=r(2309),i=r(9711),o=n("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},5465:(e,t,r)=>{var n=r(7854),i=r(3072),o="__core-js_shared__",s=n[o]||i(o,{});e.exports=s},2309:(e,t,r)=>{var n=r(1913),i=r(5465);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.29.0",mode:n?"pure":"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.0/LICENSE",source:"https://github.com/zloirock/core-js"})},6707:(e,t,r)=>{var n=r(9670),i=r(9483),o=r(8554),s=r(5112)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||o(r=n(a)[s])?t:i(r)}},8710:(e,t,r)=>{var n=r(1702),i=r(9303),o=r(1340),s=r(4488),a=n("".charAt),c=n("".charCodeAt),u=n("".slice),l=function(e){return function(t,r){var n,l,d=o(s(t)),p=i(r),h=d.length;return p<0||p>=h?e?"":void 0:(n=c(d,p))<55296||n>56319||p+1===h||(l=c(d,p+1))<56320||l>57343?e?a(d,p):n:e?u(d,p,p+2):l-56320+(n-55296<<10)+65536}};e.exports={codeAt:l(!1),charAt:l(!0)}},3197:(e,t,r)=>{var n=r(1702),i=2147483647,o=/[^\0-\u007E]/,s=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",c=RangeError,u=n(s.exec),l=Math.floor,d=String.fromCharCode,p=n("".charCodeAt),h=n([].join),f=n([].push),g=n("".replace),m=n("".split),E=n("".toLowerCase),y=function(e){return e+22+75*(e<26)},v=function(e,t,r){var n=0;for(e=r?l(e/700):e>>1,e+=l(e/t);e>455;)e=l(e/35),n+=36;return l(n+36*e/(e+38))},_=function(e){var t=[];e=function(e){for(var t=[],r=0,n=e.length;r<n;){var i=p(e,r++);if(i>=55296&&i<=56319&&r<n){var o=p(e,r++);56320==(64512&o)?f(t,((1023&i)<<10)+(1023&o)+65536):(f(t,i),r--)}else f(t,i)}return t}(e);var r,n,o=e.length,s=128,u=0,g=72;for(r=0;r<e.length;r++)(n=e[r])<128&&f(t,d(n));var m=t.length,E=m;for(m&&f(t,"-");E<o;){var _=i;for(r=0;r<e.length;r++)(n=e[r])>=s&&n<_&&(_=n);var A=E+1;if(_-s>l((i-u)/A))throw c(a);for(u+=(_-s)*A,s=_,r=0;r<e.length;r++){if((n=e[r])<s&&++u>i)throw c(a);if(n==s){for(var S=u,I=36;;){var C=I<=g?1:I>=g+26?26:I-g;if(S<C)break;var O=S-C,T=36-C;f(t,d(y(C+O%T))),S=l(O/T),I+=36}f(t,d(y(S))),g=v(u,A,E==m),u=0,E++}}u++,s++}return h(t,"")};e.exports=function(e){var t,r,n=[],i=m(g(E(e),s,"."),".");for(t=0;t<i.length;t++)r=i[t],f(n,u(o,r)?"xn--"+_(r):r);return h(n,".")}},8415:(e,t,r)=>{"use strict";var n=r(9303),i=r(1340),o=r(4488),s=RangeError;e.exports=function(e){var t=i(o(this)),r="",a=n(e);if(a<0||a==1/0)throw s("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(r+=t);return r}},6091:(e,t,r)=>{var n=r(6530).PROPER,i=r(7293),o=r(1361);e.exports=function(e){return i((function(){return!!o[e]()||"â€‹Â…á Ž"!=="â€‹Â…á Ž"[e]()||n&&o[e].name!==e}))}},3111:(e,t,r)=>{var n=r(1702),i=r(4488),o=r(1340),s=r(1361),a=n("".replace),c=RegExp("^["+s+"]+"),u=RegExp("(^|[^"+s+"])["+s+"]+$"),l=function(e){return function(t){var r=o(i(t));return 1&e&&(r=a(r,c,"")),2&e&&(r=a(r,u,"$1")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},6293:(e,t,r)=>{var n=r(7392),i=r(7293);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},863:(e,t,r)=>{var n=r(1702);e.exports=n(1..valueOf)},1400:(e,t,r)=>{var n=r(9303),i=Math.max,o=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):o(r,t)}},5656:(e,t,r)=>{var n=r(8361),i=r(4488);e.exports=function(e){return n(i(e))}},9303:(e,t,r)=>{var n=r(4758);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},7466:(e,t,r)=>{var n=r(9303),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},7908:(e,t,r)=>{var n=r(4488),i=Object;e.exports=function(e){return i(n(e))}},7593:(e,t,r)=>{var n=r(6916),i=r(111),o=r(2190),s=r(8173),a=r(2140),c=r(5112),u=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var r,c=s(e,l);if(c){if(void 0===t&&(t="default"),r=n(c,e,t),!i(r)||o(r))return r;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},4948:(e,t,r)=>{var n=r(7593),i=r(2190);e.exports=function(e){var t=n(e,"string");return i(t)?t:t+""}},1694:(e,t,r)=>{var n={};n[r(5112)("toStringTag")]="z",e.exports="[object z]"===String(n)},1340:(e,t,r)=>{var n=r(648),i=String;e.exports=function(e){if("Symbol"===n(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},6330:e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},9711:(e,t,r)=>{var n=r(1702),i=0,o=Math.random(),s=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++i+o,36)}},5143:(e,t,r)=>{var n=r(7293),i=r(5112),o=r(9781),s=r(1913),a=i("iterator");e.exports=!n((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),r+=n+e})),s&&!e.toJSON||!t.size&&(s||!o)||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://Ñ‚ÐµÑÑ‚").host||"#%D0%B1"!==new URL("http://a#Ð±").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))},3307:(e,t,r)=>{var n=r(6293);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(e,t,r)=>{var n=r(9781),i=r(7293);e.exports=n&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:e=>{var t=TypeError;e.exports=function(e,r){if(e<r)throw t("Not enough arguments");return e}},4811:(e,t,r)=>{var n=r(7854),i=r(614),o=n.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},5112:(e,t,r)=>{var n=r(7854),i=r(2309),o=r(2597),s=r(9711),a=r(6293),c=r(3307),u=n.Symbol,l=i("wks"),d=c?u.for||u:u&&u.withoutSetter||s;e.exports=function(e){return o(l,e)||(l[e]=a&&o(u,e)?u[e]:d("Symbol."+e)),l[e]}},1361:e=>{e.exports="\t\n\v\f\r Â áš€â€€â€â€‚â€ƒâ€„â€…â€†â€‡â€ˆâ€‰â€Šâ€¯âŸã€€\u2028\u2029\ufeff"},6699:(e,t,r)=>{"use strict";var n=r(2109),i=r(1318).includes,o=r(7293),s=r(1223);n({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},6992:(e,t,r)=>{"use strict";var n=r(5656),i=r(1223),o=r(7497),s=r(9909),a=r(3070).f,c=r(1656),u=r(6178),l=r(1913),d=r(9781),p="Array Iterator",h=s.set,f=s.getterFor(p);e.exports=c(Array,"Array",(function(e,t){h(this,{type:p,target:n(e),index:0,kind:t})}),(function(){var e=f(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,u(void 0,!0)):u("keys"==r?n:"values"==r?t[n]:[n,t[n]],!1)}),"values");var g=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!l&&d&&"values"!==g.name)try{a(g,"name",{value:"values"})}catch(e){}},5827:(e,t,r)=>{"use strict";var n=r(2109),i=r(3671).left,o=r(9341),s=r(7392);n({target:"Array",proto:!0,forced:!r(5268)&&s>79&&s<83||!o("reduce")},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},1874:(e,t,r)=>{var n=r(2109),i=r(2814);n({target:"Number",stat:!0,forced:Number.parseFloat!=i},{parseFloat:i})},9494:(e,t,r)=>{var n=r(2109),i=r(3009);n({target:"Number",stat:!0,forced:Number.parseInt!=i},{parseInt:i})},6977:(e,t,r)=>{"use strict";var n=r(2109),i=r(1702),o=r(9303),s=r(863),a=r(8415),c=r(7293),u=RangeError,l=String,d=Math.floor,p=i(a),h=i("".slice),f=i(1..toFixed),g=function(e,t,r){return 0===t?r:t%2==1?g(e,t-1,r*e):g(e*e,t/2,r)},m=function(e,t,r){for(var n=-1,i=r;++n<6;)i+=t*e[n],e[n]=i%1e7,i=d(i/1e7)},E=function(e,t){for(var r=6,n=0;--r>=0;)n+=e[r],e[r]=d(n/t),n=n%t*1e7},y=function(e){for(var t=6,r="";--t>=0;)if(""!==r||0===t||0!==e[t]){var n=l(e[t]);r=""===r?n:r+p("0",7-n.length)+n}return r};n({target:"Number",proto:!0,forced:c((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!c((function(){f({})}))},{toFixed:function(e){var t,r,n,i,a=s(this),c=o(e),d=[0,0,0,0,0,0],f="",v="0";if(c<0||c>20)throw u("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return l(a);if(a<0&&(f="-",a=-a),a>1e-21)if(r=(t=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t}(a*g(2,69,1))-69)<0?a*g(2,-t,1):a/g(2,t,1),r*=4503599627370496,(t=52-t)>0){for(m(d,0,r),n=c;n>=7;)m(d,1e7,0),n-=7;for(m(d,g(10,n,1),0),n=t-1;n>=23;)E(d,1<<23),n-=23;E(d,1<<n),m(d,1,1),E(d,2),v=y(d)}else m(d,0,r),m(d,1<<-t,0),v=y(d)+p("0",c);return c>0?f+((i=v.length)<=c?"0."+p("0",c-i)+v:h(v,0,i-c)+"."+h(v,i-c)):f+v}})},9601:(e,t,r)=>{var n=r(2109),i=r(1574);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==i},{assign:i})},9720:(e,t,r)=>{var n=r(2109),i=r(4699).entries;n({target:"Object",stat:!0},{entries:function(e){return i(e)}})},8559:(e,t,r)=>{var n=r(2109),i=r(408),o=r(6135);n({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,(function(e,r){o(t,e,r)}),{AS_ENTRIES:!0}),t}})},6833:(e,t,r)=>{var n=r(2109),i=r(4699).values;n({target:"Object",stat:!0},{values:function(e){return i(e)}})},4603:(e,t,r)=>{var n=r(9781),i=r(7854),o=r(1702),s=r(4705),a=r(9587),c=r(8880),u=r(8006).f,l=r(7976),d=r(7850),p=r(1340),h=r(4706),f=r(2999),g=r(2626),m=r(8052),E=r(7293),y=r(2597),v=r(9909).enforce,_=r(6340),A=r(5112),S=r(9441),I=r(7168),C=A("match"),O=i.RegExp,T=O.prototype,P=i.SyntaxError,R=o(T.exec),w=o("".charAt),b=o("".replace),N=o("".indexOf),D=o("".slice),L=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,x=/a/g,U=/a/g,k=new O(x)!==x,M=f.MISSED_STICKY,H=f.UNSUPPORTED_Y;if(s("RegExp",n&&(!k||M||S||I||E((function(){return U[C]=!1,O(x)!=x||O(U)==U||"/a/i"!=O(x,"i")}))))){for(var B=function(e,t){var r,n,i,o,s,u,f=l(T,this),g=d(e),m=void 0===t,E=[],_=e;if(!f&&g&&m&&e.constructor===B)return e;if((g||l(T,e))&&(e=e.source,m&&(t=h(_))),e=void 0===e?"":p(e),t=void 0===t?"":p(t),_=e,S&&"dotAll"in x&&(n=!!t&&N(t,"s")>-1)&&(t=b(t,/s/g,"")),r=t,M&&"sticky"in x&&(i=!!t&&N(t,"y")>-1)&&H&&(t=b(t,/y/g,"")),I&&(o=function(e){for(var t,r=e.length,n=0,i="",o=[],s={},a=!1,c=!1,u=0,l="";n<=r;n++){if("\\"===(t=w(e,n)))t+=w(e,++n);else if("]"===t)a=!1;else if(!a)switch(!0){case"["===t:a=!0;break;case"("===t:R(L,D(e,n+1))&&(n+=2,c=!0),i+=t,u++;continue;case">"===t&&c:if(""===l||y(s,l))throw new P("Invalid capture group name");s[l]=!0,o[o.length]=[l,u],c=!1,l="";continue}c?l+=t:i+=t}return[i,o]}(e),e=o[0],E=o[1]),s=a(O(e,t),f?this:T,B),(n||i||E.length)&&(u=v(s),n&&(u.dotAll=!0,u.raw=B(function(e){for(var t,r=e.length,n=0,i="",o=!1;n<=r;n++)"\\"!==(t=w(e,n))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+w(e,++n);return i}(e),r)),i&&(u.sticky=!0),E.length&&(u.groups=E)),e!==_)try{c(s,"source",""===_?"(?:)":_)}catch(e){}return s},G=u(O),j=0;G.length>j;)g(B,O,G[j++]);T.constructor=B,B.prototype=T,m(i,"RegExp",B,{constructor:!0})}_("RegExp")},4916:(e,t,r)=>{"use strict";var n=r(2109),i=r(2261);n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},9714:(e,t,r)=>{"use strict";var n=r(6530).PROPER,i=r(8052),o=r(9670),s=r(1340),a=r(7293),c=r(4706),u="toString",l=RegExp.prototype.toString,d=a((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),p=n&&l.name!=u;(d||p)&&i(RegExp.prototype,u,(function(){var e=o(this);return"/"+s(e.source)+"/"+s(c(e))}),{unsafe:!0})},7852:(e,t,r)=>{"use strict";var n,i=r(2109),o=r(1470),s=r(1236).f,a=r(7466),c=r(1340),u=r(3929),l=r(4488),d=r(4964),p=r(1913),h=o("".endsWith),f=o("".slice),g=Math.min,m=d("endsWith");i({target:"String",proto:!0,forced:!(!p&&!m&&(n=s(String.prototype,"endsWith"),n&&!n.writable)||m)},{endsWith:function(e){var t=c(l(this));u(e);var r=arguments.length>1?arguments[1]:void 0,n=t.length,i=void 0===r?n:g(a(r),n),o=c(e);return h?h(t,o,i):f(t,i-o.length,i)===o}})},2023:(e,t,r)=>{"use strict";var n=r(2109),i=r(1702),o=r(3929),s=r(4488),a=r(1340),c=r(4964),u=i("".indexOf);n({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~u(a(s(this)),a(o(e)),arguments.length>1?arguments[1]:void 0)}})},8783:(e,t,r)=>{"use strict";var n=r(8710).charAt,i=r(1340),o=r(9909),s=r(1656),a=r(6178),c="String Iterator",u=o.set,l=o.getterFor(c);s(String,"String",(function(e){u(this,{type:c,string:i(e),index:0})}),(function(){var e,t=l(this),r=t.string,i=t.index;return i>=r.length?a(void 0,!0):(e=n(r,i),t.index+=e.length,a(e,!1))}))},4723:(e,t,r)=>{"use strict";var n=r(6916),i=r(7007),o=r(9670),s=r(8554),a=r(7466),c=r(1340),u=r(4488),l=r(8173),d=r(1530),p=r(7651);i("match",(function(e,t,r){return[function(t){var r=u(this),i=s(t)?void 0:l(t,e);return i?n(i,t,r):new RegExp(t)[e](c(r))},function(e){var n=o(this),i=c(e),s=r(t,n,i);if(s.done)return s.value;if(!n.global)return p(n,i);var u=n.unicode;n.lastIndex=0;for(var l,h=[],f=0;null!==(l=p(n,i));){var g=c(l[0]);h[f]=g,""===g&&(n.lastIndex=d(i,a(n.lastIndex),u)),f++}return 0===f?null:h}]}))},5306:(e,t,r)=>{"use strict";var n=r(2104),i=r(6916),o=r(1702),s=r(7007),a=r(7293),c=r(9670),u=r(614),l=r(8554),d=r(9303),p=r(7466),h=r(1340),f=r(4488),g=r(1530),m=r(8173),E=r(647),y=r(7651),v=r(5112)("replace"),_=Math.max,A=Math.min,S=o([].concat),I=o([].push),C=o("".indexOf),O=o("".slice),T="$0"==="a".replace(/./,"$0"),P=!!/./[v]&&""===/./[v]("a","$0");s("replace",(function(e,t,r){var o=P?"$":"$0";return[function(e,r){var n=f(this),o=l(e)?void 0:m(e,v);return o?i(o,e,n,r):i(t,h(n),e,r)},function(e,i){var s=c(this),a=h(e);if("string"==typeof i&&-1===C(i,o)&&-1===C(i,"$<")){var l=r(t,s,a,i);if(l.done)return l.value}var f=u(i);f||(i=h(i));var m=s.global;if(m){var v=s.unicode;s.lastIndex=0}for(var T=[];;){var P=y(s,a);if(null===P)break;if(I(T,P),!m)break;""===h(P[0])&&(s.lastIndex=g(a,p(s.lastIndex),v))}for(var R,w="",b=0,N=0;N<T.length;N++){for(var D=h((P=T[N])[0]),L=_(A(d(P.index),a.length),0),x=[],U=1;U<P.length;U++)I(x,void 0===(R=P[U])?R:String(R));var k=P.groups;if(f){var M=S([D],x,L,a);void 0!==k&&I(M,k);var H=h(n(i,void 0,M))}else H=E(D,a,L,x,k,i);L>=b&&(w+=O(a,b,L)+H,b=L+D.length)}return w+O(a,b)}]}),!!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!T||P)},4765:(e,t,r)=>{"use strict";var n=r(6916),i=r(7007),o=r(9670),s=r(8554),a=r(4488),c=r(1150),u=r(1340),l=r(8173),d=r(7651);i("search",(function(e,t,r){return[function(t){var r=a(this),i=s(t)?void 0:l(t,e);return i?n(i,t,r):new RegExp(t)[e](u(r))},function(e){var n=o(this),i=u(e),s=r(t,n,i);if(s.done)return s.value;var a=n.lastIndex;c(a,0)||(n.lastIndex=0);var l=d(n,i);return c(n.lastIndex,a)||(n.lastIndex=a),null===l?-1:l.index}]}))},3123:(e,t,r)=>{"use strict";var n=r(2104),i=r(6916),o=r(1702),s=r(7007),a=r(9670),c=r(8554),u=r(7850),l=r(4488),d=r(6707),p=r(1530),h=r(7466),f=r(1340),g=r(8173),m=r(1589),E=r(7651),y=r(2261),v=r(2999),_=r(7293),A=v.UNSUPPORTED_Y,S=4294967295,I=Math.min,C=[].push,O=o(/./.exec),T=o(C),P=o("".slice);s("split",(function(e,t,r){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var o=f(l(this)),s=void 0===r?S:r>>>0;if(0===s)return[];if(void 0===e)return[o];if(!u(e))return i(t,o,e,s);for(var a,c,d,p=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,E=new RegExp(e.source,h+"g");(a=i(y,E,o))&&!((c=E.lastIndex)>g&&(T(p,P(o,g,a.index)),a.length>1&&a.index<o.length&&n(C,p,m(a,1)),d=a[0].length,g=c,p.length>=s));)E.lastIndex===a.index&&E.lastIndex++;return g===o.length?!d&&O(E,"")||T(p,""):T(p,P(o,g)),p.length>s?m(p,0,s):p}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:i(t,this,e,r)}:t,[function(t,r){var n=l(this),s=c(t)?void 0:g(t,e);return s?i(s,t,n,r):i(o,f(n),t,r)},function(e,n){var i=a(this),s=f(e),c=r(o,i,s,n,o!==t);if(c.done)return c.value;var u=d(i,RegExp),l=i.unicode,g=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(A?"g":"y"),m=new u(A?"^(?:"+i.source+")":i,g),y=void 0===n?S:n>>>0;if(0===y)return[];if(0===s.length)return null===E(m,s)?[s]:[];for(var v=0,_=0,C=[];_<s.length;){m.lastIndex=A?0:_;var O,R=E(m,A?P(s,_):s);if(null===R||(O=I(h(m.lastIndex+(A?_:0)),s.length))===v)_=p(s,_,l);else{if(T(C,P(s,v,_)),C.length===y)return C;for(var w=1;w<=R.length-1;w++)if(T(C,R[w]),C.length===y)return C;_=v=O}}return T(C,P(s,v)),C}]}),!!_((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),A)},6755:(e,t,r)=>{"use strict";var n,i=r(2109),o=r(1470),s=r(1236).f,a=r(7466),c=r(1340),u=r(3929),l=r(4488),d=r(4964),p=r(1913),h=o("".startsWith),f=o("".slice),g=Math.min,m=d("startsWith");i({target:"String",proto:!0,forced:!(!p&&!m&&(n=s(String.prototype,"startsWith"),n&&!n.writable)||m)},{startsWith:function(e){var t=c(l(this));u(e);var r=a(g(arguments.length>1?arguments[1]:void 0,t.length)),n=c(e);return h?h(t,n,r):f(t,r,r+n.length)===n}})},3210:(e,t,r)=>{"use strict";var n=r(2109),i=r(3111).trim;n({target:"String",proto:!0,forced:r(6091)("trim")},{trim:function(){return i(this)}})},1817:(e,t,r)=>{"use strict";var n=r(2109),i=r(9781),o=r(7854),s=r(1702),a=r(2597),c=r(614),u=r(7976),l=r(1340),d=r(7045),p=r(9920),h=o.Symbol,f=h&&h.prototype;if(i&&c(h)&&(!("description"in f)||void 0!==h().description)){var g={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),t=u(f,this)?new h(e):void 0===e?h():h(e);return""===e&&(g[t]=!0),t};p(m,h),m.prototype=f,f.constructor=m;var E="Symbol(test)"==String(h("test")),y=s(f.valueOf),v=s(f.toString),_=/^Symbol\((.*)\)[^)]+$/,A=s("".replace),S=s("".slice);d(f,"description",{configurable:!0,get:function(){var e=y(this);if(a(g,e))return"";var t=v(e),r=E?S(t,7,-1):A(t,_,"$1");return""===r?void 0:r}}),n({global:!0,constructor:!0,forced:!0},{Symbol:m})}},4747:(e,t,r)=>{var n=r(7854),i=r(8324),o=r(8509),s=r(8533),a=r(8880),c=function(e){if(e&&e.forEach!==s)try{a(e,"forEach",s)}catch(t){e.forEach=s}};for(var u in i)i[u]&&c(n[u]&&n[u].prototype);c(o)},3948:(e,t,r)=>{var n=r(7854),i=r(8324),o=r(8509),s=r(6992),a=r(8880),c=r(5112),u=c("iterator"),l=c("toStringTag"),d=s.values,p=function(e,t){if(e){if(e[u]!==d)try{a(e,u,d)}catch(t){e[u]=d}if(e[l]||a(e,l,t),i[t])for(var r in s)if(e[r]!==s[r])try{a(e,r,s[r])}catch(t){e[r]=s[r]}}};for(var h in i)p(n[h]&&n[h].prototype,h);p(o,"DOMTokenList")},5556:(e,t,r)=>{"use strict";r(6992);var n=r(2109),i=r(7854),o=r(6916),s=r(1702),a=r(9781),c=r(5143),u=r(8052),l=r(7045),d=r(9190),p=r(8003),h=r(3061),f=r(9909),g=r(5787),m=r(614),E=r(2597),y=r(9974),v=r(648),_=r(9670),A=r(111),S=r(1340),I=r(30),C=r(9114),O=r(4121),T=r(1246),P=r(8053),R=r(5112),w=r(4362),b=R("iterator"),N="URLSearchParams",D="URLSearchParamsIterator",L=f.set,x=f.getterFor(N),U=f.getterFor(D),k=Object.getOwnPropertyDescriptor,M=function(e){if(!a)return i[e];var t=k(i,e);return t&&t.value},H=M("fetch"),B=M("Request"),G=M("Headers"),j=B&&B.prototype,q=G&&G.prototype,F=i.RegExp,V=i.TypeError,Y=i.decodeURIComponent,z=i.encodeURIComponent,K=s("".charAt),W=s([].join),$=s([].push),Q=s("".replace),Z=s([].shift),J=s([].splice),X=s("".split),ee=s("".slice),te=/\+/g,re=Array(4),ne=function(e){return re[e-1]||(re[e-1]=F("((?:%[\\da-f]{2}){"+e+"})","gi"))},ie=function(e){try{return Y(e)}catch(t){return e}},oe=function(e){var t=Q(e,te," "),r=4;try{return Y(t)}catch(e){for(;r;)t=Q(t,ne(r--),ie);return t}},se=/[!'()~]|%20/g,ae={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ce=function(e){return ae[e]},ue=function(e){return Q(z(e),se,ce)},le=h((function(e,t){L(this,{type:D,iterator:O(x(e).entries),kind:t})}),"Iterator",(function(){var e=U(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),r}),!0),de=function(e){this.entries=[],this.url=null,void 0!==e&&(A(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===K(e,0)?ee(e,1):e:S(e)))};de.prototype={type:N,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,r,n,i,s,a,c,u=T(e);if(u)for(r=(t=O(e,u)).next;!(n=o(r,t)).done;){if(s=(i=O(_(n.value))).next,(a=o(s,i)).done||(c=o(s,i)).done||!o(s,i).done)throw V("Expected sequence with length 2");$(this.entries,{key:S(a.value),value:S(c.value)})}else for(var l in e)E(e,l)&&$(this.entries,{key:l,value:S(e[l])})},parseQuery:function(e){if(e)for(var t,r,n=X(e,"&"),i=0;i<n.length;)(t=n[i++]).length&&(r=X(t,"="),$(this.entries,{key:oe(Z(r)),value:oe(W(r,"="))}))},serialize:function(){for(var e,t=this.entries,r=[],n=0;n<t.length;)e=t[n++],$(r,ue(e.key)+"="+ue(e.value));return W(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var pe=function(){g(this,he);var e=arguments.length>0?arguments[0]:void 0,t=L(this,new de(e));a||(this.length=t.entries.length)},he=pe.prototype;if(d(he,{append:function(e,t){P(arguments.length,2);var r=x(this);$(r.entries,{key:S(e),value:S(t)}),a||this.length++,r.updateURL()},delete:function(e){P(arguments.length,1);for(var t=x(this),r=t.entries,n=S(e),i=0;i<r.length;)r[i].key===n?J(r,i,1):i++;a||(this.length=r.length),t.updateURL()},get:function(e){P(arguments.length,1);for(var t=x(this).entries,r=S(e),n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){P(arguments.length,1);for(var t=x(this).entries,r=S(e),n=[],i=0;i<t.length;i++)t[i].key===r&&$(n,t[i].value);return n},has:function(e){P(arguments.length,1);for(var t=x(this).entries,r=S(e),n=0;n<t.length;)if(t[n++].key===r)return!0;return!1},set:function(e,t){P(arguments.length,1);for(var r,n=x(this),i=n.entries,o=!1,s=S(e),c=S(t),u=0;u<i.length;u++)(r=i[u]).key===s&&(o?J(i,u--,1):(o=!0,r.value=c));o||$(i,{key:s,value:c}),a||(this.length=i.length),n.updateURL()},sort:function(){var e=x(this);w(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,r=x(this).entries,n=y(e,arguments.length>1?arguments[1]:void 0),i=0;i<r.length;)n((t=r[i++]).value,t.key,this)},keys:function(){return new le(this,"keys")},values:function(){return new le(this,"values")},entries:function(){return new le(this,"entries")}},{enumerable:!0}),u(he,b,he.entries,{name:"entries"}),u(he,"toString",(function(){return x(this).serialize()}),{enumerable:!0}),a&&l(he,"size",{get:function(){return x(this).entries.length},configurable:!0,enumerable:!0}),p(pe,N),n({global:!0,constructor:!0,forced:!c},{URLSearchParams:pe}),!c&&m(G)){var fe=s(q.has),ge=s(q.set),me=function(e){if(A(e)){var t,r=e.body;if(v(r)===N)return t=e.headers?new G(e.headers):new G,fe(t,"content-type")||ge(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),I(e,{body:C(0,S(r)),headers:C(0,t)})}return e};if(m(H)&&n({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return H(e,arguments.length>1?me(arguments[1]):{})}}),m(B)){var Ee=function(e){return g(this,j),new B(e,arguments.length>1?me(arguments[1]):{})};j.constructor=Ee,Ee.prototype=j,n({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Ee})}}e.exports={URLSearchParams:pe,getState:x}},1637:(e,t,r)=>{r(5556)},8789:(e,t,r)=>{"use strict";r(8783);var n,i=r(2109),o=r(9781),s=r(5143),a=r(7854),c=r(9974),u=r(1702),l=r(8052),d=r(7045),p=r(5787),h=r(2597),f=r(1574),g=r(8457),m=r(1589),E=r(8710).codeAt,y=r(3197),v=r(1340),_=r(8003),A=r(8053),S=r(5556),I=r(9909),C=I.set,O=I.getterFor("URL"),T=S.URLSearchParams,P=S.getState,R=a.URL,w=a.TypeError,b=a.parseInt,N=Math.floor,D=Math.pow,L=u("".charAt),x=u(/./.exec),U=u([].join),k=u(1..toString),M=u([].pop),H=u([].push),B=u("".replace),G=u([].shift),j=u("".split),q=u("".slice),F=u("".toLowerCase),V=u([].unshift),Y="Invalid scheme",z="Invalid host",K="Invalid port",W=/[a-z]/i,$=/[\d+-.a-z]/i,Q=/\d/,Z=/^0x/i,J=/^[0-7]+$/,X=/^\d+$/,ee=/^[\da-f]+$/i,te=/[\0\t\n\r #%/:<>?@[\\\]^|]/,re=/[\0\t\n\r #/:<>?@[\\\]^|]/,ne=/^[\u0000-\u0020]+/,ie=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,oe=/[\t\n\r]/g,se=function(e){var t,r,n,i;if("number"==typeof e){for(t=[],r=0;r<4;r++)V(t,e%256),e=N(e/256);return U(t,".")}if("object"==typeof e){for(t="",n=function(e){for(var t=null,r=1,n=null,i=0,o=0;o<8;o++)0!==e[o]?(i>r&&(t=n,r=i),n=null,i=0):(null===n&&(n=o),++i);return i>r&&(t=n,r=i),t}(e),r=0;r<8;r++)i&&0===e[r]||(i&&(i=!1),n===r?(t+=r?":":"::",i=!0):(t+=k(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},ae={},ce=f({},ae,{" ":1,'"':1,"<":1,">":1,"`":1}),ue=f({},ce,{"#":1,"?":1,"{":1,"}":1}),le=f({},ue,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),de=function(e,t){var r=E(e,0);return r>32&&r<127&&!h(t,e)?e:encodeURIComponent(e)},pe={ftp:21,file:null,http:80,https:443,ws:80,wss:443},he=function(e,t){var r;return 2==e.length&&x(W,L(e,0))&&(":"==(r=L(e,1))||!t&&"|"==r)},fe=function(e){var t;return e.length>1&&he(q(e,0,2))&&(2==e.length||"/"===(t=L(e,2))||"\\"===t||"?"===t||"#"===t)},ge=function(e){return"."===e||"%2e"===F(e)},me={},Ee={},ye={},ve={},_e={},Ae={},Se={},Ie={},Ce={},Oe={},Te={},Pe={},Re={},we={},be={},Ne={},De={},Le={},xe={},Ue={},ke={},Me=function(e,t,r){var n,i,o,s=v(e);if(t){if(i=this.parse(s))throw w(i);this.searchParams=null}else{if(void 0!==r&&(n=new Me(r,!0)),i=this.parse(s,null,n))throw w(i);(o=P(new T)).bindURL(this),this.searchParams=o}};Me.prototype={type:"URL",parse:function(e,t,r){var i,o,s,a,c,u=this,l=t||me,d=0,p="",f=!1,E=!1,y=!1;for(e=v(e),t||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,e=B(e,ne,""),e=B(e,ie,"$1")),e=B(e,oe,""),i=g(e);d<=i.length;){switch(o=i[d],l){case me:if(!o||!x(W,o)){if(t)return Y;l=ye;continue}p+=F(o),l=Ee;break;case Ee:if(o&&(x($,o)||"+"==o||"-"==o||"."==o))p+=F(o);else{if(":"!=o){if(t)return Y;p="",l=ye,d=0;continue}if(t&&(u.isSpecial()!=h(pe,p)||"file"==p&&(u.includesCredentials()||null!==u.port)||"file"==u.scheme&&!u.host))return;if(u.scheme=p,t)return void(u.isSpecial()&&pe[u.scheme]==u.port&&(u.port=null));p="","file"==u.scheme?l=we:u.isSpecial()&&r&&r.scheme==u.scheme?l=ve:u.isSpecial()?l=Ie:"/"==i[d+1]?(l=_e,d++):(u.cannotBeABaseURL=!0,H(u.path,""),l=xe)}break;case ye:if(!r||r.cannotBeABaseURL&&"#"!=o)return Y;if(r.cannotBeABaseURL&&"#"==o){u.scheme=r.scheme,u.path=m(r.path),u.query=r.query,u.fragment="",u.cannotBeABaseURL=!0,l=ke;break}l="file"==r.scheme?we:Ae;continue;case ve:if("/"!=o||"/"!=i[d+1]){l=Ae;continue}l=Ce,d++;break;case _e:if("/"==o){l=Oe;break}l=Le;continue;case Ae:if(u.scheme=r.scheme,o==n)u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=m(r.path),u.query=r.query;else if("/"==o||"\\"==o&&u.isSpecial())l=Se;else if("?"==o)u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=m(r.path),u.query="",l=Ue;else{if("#"!=o){u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=m(r.path),u.path.length--,l=Le;continue}u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=m(r.path),u.query=r.query,u.fragment="",l=ke}break;case Se:if(!u.isSpecial()||"/"!=o&&"\\"!=o){if("/"!=o){u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,l=Le;continue}l=Oe}else l=Ce;break;case Ie:if(l=Ce,"/"!=o||"/"!=L(p,d+1))continue;d++;break;case Ce:if("/"!=o&&"\\"!=o){l=Oe;continue}break;case Oe:if("@"==o){f&&(p="%40"+p),f=!0,s=g(p);for(var _=0;_<s.length;_++){var A=s[_];if(":"!=A||y){var S=de(A,le);y?u.password+=S:u.username+=S}else y=!0}p=""}else if(o==n||"/"==o||"?"==o||"#"==o||"\\"==o&&u.isSpecial()){if(f&&""==p)return"Invalid authority";d-=g(p).length+1,p="",l=Te}else p+=o;break;case Te:case Pe:if(t&&"file"==u.scheme){l=Ne;continue}if(":"!=o||E){if(o==n||"/"==o||"?"==o||"#"==o||"\\"==o&&u.isSpecial()){if(u.isSpecial()&&""==p)return z;if(t&&""==p&&(u.includesCredentials()||null!==u.port))return;if(a=u.parseHost(p))return a;if(p="",l=De,t)return;continue}"["==o?E=!0:"]"==o&&(E=!1),p+=o}else{if(""==p)return z;if(a=u.parseHost(p))return a;if(p="",l=Re,t==Pe)return}break;case Re:if(!x(Q,o)){if(o==n||"/"==o||"?"==o||"#"==o||"\\"==o&&u.isSpecial()||t){if(""!=p){var I=b(p,10);if(I>65535)return K;u.port=u.isSpecial()&&I===pe[u.scheme]?null:I,p=""}if(t)return;l=De;continue}return K}p+=o;break;case we:if(u.scheme="file","/"==o||"\\"==o)l=be;else{if(!r||"file"!=r.scheme){l=Le;continue}if(o==n)u.host=r.host,u.path=m(r.path),u.query=r.query;else if("?"==o)u.host=r.host,u.path=m(r.path),u.query="",l=Ue;else{if("#"!=o){fe(U(m(i,d),""))||(u.host=r.host,u.path=m(r.path),u.shortenPath()),l=Le;continue}u.host=r.host,u.path=m(r.path),u.query=r.query,u.fragment="",l=ke}}break;case be:if("/"==o||"\\"==o){l=Ne;break}r&&"file"==r.scheme&&!fe(U(m(i,d),""))&&(he(r.path[0],!0)?H(u.path,r.path[0]):u.host=r.host),l=Le;continue;case Ne:if(o==n||"/"==o||"\\"==o||"?"==o||"#"==o){if(!t&&he(p))l=Le;else if(""==p){if(u.host="",t)return;l=De}else{if(a=u.parseHost(p))return a;if("localhost"==u.host&&(u.host=""),t)return;p="",l=De}continue}p+=o;break;case De:if(u.isSpecial()){if(l=Le,"/"!=o&&"\\"!=o)continue}else if(t||"?"!=o)if(t||"#"!=o){if(o!=n&&(l=Le,"/"!=o))continue}else u.fragment="",l=ke;else u.query="",l=Ue;break;case Le:if(o==n||"/"==o||"\\"==o&&u.isSpecial()||!t&&("?"==o||"#"==o)){if(".."===(c=F(c=p))||"%2e."===c||".%2e"===c||"%2e%2e"===c?(u.shortenPath(),"/"==o||"\\"==o&&u.isSpecial()||H(u.path,"")):ge(p)?"/"==o||"\\"==o&&u.isSpecial()||H(u.path,""):("file"==u.scheme&&!u.path.length&&he(p)&&(u.host&&(u.host=""),p=L(p,0)+":"),H(u.path,p)),p="","file"==u.scheme&&(o==n||"?"==o||"#"==o))for(;u.path.length>1&&""===u.path[0];)G(u.path);"?"==o?(u.query="",l=Ue):"#"==o&&(u.fragment="",l=ke)}else p+=de(o,ue);break;case xe:"?"==o?(u.query="",l=Ue):"#"==o?(u.fragment="",l=ke):o!=n&&(u.path[0]+=de(o,ae));break;case Ue:t||"#"!=o?o!=n&&("'"==o&&u.isSpecial()?u.query+="%27":u.query+="#"==o?"%23":de(o,ae)):(u.fragment="",l=ke);break;case ke:o!=n&&(u.fragment+=de(o,ce))}d++}},parseHost:function(e){var t,r,n;if("["==L(e,0)){if("]"!=L(e,e.length-1))return z;if(t=function(e){var t,r,n,i,o,s,a,c=[0,0,0,0,0,0,0,0],u=0,l=null,d=0,p=function(){return L(e,d)};if(":"==p()){if(":"!=L(e,1))return;d+=2,l=++u}for(;p();){if(8==u)return;if(":"!=p()){for(t=r=0;r<4&&x(ee,p());)t=16*t+b(p(),16),d++,r++;if("."==p()){if(0==r)return;if(d-=r,u>6)return;for(n=0;p();){if(i=null,n>0){if(!("."==p()&&n<4))return;d++}if(!x(Q,p()))return;for(;x(Q,p());){if(o=b(p(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;d++}c[u]=256*c[u]+i,2!=++n&&4!=n||u++}if(4!=n)return;break}if(":"==p()){if(d++,!p())return}else if(p())return;c[u++]=t}else{if(null!==l)return;d++,l=++u}}if(null!==l)for(s=u-l,u=7;0!=u&&s>0;)a=c[u],c[u--]=c[l+s-1],c[l+--s]=a;else if(8!=u)return;return c}(q(e,1,-1)),!t)return z;this.host=t}else if(this.isSpecial()){if(e=y(e),x(te,e))return z;if(t=function(e){var t,r,n,i,o,s,a,c=j(e,".");if(c.length&&""==c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(r=[],n=0;n<t;n++){if(""==(i=c[n]))return e;if(o=10,i.length>1&&"0"==L(i,0)&&(o=x(Z,i)?16:8,i=q(i,8==o?1:2)),""===i)s=0;else{if(!x(10==o?X:8==o?J:ee,i))return e;s=b(i,o)}H(r,s)}for(n=0;n<t;n++)if(s=r[n],n==t-1){if(s>=D(256,5-t))return null}else if(s>255)return null;for(a=M(r),n=0;n<r.length;n++)a+=r[n]*D(256,3-n);return a}(e),null===t)return z;this.host=t}else{if(x(re,e))return z;for(t="",r=g(e),n=0;n<r.length;n++)t+=de(r[n],ae);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return h(pe,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&he(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,n=e.password,i=e.host,o=e.port,s=e.path,a=e.query,c=e.fragment,u=t+":";return null!==i?(u+="//",e.includesCredentials()&&(u+=r+(n?":"+n:"")+"@"),u+=se(i),null!==o&&(u+=":"+o)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?s[0]:s.length?"/"+U(s,"/"):"",null!==a&&(u+="?"+a),null!==c&&(u+="#"+c),u},setHref:function(e){var t=this.parse(e);if(t)throw w(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new He(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+se(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(v(e)+":",me)},getUsername:function(){return this.username},setUsername:function(e){var t=g(v(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=de(t[r],le)}},getPassword:function(){return this.password},setPassword:function(e){var t=g(v(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=de(t[r],le)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?se(e):se(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Te)},getHostname:function(){var e=this.host;return null===e?"":se(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Pe)},getPort:function(){var e=this.port;return null===e?"":v(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=v(e))?this.port=null:this.parse(e,Re))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+U(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,De))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=v(e))?this.query=null:("?"==L(e,0)&&(e=q(e,1)),this.query="",this.parse(e,Ue)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=v(e))?("#"==L(e,0)&&(e=q(e,1)),this.fragment="",this.parse(e,ke)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var He=function(e){var t=p(this,Be),r=A(arguments.length,1)>1?arguments[1]:void 0,n=C(t,new Me(e,!1,r));o||(t.href=n.serialize(),t.origin=n.getOrigin(),t.protocol=n.getProtocol(),t.username=n.getUsername(),t.password=n.getPassword(),t.host=n.getHost(),t.hostname=n.getHostname(),t.port=n.getPort(),t.pathname=n.getPathname(),t.search=n.getSearch(),t.searchParams=n.getSearchParams(),t.hash=n.getHash())},Be=He.prototype,Ge=function(e,t){return{get:function(){return O(this)[e]()},set:t&&function(e){return O(this)[t](e)},configurable:!0,enumerable:!0}};if(o&&(d(Be,"href",Ge("serialize","setHref")),d(Be,"origin",Ge("getOrigin")),d(Be,"protocol",Ge("getProtocol","setProtocol")),d(Be,"username",Ge("getUsername","setUsername")),d(Be,"password",Ge("getPassword","setPassword")),d(Be,"host",Ge("getHost","setHost")),d(Be,"hostname",Ge("getHostname","setHostname")),d(Be,"port",Ge("getPort","setPort")),d(Be,"pathname",Ge("getPathname","setPathname")),d(Be,"search",Ge("getSearch","setSearch")),d(Be,"searchParams",Ge("getSearchParams")),d(Be,"hash",Ge("getHash","setHash"))),l(Be,"toJSON",(function(){return O(this).serialize()}),{enumerable:!0}),l(Be,"toString",(function(){return O(this).serialize()}),{enumerable:!0}),R){var je=R.createObjectURL,qe=R.revokeObjectURL;je&&l(He,"createObjectURL",c(je,R)),qe&&l(He,"revokeObjectURL",c(qe,R))}_(He,"URL"),i({global:!0,constructor:!0,forced:!s,sham:!o},{URL:He})},285:(e,t,r)=>{r(8789)}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n](o,o.exports,r),o.loaded=!0,o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};r.r(e),r.d(e,{FunctionToString:()=>Z,InboundFilters:()=>le});var t={};r.r(t),r.d(t,{Breadcrumbs:()=>wt,Dedupe:()=>Mt,GlobalHandlers:()=>ht,HttpContext:()=>kt,LinkedErrors:()=>xt,TryCatch:()=>_t}),r(6992),r(3948),r(1817),r(4747),r(4916),r(285),r(1637);var n=/android/i;function i(){var e,t=null===(e=navigator)||void 0===e?void 0:e.userAgent;return!!t&&Boolean((/Safari/.test(t)&&(/iPhone/.test(t)||/iPad/.test(t))&&!/Trident/.test(t)||/AppleWebKit/.test(t)&&!(/Android/.test(t)||/Linux/.test(t)||/Trident/.test(t))&&(/Mobile/.test(t)||/iPhone/.test(t)||/iPad/.test(t))&&!/Macintosh/.test(t)&&!/Windows/.test(t))&&!(/Chrome/.test(t)||/CriOS/.test(t)||/Edg/.test(t)))}function o(){var e,t=null===(e=navigator)||void 0===e?void 0:e.userAgent;return!!t&&Boolean((/Safari/.test(t)||/AppleWebKit/.test(t))&&(/Macintosh/.test(t)||/Windows/.test(t))&&!/iPhone/.test(t)&&!/iPad/.test(t)&&!/Chrome/.test(t)&&!/Edg/.test(t)&&!/Firefox/.test(t))}var s,a,c,u,l,d,p,h,f,g={get documentBody(){return window.document.body},get documentReferrer(){return window.document.referrer},get documentVisibilityState(){return document.visibilityState},getQueryParams:function(e,t){var r=new URL(e),n={};return t.forEach((e=>{var t=r.searchParams.get(e);t&&(n[e]=t)})),n},isAndroid:function(){return n.test(window.navigator.userAgent)},isDesktopSafari:o,isMobileSafari:i,isSafari:function(){return i()||o()},isSupported:function(){return void 0!==window.postMessage&&void 0!==window.fetch&&void 0!==document.createElement("a").classList},redirectTo:function(e){window.location.href=e},replaceWindowState:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.title;window.history.replaceState(null,t,e)},submitForm:function(e){e.submit()},get windowHash(){return window.location.hash},get windowInnerHeight(){return window.innerHeight},get windowInnerWidth(){return window.innerWidth},get windowLocation(){return window.location},get windowNavigationBeacon(){return window.navigator.sendBeacon},get windowNavigationLanguage(){var e=window.navigator.language;return!e&&window.navigator.languages.length>0&&(e=window.navigator.languages[0]),e},get windowParentLocation(){return window.parent.location},get windowPerformance(){return window.performance}};function m(e){return t=e,r=f.JAVASCRIPT,n=new Blob([t],{type:r}),URL.createObjectURL(n);var t,r,n}!function(e){e.Final="FINAL",e.Estimated="ESTIMATED",e.Unknown="NOT_CURRENTLY_KNOWN"}(s||(s={})),function(e){e.INITIALIZE="INITIALIZE",e.PAYMENT_AUTHORIZATION="PAYMENT_AUTHORIZATION",e.SHIPPING_ADDRESS="SHIPPING_ADDRESS",e.SHIPPING_OPTION="SHIPPING_OPTION"}(a||(a={})),function(e){e.FULL="FULL",e.MIN="MIN"}(c||(c={})),function(e){e.CARD="CARD"}(u||(u={})),function(e){e.PAYMENT_GATEWAY="PAYMENT_GATEWAY"}(l||(l={})),function(e){e.SUCCESS="SUCCESS"}(d||(d={})),function(e){e.TEST="TEST",e.PRODUCTION="PRODUCTION"}(p||(p={})),function(e){e.development="development",e.sandbox="sandbox",e.production="production",e.staging="staging",e.test="test"}(h||(h={})),function(e){e.JAVASCRIPT="text/javascript",e.HTML="text/html"}(f||(f={}));var E=null!=="sandbox"?"sandbox":"development",y="".length>0?"-".concat(""):"",v={get AFTERPAY_SCRIPT_URL(){switch(E){case h.test:return m("window.AfterPay = {};");case h.production:return"https://portal.afterpay.com/afterpay.js?merchant_key=".concat(this.AFTERPAY_MERCHANT_ID);case h.sandbox:return"https://portal.sandbox.afterpay.com/afterpay.js?merchant_key=".concat(this.AFTERPAY_MERCHANT_ID);default:return"https://portal.stage.afterpay-beta.com/afterpay.js?merchant_key=".concat(this.AFTERPAY_MERCHANT_ID)}},get AFTERPAY_MESSAGING_SCRIPT_URL(){return E===h.test?m("window.Afterpay = {};"):"https://js.afterpay.com/afterpay-1.x.js"},get AFTERPAY_CREATE_CHECKOUT(){return"".concat(this.API_URL,"/bnpl/afterpay/create-checkout")},get AFTERPAY_MERCHANT_ID(){return"b8a38183b2e5959390488e48f9b109f6a73fd53c"},get AFTERPAY_STYLES(){return"".concat(this.ASSET_URL,"/afterpay.css")},get ANALYTICS_PUBLIC_ENDPOINT(){return E===h.test?m("window.Square.Analytics = {};"):"".concat(this.API_PROTOCOL,"js.").concat(this.API_PUBLIC_HOST,"/payments/data.js")},get API_HOST(){switch(E){case h.production:return"pci-connect.squareup.com";case h.sandbox:return"pci-connect.squareupsandbox.com";default:return"pci-connect.squareupstaging.com"}},get API_PROTOCOL(){return"https://"},get API_PUBLIC_HOST(){switch(E){case h.production:return"squareup.com";case h.sandbox:return"squareupsandbox.com";default:return"squareupstaging.com"}},get API_URL(){return"".concat(this.API_PROTOCOL).concat(this.API_HOST)},get APPENDED_FILE_NAME(){return y},get APPLEPAY_VALIDATE_MERCHANT_ENDPOINT(){return"".concat(this.API_URL,"/v2/apple-pay/validate-merchant")},get ASSET_BASE_URL(){return function(e){switch(e){case h.production:return"https://web.squarecdn.com";case h.sandbox:return"https://sandbox.web.squarecdn.com";case h.development:return"https://localhost:1779";default:return"https://staging.web.squarecdn.com"}}(h[E])},get ASSET_URL(){return"local"===this.VERSION?this.ASSET_BASE_URL:"".concat(this.ASSET_BASE_URL,"/").concat(this.VERSION)},get BANK_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/bank-nonce")},get CARD_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/card-nonce")},get CASH_APP_API(){return E===h.production?"https://api.cash.app":"https://api.cashstaging.app"},get CASH_APP_API_CUSTOMER(){return"".concat(this.CASH_APP_API,"/customer")},get CASH_APP_AUTH_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/cash-app/auth")},get CASH_APP_PAY_CLIENT_ID(){switch(E){case h.production:return"CA-CI_SQ_SELLER";case h.sandbox:return"CAS-CI_SQ_SELLER_SANDBOX";default:return"CAS-CI_SQ_SELLER_STAGING"}},get CASH_APP_STYLES(){return"".concat(this.ASSET_URL,"/cash.css")},get CASH_APP_PAY_SCRIPT_URL(){switch(E){case h.production:return"https://kit.cash.app/v1/pay.js";case h.test:return m("window.CashApp = {};");default:return"https://sandbox.kit.cash.app/v1/pay.js"}},get PLAID_OAUTH_REDIRECT_URI(){return""},get CREATE_OAUTH_PLAID_LINK_SESSION_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/plaid/oauth-link-session")},get ENABLE_ERROR_LOGGING(){return E!==h.development},get GET_PRODUCT_INFORMATION_ENDPOINT(){return"".concat(this.API_URL,"/v2/tokenization/product-information")},get GIFT_CARD_IFRAME(){return"".concat(this.ASSET_URL,"/gift-card-element-iframe").concat(y,".html")},get GOOGLE_PAY_ENV(){return E===h.production?p.PRODUCTION:p.TEST},get GOOGLE_PAY_GENERATE_TOKEN_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/google-pay/token")},get GOOGLE_PAY_MERCHANT_ID(){return"05498866192997955200"},get GOOGLE_PAY_SCRIPT_URL(){return E===h.test?m("window.google = {};"):"https://pay.google.com/gp/p/js/pay.js"},get HYDRATION_ENDPOINT(){return"".concat(this.API_URL,"/payments/hydrate")},get IFRAME_SRC(){return"".concat(this.ASSET_URL,"/main-iframe").concat(y,".html")},get INSTANT_WALLET_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/instant-wallet-nonce")},get MASTERPASS_CALLBACK_ENDPOINT(){return"".concat(this.API_URL,"/v2/masterpass/callback")},get MASTERPASS_LIBRARY_URL(){return"".concat(this.API_URL,"/v2/masterpass/frame")},get METRICS_ERROR_URL(){return"".concat(this.API_URL,"/payments/mtx/error")},get METRICS_URL(){return"".concat(this.API_URL,"/payments/mtx")},get METRICS_V2_URL(){return"".concat(this.API_URL,"/payments/mtx/v2")},get PAYMENTS_UI_STYLES(){return E===h.test?m(""):"".concat(this.ASSET_URL,"/payments-ui.css")},get PLAID_LINK_ENV(){return E===h.production?"production":"sandbox"},get PLAID_LINK_SCRIPT_URL(){return E===h.test?m("window.Plaid = {};"):"https://cdn.plaid.com/link/v2/stable/link-initialize.js"},get SENTRY_DSN(){switch(E){case h.test:case h.development:return"https://acacaeaccacacacabcaacdacdacadaca@sentry.io/000001";default:return"https://565ee38bb5ff45dabc25ab6d7b8bebe3@o160250.ingest.sentry.io/3478832"}},get SINGLE_CARD_IFRAME(){return"".concat(this.ASSET_URL,"/single-card-element-iframe").concat(y,".html")},get SINGLE_CARD_WRAPPER_STYLES(){return"".concat(this.ASSET_URL,"/card-wrapper.css")},STATIC_ASSET(e){return"".concat(this.ASSET_URL,"/static-assets/").concat(e)},get VERSION(){return"1.48.0"},get WALLET_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/wallet-nonce")},env:E},_=v;r(9714),r(9720);const A=Object.prototype.toString;function S(e){switch(A.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return D(e,Error)}}function I(e,t){return A.call(e)===`[object ${t}]`}function C(e){return I(e,"ErrorEvent")}function O(e){return I(e,"DOMError")}function T(e){return I(e,"String")}function P(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function R(e){return I(e,"Object")}function w(e){return"undefined"!=typeof Event&&D(e,Event)}function b(e){return I(e,"RegExp")}function N(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function D(e,t){try{return e instanceof t}catch(e){return!1}}var L=r(1235);const x=(0,L.Rf)();function U(e,t={}){try{let r=e;const n=5,i=[];let o=0,s=0;const a=" > ",c=a.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||80;for(;r&&o++<n&&(u=k(r,l),!("html"===u||o>1&&s+i.length*c+u.length>=d));)i.push(u),s+=u.length,r=r.parentNode;return i.reverse().join(a)}catch(e){return"<unknown>"}}function k(e,t){const r=e,n=[];let i,o,s,a,c;if(!r||!r.tagName)return"";n.push(r.tagName.toLowerCase());const u=t&&t.length?t.filter((e=>r.getAttribute(e))).map((e=>[e,r.getAttribute(e)])):null;if(u&&u.length)u.forEach((e=>{n.push(`[${e[0]}="${e[1]}"]`)}));else if(r.id&&n.push(`#${r.id}`),i=r.className,i&&T(i))for(o=i.split(/\s+/),c=0;c<o.length;c++)n.push(`.${o[c]}`);const l=["aria-label","type","name","title","alt"];for(c=0;c<l.length;c++)s=l[c],a=r.getAttribute(s),a&&n.push(`[${s}="${a}"]`);return n.join("")}function M(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function H(e,t){if(!Array.isArray(e))return"";const r=[];for(let t=0;t<e.length;t++){const n=e[t];try{r.push(String(n))}catch(e){r.push("[value cannot be serialized]")}}return r.join(t)}function B(e,t=[],r=!1){return t.some((t=>function(e,t,r=!1){return!!T(e)&&(b(t)?t.test(e):!!T(t)&&(r?e===t:e.includes(t)))}(e,t,r)))}function G(e,t,r){if(!(t in e))return;const n=e[t],i=r(n);if("function"==typeof i)try{q(i,n)}catch(e){}e[t]=i}function j(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})}function q(e,t){const r=t.prototype||{};e.prototype=t.prototype=r,j(e,"__sentry_original__",t)}function F(e){return e.__sentry_original__}function V(e){if(S(e))return{message:e.message,name:e.name,stack:e.stack,...z(e)};if(w(e)){const t={type:e.type,target:Y(e.target),currentTarget:Y(e.currentTarget),...z(e)};return"undefined"!=typeof CustomEvent&&D(e,CustomEvent)&&(t.detail=e.detail),t}return e}function Y(e){try{return"undefined"!=typeof Element&&D(e,Element)?U(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function z(e){if("object"==typeof e&&null!==e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}return{}}function K(e,t=40){const r=Object.keys(V(e));if(r.sort(),!r.length)return"[object has no keys]";if(r[0].length>=t)return M(r[0],t);for(let e=r.length;e>0;e--){const n=r.slice(0,e).join(", ");if(!(n.length>t))return e===r.length?n:M(n,t)}return""}function W(e){return $(e,new Map)}function $(e,t){if(R(e)){const r=t.get(e);if(void 0!==r)return r;const n={};t.set(e,n);for(const r of Object.keys(e))void 0!==e[r]&&(n[r]=$(e[r],t));return n}if(Array.isArray(e)){const r=t.get(e);if(void 0!==r)return r;const n=[];return t.set(e,n),e.forEach((e=>{n.push($(e,t))})),n}return e}let Q;class Z{constructor(){Z.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=Z.id}setupOnce(){Q=Function.prototype.toString,Function.prototype.toString=function(...e){const t=F(this)||this;return Q.apply(t,e)}}}Z.__initStatic();const J=["debug","info","warn","error","log","assert","trace"];function X(e){if(!("console"in L.n2))return e();const t=L.n2.console,r={};J.forEach((e=>{const n=t[e]&&t[e].__sentry_original__;e in t&&n&&(r[e]=t[e],t[e]=n)}));try{return e()}finally{Object.keys(r).forEach((e=>{t[e]=r[e]}))}}function ee(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1}};return"undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?J.forEach((r=>{t[r]=(...t)=>{e&&X((()=>{L.n2.console[r](`Sentry Logger [${r}]:`,...t)}))}})):J.forEach((e=>{t[e]=()=>{}})),t}let te;function re(){const e=L.n2,t=e.crypto||e.msCrypto;if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");const r=t&&t.getRandomValues?()=>t.getRandomValues(new Uint8Array(1))[0]:()=>16*Math.random();return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&r())>>e/4).toString(16)))}function ne(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function ie(e){const{message:t,event_id:r}=e;if(t)return t;const n=ne(e);return n?n.type&&n.value?`${n.type}: ${n.value}`:n.type||n.value||r||"<unknown>":r||"<unknown>"}function oe(e,t,r){const n=e.exception=e.exception||{},i=n.values=n.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type=r||"Error")}function se(e,t){const r=ne(e);if(!r)return;const n=r.mechanism;if(r.mechanism={type:"generic",handled:!0,...n,...t},t&&"data"in t){const e={...n&&n.data,...t.data};r.mechanism.data=e}}function ae(e){if(e&&e.__sentry_captured__)return!0;try{j(e,"__sentry_captured__",!0)}catch(e){}return!1}function ce(e){return Array.isArray(e)?e:[e]}te="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?(0,L.YO)("logger",ee):ee();const ue=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/];class le{static __initStatic(){this.id="InboundFilters"}__init(){this.name=le.id}constructor(e={}){this._options=e,le.prototype.__init.call(this)}setupOnce(e,t){const r=e=>{const r=t();if(r){const t=r.getIntegration(le);if(t){const n=r.getClient(),i=n?n.getOptions():{},o=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...ue],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(t._options,i);return function(e,t){return t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${ie(e)}`),!0):function(e,t){return!(e.type||!t||!t.length)&&function(e){if(e.message)return[e.message];if(e.exception)try{const{type:t="",value:r=""}=e.exception.values&&e.exception.values[0]||{};return[`${r}`,`${t}: ${r}`]}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.error(`Cannot extract message for event ${ie(e)}`),[]}return[]}(e).some((e=>B(e,t)))}(e,t.ignoreErrors)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${ie(e)}`),!0):function(e,t){if(!t||!t.length)return!1;const r=de(e);return!!r&&B(r,t)}(e,t.denyUrls)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${ie(e)}.\nUrl: ${de(e)}`),!0):!function(e,t){if(!t||!t.length)return!0;const r=de(e);return!r||B(r,t)}(e,t.allowUrls)&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${ie(e)}.\nUrl: ${de(e)}`),!0)}(e,o)?null:e}}return e};r.id=this.name,e(r)}}function de(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const r=e[t];if(r&&"<anonymous>"!==r.filename&&"[native code]"!==r.filename)return r.filename||null}return null}(t):null}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.error(`Cannot extract url for event ${ie(e)}`),null}}le.__initStatic();var pe=r(1170),he=r(1422);const fe="production";var ge;function me(e){return new ye((t=>{t(e)}))}function Ee(e){return new ye(((t,r)=>{r(e)}))}!function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(ge||(ge={}));class ye{__init(){this._state=ge.PENDING}__init2(){this._handlers=[]}constructor(e){ye.prototype.__init.call(this),ye.prototype.__init2.call(this),ye.prototype.__init3.call(this),ye.prototype.__init4.call(this),ye.prototype.__init5.call(this),ye.prototype.__init6.call(this);try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new ye(((r,n)=>{this._handlers.push([!1,t=>{if(e)try{r(e(t))}catch(e){n(e)}else r(t)},e=>{if(t)try{r(t(e))}catch(e){n(e)}else n(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new ye(((t,r)=>{let n,i;return this.then((t=>{i=!1,n=t,e&&e()}),(t=>{i=!0,n=t,e&&e()})).then((()=>{i?r(n):t(n)}))}))}__init3(){this._resolve=e=>{this._setResult(ge.RESOLVED,e)}}__init4(){this._reject=e=>{this._setResult(ge.REJECTED,e)}}__init5(){this._setResult=(e,t)=>{this._state===ge.PENDING&&(N(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init6(){this._executeHandlers=()=>{if(this._state===ge.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===ge.RESOLVED&&e[1](this._value),this._state===ge.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function ve(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||(0,pe.ph)(),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:re()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}class _e{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}static clone(e){const t=new _e;return e&&(t._breadcrumbs=[...e._breadcrumbs],t._tags={...e._tags},t._extra={...e._extra},t._contexts={...e._contexts},t._user=e._user,t._level=e._level,t._span=e._span,t._session=e._session,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=[...e._eventProcessors],t._requestSession=e._requestSession,t._attachments=[...e._attachments],t._sdkProcessingMetadata={...e._sdkProcessingMetadata}),t}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&ve(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if("function"==typeof e){const t=e(this);return t instanceof _e?t:this}return e instanceof _e?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):R(e)&&(e=e,this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}addBreadcrumb(e,t){const r="number"==typeof t?t:100;if(r<=0)return this;const n={timestamp:(0,pe.yW)(),...e};return this._breadcrumbs=[...this._breadcrumbs,n].slice(-r),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,t={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};const t=this._span.transaction&&this._span.transaction.name;t&&(e.tags={transaction:t,...e.tags})}return this._applyFingerprint(e),e.breadcrumbs=[...e.breadcrumbs||[],...this._breadcrumbs],e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata},this._notifyEventProcessors([...Ae(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}_notifyEventProcessors(e,t,r,n=0){return new ye(((i,o)=>{const s=e[n];if(null===t||"function"!=typeof s)i(t);else{const a=s({...t},r);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.id&&null===a&&te.log(`Event processor "${s.id}" dropped event`),N(a)?a.then((t=>this._notifyEventProcessors(e,t,r,n+1).then(i))).then(null,o):this._notifyEventProcessors(e,a,r,n+1).then(i).then(null,o)}}))}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}_applyFingerprint(e){e.fingerprint=e.fingerprint?ce(e.fingerprint):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function Ae(){return(0,L.YO)("globalEventProcessors",(()=>[]))}function Se(e){Ae().push(e)}const Ie=100;class Ce{constructor(e,t=new _e,r=4){this._version=r,this._stack=[{scope:t}],e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=_e.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1||!this.getStack().pop())}withScope(e){const t=this.pushScope();try{e(t)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const r=this._lastEventId=t&&t.event_id?t.event_id:re(),n=new Error("Sentry syntheticException");return this._withClient(((i,o)=>{i.captureException(e,{originalException:e,syntheticException:n,...t,event_id:r},o)})),r}captureMessage(e,t,r){const n=this._lastEventId=r&&r.event_id?r.event_id:re(),i=new Error(e);return this._withClient(((o,s)=>{o.captureMessage(e,t,{originalException:e,syntheticException:i,...r,event_id:n},s)})),n}captureEvent(e,t){const r=t&&t.event_id?t.event_id:re();return e.type||(this._lastEventId=r),this._withClient(((n,i)=>{n.captureEvent(e,{...t,event_id:r},i)})),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:r,client:n}=this.getStackTop();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=Ie}=n.getOptions&&n.getOptions()||{};if(o<=0)return;const s={timestamp:(0,pe.yW)(),...e},a=i?X((()=>i(s,t))):s;null!==a&&(n.emit&&n.emit("beforeAddBreadcrumb",a,t),r.addBreadcrumb(a,o))}setUser(e){this.getScope().setUser(e)}setTags(e){this.getScope().setTags(e)}setExtras(e){this.getScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t)}configureScope(e){const{scope:t,client:r}=this.getStackTop();r&&e(t)}run(e){const t=Te(this);try{e(this)}finally{Te(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){return this._callExtensionMethod("startTransaction",e,t)}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&function(e,t){let r={};"ok"===e.status&&(r={status:"exited"}),ve(e,r)}(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:r}=this.getStackTop(),{release:n,environment:i=fe}=r&&r.getOptions()||{},{userAgent:o}=L.n2.navigator||{},s=function(e){const t=(0,pe.ph)(),r={sid:re(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return W({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(r)};return e&&ve(r,e),r}({release:n,environment:i,user:t.getUser(),...o&&{userAgent:o},...e}),a=t.getSession&&t.getSession();return a&&"ok"===a.status&&ve(a,{status:"exited"}),this.endSession(),t.setSession(s),s}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop();if(!e)return;const r=e.getSession();r&&t&&t.captureSession&&t.captureSession(r)}_withClient(e){const{scope:t,client:r}=this.getStackTop();r&&e(r,t)}_callExtensionMethod(e,...t){const r=Oe().__SENTRY__;if(r&&r.extensions&&"function"==typeof r.extensions[e])return r.extensions[e].apply(this,t);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function Oe(){return L.n2.__SENTRY__=L.n2.__SENTRY__||{extensions:{},hub:void 0},L.n2}function Te(e){const t=Oe(),r=we(t);return be(t,e),r}function Pe(){const e=Oe();return Re(e)&&!we(e).isOlderThan(4)||be(e,new Ce),(0,he.KV)()?function(e){try{const t=Oe().__SENTRY__,r=t&&t.extensions&&t.extensions.domain&&t.extensions.domain.active;if(!r)return we(e);if(!Re(r)||we(r).isOlderThan(4)){const t=we(e).getStackTop();be(r,new Ce(t.client,_e.clone(t.scope)))}return we(r)}catch(t){return we(e)}}(e):we(e)}function Re(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function we(e){return(0,L.YO)("hub",(()=>new Ce),e)}function be(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}function Ne(e,t){return Pe().captureException(e,{captureContext:t})}function De(e){Pe().withScope(e)}const Le=L.n2;let xe=0;function Ue(){return xe>0}function ke(){xe++,setTimeout((()=>{xe--}))}function Me(e,t={},r){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return t;if(F(e))return e}catch(t){return e}const n=function(){const n=Array.prototype.slice.call(arguments);try{r&&"function"==typeof r&&r.apply(this,arguments);const i=n.map((e=>Me(e,t)));return e.apply(this,i)}catch(e){throw ke(),De((r=>{r.addEventProcessor((e=>(t.mechanism&&(oe(e,void 0,void 0),se(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),Ne(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}catch(e){}q(n,e),j(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>e.name})}catch(e){}return n}const He=/\(error: (.*)\)/;const Be="<anonymous>";function Ge(e){try{return e&&"function"==typeof e&&e.name||Be}catch(e){return Be}}const je=(0,L.Rf)();function qe(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}const Fe=(0,L.Rf)(),Ve={},Ye={};function ze(e){if(!Ye[e])switch(Ye[e]=!0,e){case"console":"console"in Fe&&J.forEach((function(e){e in Fe.console&&G(Fe.console,e,(function(t){return function(...r){We("console",{args:r,level:e}),t&&t.apply(Fe.console,r)}}))}));break;case"dom":!function(){if(!("document"in Fe))return;const e=We.bind(null,"dom"),t=et(e,!0);Fe.document.addEventListener("click",t,!1),Fe.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const r=Fe[t]&&Fe[t].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(G(r,"addEventListener",(function(t){return function(r,n,i){if("click"===r||"keypress"==r)try{const n=this,o=n.__sentry_instrumentation_handlers__=n.__sentry_instrumentation_handlers__||{},s=o[r]=o[r]||{refCount:0};if(!s.handler){const n=et(e);s.handler=n,t.call(this,r,n,i)}s.refCount++}catch(e){}return t.call(this,r,n,i)}})),G(r,"removeEventListener",(function(e){return function(t,r,n){if("click"===t||"keypress"==t)try{const r=this,i=r.__sentry_instrumentation_handlers__||{},o=i[t];o&&(o.refCount--,o.refCount<=0&&(e.call(this,t,o.handler,n),o.handler=void 0,delete i[t]),0===Object.keys(i).length&&delete r.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,r,n)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in Fe))return;const e=XMLHttpRequest.prototype;G(e,"open",(function(e){return function(...t){const r=t[1],n=this.__sentry_xhr__={method:T(t[0])?t[0].toUpperCase():t[0],url:t[1]};T(r)&&"POST"===n.method&&r.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const i=()=>{const e=this.__sentry_xhr__;if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}We("xhr",{args:t,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?G(this,"onreadystatechange",(function(e){return function(...t){return i(),e.apply(this,t)}})):this.addEventListener("readystatechange",i),e.apply(this,t)}})),G(e,"send",(function(e){return function(...t){return this.__sentry_xhr__&&void 0!==t[0]&&(this.__sentry_xhr__.body=t[0]),We("xhr",{args:t,startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}();break;case"fetch":(function(){if(!function(){if(!("fetch"in je))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}())return!1;if(qe(je.fetch))return!0;let e=!1;const t=je.document;if(t&&"function"==typeof t.createElement)try{const r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(e=qe(r.contentWindow.fetch)),t.head.removeChild(r)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e})()&&G(Fe,"fetch",(function(e){return function(...t){const r={args:t,fetchData:{method:$e(t),url:Qe(t)},startTimestamp:Date.now()};return We("fetch",{...r}),e.apply(Fe,t).then((e=>(We("fetch",{...r,endTimestamp:Date.now(),response:e}),e)),(e=>{throw We("fetch",{...r,endTimestamp:Date.now(),error:e}),e}))}}));break;case"history":!function(){if(!function(){const e=je.chrome,t=e&&e.app&&e.app.runtime,r="history"in je&&!!je.history.pushState&&!!je.history.replaceState;return!t&&r}())return;const e=Fe.onpopstate;function t(e){return function(...t){const r=t.length>2?t[2]:void 0;if(r){const e=Ze,t=String(r);Ze=t,We("history",{from:e,to:t})}return e.apply(this,t)}}Fe.onpopstate=function(...t){const r=Fe.location.href,n=Ze;if(Ze=r,We("history",{from:n,to:r}),e)try{return e.apply(this,t)}catch(e){}},G(Fe.history,"pushState",t),G(Fe.history,"replaceState",t)}();break;case"error":tt=Fe.onerror,Fe.onerror=function(e,t,r,n,i){return We("error",{column:n,error:i,line:r,msg:e,url:t}),!!tt&&tt.apply(this,arguments)};break;case"unhandledrejection":rt=Fe.onunhandledrejection,Fe.onunhandledrejection=function(e){return We("unhandledrejection",e),!rt||rt.apply(this,arguments)};break;default:return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.warn("unknown instrumentation type:",e))}}function Ke(e,t){Ve[e]=Ve[e]||[],Ve[e].push(t),ze(e)}function We(e,t){if(e&&Ve[e])for(const r of Ve[e]||[])try{r(t)}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Ge(r)}\nError:`,t)}}function $e(e=[]){return"Request"in Fe&&D(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function Qe(e=[]){return"string"==typeof e[0]?e[0]:"Request"in Fe&&D(e[0],Request)?e[0].url:String(e[0])}let Ze,Je,Xe;function et(e,t=!1){return r=>{if(!r||Xe===r)return;if(function(e){if("keypress"!==e.type)return!1;try{const t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(e){}return!0}(r))return;const n="keypress"===r.type?"input":r.type;(void 0===Je||function(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(e){}return!1}(Xe,r))&&(e({event:r,name:n,global:t}),Xe=r),clearTimeout(Je),Je=Fe.setTimeout((()=>{Je=void 0}),1e3)}}let tt=null,rt=null;function nt(e,t=1/0,r=1/0){try{return ot("",e,t,r)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function it(e,t=3,r=102400){const n=nt(e,t);return i=n,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(i))>r?it(e,t-1,r):n;var i}function ot(e,t,n=1/0,i=1/0,o=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(r){if(e)return!!t.has(r)||(t.add(r),!1);for(let e=0;e<t.length;e++)if(t[e]===r)return!0;return t.push(r),!1},function(r){if(e)t.delete(r);else for(let e=0;e<t.length;e++)if(t[e]===r){t.splice(e,1);break}}]}()){const[s,a]=o;if(null===t||["number","boolean","string"].includes(typeof t)&&("number"!=typeof(c=t)||c==c))return t;var c;const u=function(e,t){try{return"domain"===e&&t&&"object"==typeof t&&t._events?"[Domain]":"domainEmitter"===e?"[DomainEmitter]":void 0!==r.g&&t===r.g?"[Global]":"undefined"!=typeof window&&t===window?"[Window]":"undefined"!=typeof document&&t===document?"[Document]":function(e){return R(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t)?"[SyntheticEvent]":"number"==typeof t&&t!=t?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?`[Function: ${Ge(t)}]`:"symbol"==typeof t?`[${String(t)}]`:"bigint"==typeof t?`[BigInt: ${String(t)}]`:`[object ${function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t)}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!u.startsWith("[object "))return u;if(t.__sentry_skip_normalization__)return t;let l=n;if("number"==typeof t.__sentry_override_normalization_depth__&&(l=t.__sentry_override_normalization_depth__),0===l)return u.replace("object ","");if(s(t))return"[Circular ~]";const d=t;if(d&&"function"==typeof d.toJSON)try{return ot("",d.toJSON(),l-1,i,o)}catch(e){}const p=Array.isArray(t)?[]:{};let h=0;const f=V(t);for(const e in f){if(!Object.prototype.hasOwnProperty.call(f,e))continue;if(h>=i){p[e]="[MaxProperties ~]";break}const t=f[e];p[e]=ot(e,t,l-1,i,o),h++}return a(t),p}function st(e,t){const r=ct(e,t),n={type:t&&t.name,value:lt(t)};return r.length&&(n.stacktrace={frames:r}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function at(e,t){return{exception:{values:[st(e,t)]}}}function ct(e,t){const r=t.stacktrace||t.stack||"",n=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(ut.test(e.message))return 1}return 0}(t);try{return e(r,n)}catch(e){}return[]}const ut=/Minified React error #\d+;/i;function lt(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function dt(e,t,r,n,i){let o;if(C(t)&&t.error)return at(e,t.error);if(O(t)||I(t,"DOMException")){const i=t;if("stack"in t)o=at(e,t);else{const t=i.name||(O(i)?"DOMError":"DOMException"),s=i.message?`${t}: ${i.message}`:t;o=pt(e,s,r,n),oe(o,s)}return"code"in i&&(o.tags={...o.tags,"DOMException.code":`${i.code}`}),o}return S(t)?at(e,t):R(t)||w(t)?(o=function(e,t,r,n){const i=Pe().getClient(),o=i&&i.getOptions().normalizeDepth,s={exception:{values:[{type:w(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:`Non-Error ${n?"promise rejection":"exception"} captured with keys: ${K(t)}`}]},extra:{__serialized__:it(t,o)}};if(r){const t=ct(e,r);t.length&&(s.exception.values[0].stacktrace={frames:t})}return s}(e,t,r,i),se(o,{synthetic:!0}),o):(o=pt(e,t,r,n),oe(o,`${t}`,void 0),se(o,{synthetic:!0}),o)}function pt(e,t,r,n){const i={message:t};if(n&&r){const n=ct(e,r);n.length&&(i.exception={values:[{value:t,stacktrace:{frames:n}}]})}return i}class ht{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=ht.id}__init2(){this._installFunc={onerror:ft,onunhandledrejection:gt}}constructor(e){ht.prototype.__init.call(this),ht.prototype.__init2.call(this),this._options={onerror:!0,onunhandledrejection:!0,...e}}setupOnce(){Error.stackTraceLimit=50;const e=this._options;for(const r in e){const n=this._installFunc[r];n&&e[r]&&(t=r,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.log(`Global Handler attached: ${t}`),n(),this._installFunc[r]=void 0)}var t}}function ft(){Ke("error",(e=>{const[t,r,n]=yt();if(!t.getIntegration(ht))return;const{msg:i,url:o,line:s,column:a,error:c}=e;if(Ue()||c&&c.__sentry_own_request__)return;const u=void 0===c&&T(i)?function(e,t,r,n){let i=C(e)?e.message:e,o="Error";const s=i.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);return s&&(o=s[1],i=s[2]),mt({exception:{values:[{type:o,value:i}]}},t,r,n)}(i,o,s,a):mt(dt(r,c||i,void 0,n,!1),o,s,a);u.level="error",Et(t,c,u,"onerror")}))}function gt(){Ke("unhandledrejection",(e=>{const[t,r,n]=yt();if(!t.getIntegration(ht))return;let i=e;try{"reason"in e?i=e.reason:"detail"in e&&"reason"in e.detail&&(i=e.detail.reason)}catch(e){}if(Ue()||i&&i.__sentry_own_request__)return!0;const o=P(i)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}:dt(r,i,void 0,n,!0);o.level="error",Et(t,i,o,"onunhandledrejection")}))}function mt(e,t,r,n){const i=e.exception=e.exception||{},o=i.values=i.values||[],s=o[0]=o[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(n,10))?void 0:n,l=isNaN(parseInt(r,10))?void 0:r,d=T(t)&&t.length>0?t:function(){try{return x.document.location.href}catch(e){return""}}();return 0===c.length&&c.push({colno:u,filename:d,function:"?",in_app:!0,lineno:l}),e}function Et(e,t,r,n){se(r,{handled:!1,type:n}),e.captureEvent(r,{originalException:t})}function yt(){const e=Pe(),t=e.getClient(),r=t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[e,r.stackParser,r.attachStacktrace]}ht.__initStatic();const vt=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class _t{static __initStatic(){this.id="TryCatch"}__init(){this.name=_t.id}constructor(e){_t.prototype.__init.call(this),this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){this._options.setTimeout&&G(Le,"setTimeout",At),this._options.setInterval&&G(Le,"setInterval",At),this._options.requestAnimationFrame&&G(Le,"requestAnimationFrame",St),this._options.XMLHttpRequest&&"XMLHttpRequest"in Le&&G(XMLHttpRequest.prototype,"send",It);const e=this._options.eventTarget;e&&(Array.isArray(e)?e:vt).forEach(Ct)}}function At(e){return function(...t){const r=t[0];return t[0]=Me(r,{mechanism:{data:{function:Ge(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}}function St(e){return function(t){return e.apply(this,[Me(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Ge(e)},handled:!0,type:"instrument"}})])}}function It(e){return function(...t){const r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in r&&"function"==typeof r[e]&&G(r,e,(function(t){const r={mechanism:{data:{function:e,handler:Ge(t)},handled:!0,type:"instrument"}},n=F(t);return n&&(r.mechanism.data.handler=Ge(n)),Me(t,r)}))})),e.apply(this,t)}}function Ct(e){const t=Le,r=t[e]&&t[e].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(G(r,"addEventListener",(function(t){return function(r,n,i){try{"function"==typeof n.handleEvent&&(n.handleEvent=Me(n.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Ge(n),target:e},handled:!0,type:"instrument"}}))}catch(e){}return t.apply(this,[r,Me(n,{mechanism:{data:{function:"addEventListener",handler:Ge(n),target:e},handled:!0,type:"instrument"}}),i])}})),G(r,"removeEventListener",(function(e){return function(t,r,n){const i=r;try{const r=i&&i.__sentry_wrapped__;r&&e.call(this,t,r,n)}catch(e){}return e.call(this,t,i,n)}})))}_t.__initStatic();const Ot=["fatal","error","warning","log","info","debug"];function Tt(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const r=t[6]||"",n=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+r+n}}function Pt(e){return e.split(/\\?\//).filter((e=>e.length>0&&","!==e)).length}const Rt="Breadcrumbs";class wt{static __initStatic(){this.id=Rt}__init(){this.name=wt.id}constructor(e){wt.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){var e;this.options.console&&Ke("console",bt),this.options.dom&&Ke("dom",(e=this.options.dom,function(t){let r,n="object"==typeof e?e.serializeAttribute:void 0,i="object"==typeof e&&"number"==typeof e.maxStringLength?e.maxStringLength:void 0;i&&i>1024&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${i} was configured. Sentry will use 1024 instead.`),i=1024),"string"==typeof n&&(n=[n]);try{const e=t.event;r=function(e){return e&&!!e.target}(e)?U(e.target,{keyAttrs:n,maxStringLength:i}):U(e,{keyAttrs:n,maxStringLength:i})}catch(e){r="<unknown>"}0!==r.length&&Pe().addBreadcrumb({category:`ui.${t.name}`,message:r},{event:t.event,name:t.name,global:t.global})})),this.options.xhr&&Ke("xhr",Nt),this.options.fetch&&Ke("fetch",Dt),this.options.history&&Ke("history",Lt)}addSentryBreadcrumb(e){this.options.sentry&&Pe().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:ie(e)},{event:e})}}function bt(e){for(let t=0;t<e.args.length;t++)if("ref=Ref<"===e.args[t]){e.args[t+1]="viewRef";break}const t={category:"console",data:{arguments:e.args,logger:"console"},level:(r=e.level,"warn"===r?"warning":Ot.includes(r)?r:"log"),message:H(e.args," ")};var r;if("assert"===e.level){if(!1!==e.args[0])return;t.message=`Assertion failed: ${H(e.args.slice(1)," ")||"console.assert"}`,t.data.arguments=e.args.slice(1)}Pe().addBreadcrumb(t,{input:e.args,level:e.level})}function Nt(e){const{startTimestamp:t,endTimestamp:r}=e;if(!t||!r||!e.xhr.__sentry_xhr__)return;const{method:n,url:i,status_code:o,body:s}=e.xhr.__sentry_xhr__,a={method:n,url:i,status_code:o},c={xhr:e.xhr,input:s,startTimestamp:t,endTimestamp:r};Pe().addBreadcrumb({category:"xhr",data:a,type:"http"},c)}function Dt(e){const{startTimestamp:t,endTimestamp:r}=e;if(r&&(!e.fetchData.url.match(/sentry_key/)||"POST"!==e.fetchData.method))if(e.error){const n=e.fetchData,i={data:e.error,input:e.args,startTimestamp:t,endTimestamp:r};Pe().addBreadcrumb({category:"fetch",data:n,level:"error",type:"http"},i)}else{const n={...e.fetchData,status_code:e.response&&e.response.status},i={input:e.args,response:e.response,startTimestamp:t,endTimestamp:r};Pe().addBreadcrumb({category:"fetch",data:n,type:"http"},i)}}function Lt(e){let t=e.from,r=e.to;const n=Tt(Le.location.href);let i=Tt(t);const o=Tt(r);i.path||(i=n),n.protocol===o.protocol&&n.host===o.host&&(r=o.relative),n.protocol===i.protocol&&n.host===i.host&&(t=i.relative),Pe().addBreadcrumb({category:"navigation",data:{from:t,to:r}})}wt.__initStatic();class xt{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=xt.id}constructor(e={}){xt.prototype.__init.call(this),this._key=e.key||"cause",this._limit=e.limit||5}setupOnce(){const e=Pe().getClient();e&&Se(((t,r)=>{const n=Pe().getIntegration(xt);return n?function(e,t,r,n,i){if(!(n.exception&&n.exception.values&&i&&D(i.originalException,Error)))return n;const o=Ut(e,r,i.originalException,t);return n.exception.values=[...o,...n.exception.values],n}(e.getOptions().stackParser,n._key,n._limit,t,r):t}))}}function Ut(e,t,r,n,i=[]){if(!D(r[n],Error)||i.length+1>=t)return i;const o=st(e,r[n]);return Ut(e,t,r[n],n,[o,...i])}xt.__initStatic();class kt{constructor(){kt.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=kt.id}setupOnce(){Se((e=>{if(Pe().getIntegration(kt)){if(!Le.navigator&&!Le.location&&!Le.document)return e;const t=e.request&&e.request.url||Le.location&&Le.location.href,{referrer:r}=Le.document||{},{userAgent:n}=Le.navigator||{},i={...e.request&&e.request.headers,...r&&{Referer:r},...n&&{"User-Agent":n}},o={...e.request,...t&&{url:t},headers:i};return{...e,request:o}}return e}))}}kt.__initStatic();class Mt{constructor(){Mt.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=Mt.id}setupOnce(e,t){const r=e=>{if(e.type)return e;const r=t().getIntegration(Mt);if(r){try{if(function(e,t){return!!t&&(!!function(e,t){const r=e.message,n=t.message;return!(!r&&!n)&&(!(r&&!n||!r&&n)&&(r===n&&(!!Bt(e,t)&&!!Ht(e,t))))}(e,t)||!!function(e,t){const r=Gt(t),n=Gt(e);return!(!r||!n)&&(r.type===n.type&&r.value===n.value&&(!!Bt(e,t)&&!!Ht(e,t)))}(e,t))}(e,r._previousEvent))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(t){return r._previousEvent=e}return r._previousEvent=e}return e};r.id=this.name,e(r)}}function Ht(e,t){let r=jt(e),n=jt(t);if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;if(r=r,n=n,n.length!==r.length)return!1;for(let e=0;e<n.length;e++){const t=n[e],i=r[e];if(t.filename!==i.filename||t.lineno!==i.lineno||t.colno!==i.colno||t.function!==i.function)return!1}return!0}function Bt(e,t){let r=e.fingerprint,n=t.fingerprint;if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;r=r,n=n;try{return!(r.join("")!==n.join(""))}catch(e){return!1}}function Gt(e){return e.exception&&e.exception.values&&e.exception.values[0]}function jt(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}function qt(e){let t,r=e[0],n=1;for(;n<e.length;){const i=e[n],o=e[n+1];if(n+=2,("optionalAccess"===i||"optionalCall"===i)&&null==r)return;"access"===i||"optionalAccess"===i?(t=r,r=o(r)):"call"!==i&&"optionalCall"!==i||(r=o(((...e)=>r.call(t,...e))),t=void 0)}return r}function Ft(e){const t=qt([e,"call",e=>e(),"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]);return"sentry"!==(qt([t,"optionalAccess",e=>e.instrumenter])||"sentry")}Mt.__initStatic();class Vt{static __initStatic(){this.id="Express"}__init(){this.name=Vt.id}constructor(e={}){Vt.prototype.__init.call(this),this._router=e.router||e.app,this._methods=(Array.isArray(e.methods)?e.methods:[]).concat("use")}setupOnce(e,t){this._router?Ft(t)?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.log("Express Integration is skipped because of instrumenter configuration."):(function(e,t=[]){t.forEach((t=>function(e,t){const r=e[t];return e[t]=function(...e){return r.call(this,...function(e,t){return e.map((e=>"function"==typeof e?Yt(e,t):Array.isArray(e)?e.map((e=>"function"==typeof e?Yt(e,t):e)):e))}(e,t))},e}(e,t)))}(this._router,this._methods),function(e){const t="settings"in e;t&&void 0===e._router&&e.lazyrouter&&e.lazyrouter();const r=t?e._router:e;if(!r)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.debug("Routing instrumentation is currently only supported in Express 4."));const n=Object.getPrototypeOf(r),i=n.process_params;n.process_params=function(e,t,r,n,o){r._reconstructedRoute||(r._reconstructedRoute="");const{layerRoutePath:s,isRegex:a,isArray:c,numExtraSegments:u}=function(e){const t=qt([e,"access",e=>e.route,"optionalAccess",e=>e.path]),r=b(t),n=Array.isArray(t);if(!t)return{isRegex:r,isArray:n,numExtraSegments:0};const i=n?Math.max(t.reduce(((e,t)=>e+Pt(t.toString())),0)-Pt(e.path||""),0):0;return{layerRoutePath:zt(n,t),isRegex:r,isArray:n,numExtraSegments:i}}(e);(s||a||c)&&(r._hasParameters=!0);const l=(s||e.path||"").split("/").filter((e=>e.length>0&&(a||c||!e.includes("*")))).join("/");if(l&&l.length>0&&(r._reconstructedRoute+=`/${l}${a?"/":""}`),Pt(r.originalUrl||"")+u===Pt(r._reconstructedRoute)){r._hasParameters||r._reconstructedRoute!==r.originalUrl&&(r._reconstructedRoute=r.originalUrl);const e=n.__sentry_transaction;if(e&&"custom"!==e.metadata.source){const t=r._reconstructedRoute||"/";e.setName(...function(e,t={}){const r=e.method&&e.method.toUpperCase();let n="",i="url";t.customRoute||e.route?(n=t.customRoute||`${e.baseUrl||""}${e.route&&e.route.path}`,i="route"):(e.originalUrl||e.url)&&(n=(e.originalUrl||e.url||"").split(/[\?#]/,1)[0]);let o="";return t.method&&r&&(o+=r),t.method&&t.path&&(o+=" "),t.path&&n&&(o+=n),[o,i]}(r,{path:!0,method:!0,customRoute:t}))}}return i.call(this,e,t,r,n,o)}}(this._router)):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.error("ExpressIntegration is missing an Express instance")}}function Yt(e,t){const r=e.length;switch(r){case 2:return function(r,n){const i=n.__sentry_transaction;if(i){const r=i.startChild({description:e.name,op:`middleware.express.${t}`});n.once("finish",(()=>{r.finish()}))}return e.call(this,r,n)};case 3:return function(r,n,i){const o=qt([n.__sentry_transaction,"optionalAccess",e=>e.startChild,"call",r=>r({description:e.name,op:`middleware.express.${t}`})]);e.call(this,r,n,(function(...e){qt([o,"optionalAccess",e=>e.finish,"call",e=>e()]),i.call(this,...e)}))};case 4:return function(r,n,i,o){const s=qt([i.__sentry_transaction,"optionalAccess",e=>e.startChild,"call",r=>r({description:e.name,op:`middleware.express.${t}`})]);e.call(this,r,n,i,(function(...e){qt([s,"optionalAccess",e=>e.finish,"call",e=>e()]),o.call(this,...e)}))};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${r}`)}}function zt(e,t){return e?t.map((e=>e.toString())).join(","):t&&t.toString()}Vt.__initStatic();class Kt{static __initStatic(){this.id="Postgres"}__init(){this.name=Kt.id}constructor(e={}){Kt.prototype.__init.call(this),this._usePgNative=!!e.usePgNative}setupOnce(e,t){if(Ft(t))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.log("Postgres Integration is skipped because of instrumenter configuration."));const r=(0,he.$y)("pg");if(!r)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.error("Postgres Integration was unable to require `pg` package."));if(this._usePgNative&&!qt([r,"access",e=>e.native,"optionalAccess",e=>e.Client]))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.error("Postgres Integration was unable to access 'pg-native' bindings."));const{Client:n}=this._usePgNative?r.native:r;G(n.prototype,"query",(function(e){return function(r,n,i){const o=qt([t().getScope(),"optionalAccess",e=>e.getSpan,"call",e=>e()]),s=qt([o,"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"==typeof r?r:r.text,op:"db"})]);if("function"==typeof i)return e.call(this,r,n,(function(e,t){qt([s,"optionalAccess",e=>e.finish,"call",e=>e()]),i(e,t)}));if("function"==typeof n)return e.call(this,r,(function(e,t){qt([s,"optionalAccess",e=>e.finish,"call",e=>e()]),n(e,t)}));const a=void 0!==n?e.call(this,r,n):e.call(this,r);return N(a)?a.then((e=>(qt([s,"optionalAccess",e=>e.finish,"call",e=>e()]),e))):(qt([s,"optionalAccess",e=>e.finish,"call",e=>e()]),a)}}))}}Kt.__initStatic();class Wt{constructor(){Wt.prototype.__init.call(this)}static __initStatic(){this.id="Mysql"}__init(){this.name=Wt.id}setupOnce(e,t){if(Ft(t))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.log("Mysql Integration is skipped because of instrumenter configuration."));const r=(0,he.$y)("mysql/lib/Connection.js");r?G(r,"createQuery",(function(e){return function(r,n,i){const o=qt([t().getScope(),"optionalAccess",e=>e.getSpan,"call",e=>e()]),s=qt([o,"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"==typeof r?r:r.sql,op:"db"})]);return"function"==typeof i?e.call(this,r,n,(function(e,t,r){qt([s,"optionalAccess",e=>e.finish,"call",e=>e()]),i(e,t,r)})):"function"==typeof n?e.call(this,r,(function(e,t,r){qt([s,"optionalAccess",e=>e.finish,"call",e=>e()]),n(e,t,r)})):e.call(this,r,n,i)}})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.error("Mysql Integration was unable to require `mysql` package.")}}Wt.__initStatic();const $t=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],Qt={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class Zt{static __initStatic(){this.id="Mongo"}__init(){this.name=Zt.id}constructor(e={}){Zt.prototype.__init.call(this),this._operations=Array.isArray(e.operations)?e.operations:$t,this._describeOperations=!("describeOperations"in e)||e.describeOperations,this._useMongoose=!!e.useMongoose}setupOnce(e,t){if(Ft(t))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.log("Mongo Integration is skipped because of instrumenter configuration."));const r=this._useMongoose?"mongoose":"mongodb",n=(0,he.$y)(r);n?this._instrumentOperations(n.Collection,this._operations,t):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.error(`Mongo Integration was unable to require \`${r}\` package.`)}_instrumentOperations(e,t,r){t.forEach((t=>this._patchOperation(e,t,r)))}_patchOperation(e,t,r){if(!(t in e.prototype))return;const n=this._getSpanContextFromOperationArguments.bind(this);G(e.prototype,t,(function(e){return function(...i){const o=i[i.length-1],s=qt([r().getScope(),"optionalAccess",e=>e.getSpan,"call",e=>e()]);if("function"!=typeof o||"mapReduce"===t&&2===i.length){const r=qt([s,"optionalAccess",e=>e.startChild,"call",e=>e(n(this,t,i))]),o=e.call(this,...i);if(N(o))return o.then((e=>(qt([r,"optionalAccess",e=>e.finish,"call",e=>e()]),e)));if((a=o)&&"object"==typeof a&&a.once&&"function"==typeof a.once){const e=o;try{e.once("close",(()=>{qt([r,"optionalAccess",e=>e.finish,"call",e=>e()])}))}catch(e){qt([r,"optionalAccess",e=>e.finish,"call",e=>e()])}return e}return qt([r,"optionalAccess",e=>e.finish,"call",e=>e()]),o}var a;const c=qt([s,"optionalAccess",e=>e.startChild,"call",e=>e(n(this,t,i.slice(0,-1)))]);return e.call(this,...i.slice(0,-1),(function(e,t){qt([c,"optionalAccess",e=>e.finish,"call",e=>e()]),o(e,t)}))}}))}_getSpanContextFromOperationArguments(e,t,r){const n={collectionName:e.collectionName,dbName:e.dbName,namespace:e.namespace},i={op:"db",description:t,data:n},o=Qt[t],s=Array.isArray(this._describeOperations)?this._describeOperations.includes(t):this._describeOperations;if(!o||!s)return i;try{if("mapReduce"===t){const[e,t]=r;n[o[0]]="string"==typeof e?e:e.name||"<anonymous>",n[o[1]]="string"==typeof t?t:t.name||"<anonymous>"}else for(let e=0;e<o.length;e++)n[o[e]]=JSON.stringify(r[e])}catch(e){}return i}}Zt.__initStatic();class Jt{static __initStatic(){this.id="Prisma"}__init(){this.name=Jt.id}constructor(e={}){var t;Jt.prototype.__init.call(this),(t=e.client)&&t.$use?this._client=e.client:("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.warn(`Unsupported Prisma client provided to PrismaIntegration. Provided client: ${JSON.stringify(e.client)}`)}setupOnce(e,t){this._client?Ft(t)?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.log("Prisma Integration is skipped because of instrumenter configuration."):this._client.$use(((e,r)=>{const n=qt([t().getScope(),"optionalAccess",e=>e.getSpan,"call",e=>e()]),i=e.action,o=e.model,s=qt([n,"optionalAccess",e=>e.startChild,"call",e=>e({description:o?`${o} ${i}`:i,op:"db.sql.prisma"})]),a=r(e);return N(a)?a.then((e=>(qt([s,"optionalAccess",e=>e.finish,"call",e=>e()]),e))):(qt([s,"optionalAccess",e=>e.finish,"call",e=>e()]),a)})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.error("PrismaIntegration is missing a Prisma Client Instance")}}Jt.__initStatic();class Xt{constructor(){Xt.prototype.__init.call(this)}static __initStatic(){this.id="GraphQL"}__init(){this.name=Xt.id}setupOnce(e,t){if(Ft(t))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.log("GraphQL Integration is skipped because of instrumenter configuration."));const r=(0,he.$y)("graphql/execution/execute.js");r?G(r,"execute",(function(e){return function(...r){const n=t().getScope(),i=qt([n,"optionalAccess",e=>e.getSpan,"call",e=>e()]),o=qt([i,"optionalAccess",e=>e.startChild,"call",e=>e({description:"execute",op:"graphql.execute"})]);qt([n,"optionalAccess",e=>e.setSpan,"call",e=>e(o)]);const s=e.call(this,...r);return N(s)?s.then((e=>(qt([o,"optionalAccess",e=>e.finish,"call",e=>e()]),qt([n,"optionalAccess",e=>e.setSpan,"call",e=>e(i)]),e))):(qt([o,"optionalAccess",e=>e.finish,"call",e=>e()]),qt([n,"optionalAccess",e=>e.setSpan,"call",e=>e(i)]),s)}})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.error("GraphQL Integration was unable to require graphql/execution package.")}}Xt.__initStatic();class er{static __initStatic(){this.id="Apollo"}__init(){this.name=er.id}constructor(e={useNestjs:!1}){er.prototype.__init.call(this),this._useNest=!!e.useNestjs}setupOnce(e,t){if(Ft(t))("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.log("Apollo Integration is skipped because of instrumenter configuration.");else if(this._useNest){const e=(0,he.$y)("@nestjs/graphql");if(!e)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package."));G(e.GraphQLFactory.prototype,"mergeWithSchema",(function(e){return function(...r){return G(this.resolversExplorerService,"explore",(function(e){return function(){return tr(ce(e.call(this)),t)}})),e.call(this,...r)}}))}else{const e=(0,he.$y)("apollo-server-core");if(!e)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.error("Apollo Integration was unable to require apollo-server-core package."));G(e.ApolloServerBase.prototype,"constructSchema",(function(e){return function(){if(!this.config.resolvers)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&(this.config.schema?(te.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),te.warn()):this.config.modules&&te.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property."),te.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")),e.call(this);const r=ce(this.config.resolvers);return this.config.resolvers=tr(r,t),e.call(this)}}))}}}function tr(e,t){return e.map((e=>(Object.keys(e).forEach((r=>{Object.keys(e[r]).forEach((n=>{"function"==typeof e[r][n]&&function(e,t,r,n){G(e[t],r,(function(e){return function(...i){const o=qt([n().getScope(),"optionalAccess",e=>e.getSpan,"call",e=>e()]),s=qt([o,"optionalAccess",e=>e.startChild,"call",e=>e({description:`${t}.${r}`,op:"graphql.resolve"})]),a=e.call(this,...i);return N(a)?a.then((e=>(qt([s,"optionalAccess",e=>e.finish,"call",e=>e()]),e))):(qt([s,"optionalAccess",e=>e.finish,"call",e=>e()]),a)}}))}(e,r,n,t)}))})),e)))}er.__initStatic(),r(6046);L.n2;r(758);let rr={};Le.Sentry&&Le.Sentry.Integrations&&(rr=Le.Sentry.Integrations);const nr={...rr,...e,...t},ir="?";function or(e,t,r,n){const i={filename:e,abs_path:e,function:t,in_app:!0};return void 0!==r&&(i.lineno=r),void 0!==n&&(i.colno=n),i}const sr=/^\s*at (?:(.*\).*?|.*?) ?\((?:address at )?)?(?:async )?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,ar=/\((\S*)(?::(\d+))(?::(\d+))\)/,cr=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,ur=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,lr=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,dr=function(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,r=0)=>{const n=[],i=e.split("\n");for(let e=r;e<i.length;e++){const r=i[e];if(r.length>1024)continue;const o=He.test(r)?r.replace(He,"$1"):r;for(const e of t){const t=e(o);if(t){n.push(t);break}}if(n.length>=50)break}return function(e){if(!e.length)return[];const t=e.slice(0,50),r=t[t.length-1].function;r&&/sentryWrapped/.test(r)&&t.pop(),t.reverse();const n=t[t.length-1].function;return n&&/captureMessage|captureException/.test(n)&&t.pop(),t.map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(n)}}([30,e=>{const t=sr.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=ar.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,r]=pr(t[1]||ir,t[2]);return or(r,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],[50,e=>{const t=cr.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=ur.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],r=t[1]||ir;return[r,e]=pr(r,e),or(e,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],[40,e=>{const t=lr.exec(e);return t?or(t[2],t[1]||ir,+t[3],t[4]?+t[4]:void 0):void 0}]),pr=(e,t)=>{const r=-1!==e.indexOf("safari-extension"),n=-1!==e.indexOf("safari-web-extension");return r||n?[-1!==e.indexOf("@")?e.split("@")[0]:ir,r?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};class hr extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}const fr=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function gr(e,t=!1){const{host:r,path:n,pass:i,port:o,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&i?`:${i}`:""}@${r}${o?`:${o}`:""}/${n?`${n}/`:n}${s}`}function mr(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Er(e,t=[]){return[e,t]}function yr(e,t){const[r,n]=e;return[r,[...n,t]]}function vr(e,t){const r=e[1];for(const e of r)if(t(e,e[0].type))return!0;return!1}function _r(e,t){return(t||new TextEncoder).encode(e)}function Ar(e,t){const[r,n]=e;let i=JSON.stringify(r);function o(e){"string"==typeof i?i="string"==typeof e?i+e:[_r(i,t),e]:i.push("string"==typeof e?_r(e,t):e)}for(const e of n){const[t,r]=e;if(o(`\n${JSON.stringify(t)}\n`),"string"==typeof r||r instanceof Uint8Array)o(r);else{let e;try{e=JSON.stringify(r)}catch(t){e=JSON.stringify(nt(r))}o(e)}}return"string"==typeof i?i:function(e){const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}(i)}function Sr(e,t){const r="string"==typeof e.data?_r(e.data,t):e.data;return[W({type:"attachment",length:r.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),r]}const Ir={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay"};function Cr(e){return Ir[e]}function Or(e){if(!e||!e.sdk)return;const{name:t,version:r}=e.sdk;return{name:t,version:r}}function Tr(e,t,r=function(e){const t=[];function r(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(n){if(!(void 0===e||t.length<e))return Ee(new hr("Not adding Promise because buffer limit was reached."));const i=n();return-1===t.indexOf(i)&&t.push(i),i.then((()=>r(i))).then(null,(()=>r(i).then(null,(()=>{})))),i},drain:function(e){return new ye(((r,n)=>{let i=t.length;if(!i)return r(!0);const o=setTimeout((()=>{e&&e>0&&r(!1)}),e);t.forEach((e=>{me(e).then((()=>{--i||(clearTimeout(o),r(!0))}),n)}))}))}}}(e.bufferSize||30)){let n={};function i(i){const o=[];if(vr(i,((t,r)=>{const i=Cr(r);if(function(e,t,r=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>r}(n,i)){const n=Pr(t,r);e.recordDroppedEvent("ratelimit_backoff",i,n)}else o.push(t)})),0===o.length)return me();const s=Er(i[0],o),a=t=>{vr(s,((r,n)=>{const i=Pr(r,n);e.recordDroppedEvent(t,Cr(n),i)}))};return r.add((()=>t({body:Ar(s,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),n=function(e,{statusCode:t,headers:r},n=Date.now()){const i={...e},o=r&&r["x-sentry-rate-limits"],s=r&&r["retry-after"];if(o)for(const e of o.trim().split(",")){const[t,r]=e.split(":",2),o=parseInt(t,10),s=1e3*(isNaN(o)?60:o);if(r)for(const e of r.split(";"))i[e]=n+s;else i.all=n+s}else s?i.all=n+function(e,t=Date.now()){const r=parseInt(`${e}`,10);if(!isNaN(r))return 1e3*r;const n=Date.parse(`${e}`);return isNaN(n)?6e4:n-t}(s,n):429===t&&(i.all=n+6e4);return i}(n,e),e)),(e=>{throw a("network_error"),e})))).then((e=>e),(e=>{if(e instanceof hr)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.error("Skipped sending event because buffer is full."),a("queue_overflow"),me();throw e}))}return i.__sentry__baseTransport__=!0,{send:i,flush:e=>r.drain(e)}}function Pr(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}let Rr;function wr(e,t=function(){if(Rr)return Rr;if(qe(Le.fetch))return Rr=Le.fetch.bind(Le);const e=Le.document;let t=Le.fetch;if(e&&"function"==typeof e.createElement)try{const r=e.createElement("iframe");r.hidden=!0,e.head.appendChild(r);const n=r.contentWindow;n&&n.fetch&&(t=n.fetch),e.head.removeChild(r)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return Rr=t.bind(Le)}()){let r=0,n=0;return Tr(e,(function(i){const o=i.body.length;r+=o,n++;const s={body:i.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:r<=6e4&&n<15,...e.fetchOptions};try{return t(e.url,s).then((e=>(r-=o,n--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return Rr=void 0,r-=o,n--,Ee(e)}}))}function br(e,t={}){const r="string"==typeof t?t:t.tunnel,n="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return r||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",r=e.port?`:${e.port}`:"";return`${t}//${e.host}${r}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){return r={sentry_key:e.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(r).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(r[e])}`)).join("&");var r}(e,n)}`}const Nr=[];function Dr(e,t){t[e.name]=e,-1===Nr.indexOf(e.name)&&(e.setupOnce(Se,Pe),Nr.push(e.name),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.log(`Integration installed: ${e.name}`))}const Lr="Not capturing exception because it's already been captured.";class xr{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}__init5(){this._hooks={}}constructor(e){if(xr.prototype.__init.call(this),xr.prototype.__init2.call(this),xr.prototype.__init3.call(this),xr.prototype.__init4.call(this),xr.prototype.__init5.call(this),this._options=e,e.dsn){this._dsn=function(e){const t="string"==typeof e?function(e){const t=fr.exec(e);if(!t)throw new hr(`Invalid Sentry Dsn: ${e}`);const[r,n,i="",o,s="",a]=t.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const e=u.match(/^\d+/);e&&(u=e[0])}return mr({host:o,pass:i,path:c,projectId:u,port:s,protocol:r,publicKey:n})}(e):mr(e);return function(e){if("undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__)return;const{port:t,projectId:r,protocol:n}=e;if(["protocol","publicKey","host","projectId"].forEach((t=>{if(!e[t])throw new hr(`Invalid Sentry Dsn: ${t} missing`)})),!r.match(/^\d+$/))throw new hr(`Invalid Sentry Dsn: Invalid projectId ${r}`);if(!function(e){return"http"===e||"https"===e}(n))throw new hr(`Invalid Sentry Dsn: Invalid protocol ${n}`);if(t&&isNaN(parseInt(t,10)))throw new hr(`Invalid Sentry Dsn: Invalid port ${t}`)}(t),t}(e.dsn);const t=br(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.warn("No DSN provided, client will not do anything.")}captureException(e,t,r){if(ae(e))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.log(Lr));let n=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,r))).then((e=>{n=e}))),n}captureMessage(e,t,r,n){let i=r&&r.event_id;const o=P(e)?this.eventFromMessage(String(e),t,r):this.eventFromException(e,r);return this._process(o.then((e=>this._captureEvent(e,r,n))).then((e=>{i=e}))),i}captureEvent(e,t,r){if(t&&t.originalException&&ae(t.originalException))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.log(Lr));let n=t&&t.event_id;return this._process(this._captureEvent(e,t,r).then((e=>{n=e}))),n}captureSession(e){this._isEnabled()?"string"!=typeof e.release?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),ve(e,{init:!1})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.warn("SDK not enabled, will not capture session.")}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?this._isClientDoneProcessing(e).then((r=>t.flush(e).then((e=>r&&e)))):me(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,e)))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=function(e){const t={};return e.forEach((e=>{e&&Dr(e,t)})),t}(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){Dr(e,this._integrations)}sendEvent(e,t={}){if(this._dsn){let r=function(e,t,r,n){const i=Or(r),o=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,r&&r.sdk);const s=function(e,t,r,n){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!r&&{dsn:gr(n)},..."transaction"===e.type&&i&&{trace:W({...i})}}}(e,i,n,t);return delete e.sdkProcessingMetadata,Er(s,[[{type:o},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])r=yr(r,Sr(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const n=this._sendEnvelope(r);n&&n.then((t=>this.emit("afterSendEvent",e,t)),null)}}sendSession(e){if(this._dsn){const t=function(e,t,r,n){const i=Or(r);return Er({sent_at:(new Date).toISOString(),...i&&{sdk:i},...!!n&&{dsn:gr(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}}recordDroppedEvent(e,t,r){if(this._options.sendClientReports){const r=`${e}:${t}`;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.log(`Adding outcome: "${r}"`),this._outcomes[r]=this._outcomes[r]+1||1}}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_updateSessionFromEvent(e,t){let r=!1,n=!1;const i=t.exception&&t.exception.values;if(i){n=!0;for(const e of i){const t=e.mechanism;if(t&&!1===t.handled){r=!0;break}}}const o="ok"===e.status;(o&&0===e.errors||o&&r)&&(ve(e,{...r&&{status:"crashed"},errors:e.errors||Number(n||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new ye((t=>{let r=0;const n=setInterval((()=>{0==this._numProcessing?(clearInterval(n),t(!0)):(r+=1,e&&r>=e&&(clearInterval(n),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._dsn}_prepareEvent(e,t,r){const n=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i.length>0&&(t.integrations=i),function(e,t,r,n){const{normalizeDepth:i=3,normalizeMaxBreadth:o=1e3}=e,s={...t,event_id:t.event_id||r.event_id||re(),timestamp:t.timestamp||(0,pe.yW)()},a=r.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:r,release:n,dist:i,maxValueLength:o=250}=t;"environment"in e||(e.environment="environment"in t?r:fe),void 0===e.release&&void 0!==n&&(e.release=n),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=M(e.message,o));const s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=M(s.value,o));const a=e.request;a&&a.url&&(a.url=M(a.url,o))}(s,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(s,a),function(e,t){const r=L.n2._sentryDebugIds;if(!r)return;const n=Object.keys(r).reduce(((e,n)=>{const i=t(n);for(const t of i)if(t.abs_path){e[t.abs_path]=r[n];break}return e}),{}),i=new Set;try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.abs_path&&i.add(e.abs_path)}))}))}catch(e){}e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const o=e.debug_meta.images;i.forEach((e=>{n[e]&&o.push({type:"sourcemap",code_file:e,debug_id:n[e]})}))}(s,e.stackParser);let c=n;r.captureContext&&(c=_e.clone(c).update(r.captureContext));let u=me(s);if(c){if(c.getAttachments){const e=[...r.attachments||[],...c.getAttachments()];e.length&&(r.attachments=e)}u=c.applyToEvent(s,r)}return u.then((e=>"number"==typeof i&&i>0?function(e,t,r){if(!e)return null;const n={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:nt(e.data,t,r)}})))},...e.user&&{user:nt(e.user,t,r)},...e.contexts&&{contexts:nt(e.contexts,t,r)},...e.extra&&{extra:nt(e.extra,t,r)}};return e.contexts&&e.contexts.trace&&n.contexts&&(n.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(n.contexts.trace.data=nt(e.contexts.trace.data,t,r))),e.spans&&(n.spans=e.spans.map((e=>(e.data&&(e.data=nt(e.data,t,r)),e)))),n}(e,i,o):e))}(n,e,t,r)}_captureEvent(e,t={},r){return this._processEvent(e,t,r).then((e=>e.event_id),(e=>{if("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__){const t=e;"log"===t.logLevel?te.log(t.message):te.warn(t)}}))}_processEvent(e,t,r){const n=this.getOptions(),{sampleRate:i}=n;if(!this._isEnabled())return Ee(new hr("SDK not enabled, will not capture event.","log"));const o=kr(e),s=Ur(e),a=e.type||"error",c=`before send for type \`${a}\``;if(s&&"number"==typeof i&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",e),Ee(new hr(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const u="replay_event"===a?"replay":a;return this._prepareEvent(e,t,r).then((r=>{if(null===r)throw this.recordDroppedEvent("event_processor",u,e),new hr("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return r;const i=function(e,t,r){const{beforeSend:n,beforeSendTransaction:i}=e;return Ur(t)&&n?n(t,r):kr(t)&&i?i(t,r):t}(n,r,t);return function(e,t){const r=`${t} must return \`null\` or a valid event.`;if(N(e))return e.then((e=>{if(!R(e)&&null!==e)throw new hr(r);return e}),(e=>{throw new hr(`${t} rejected with ${e}`)}));if(!R(e)&&null!==e)throw new hr(r);return e}(i,c)})).then((n=>{if(null===n)throw this.recordDroppedEvent("before_send",u,e),new hr(`${c} returned \`null\`, will not send event.`,"log");const i=r&&r.getSession();!o&&i&&this._updateSessionFromEvent(i,n);const s=n.transaction_info;if(o&&s&&n.transaction!==e.transaction){const e="custom";n.transaction_info={...s,source:e}}return this.sendEvent(n,t),n})).then(null,(e=>{if(e instanceof hr)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new hr(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this._transport&&this._dsn)return this.emit("beforeEnvelope",e),this._transport.send(e).then(null,(e=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.error("Error while sending event:",e)}));("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[r,n]=t.split(":");return{reason:r,category:n,quantity:e[t]}}))}}function Ur(e){return void 0===e.type}function kr(e){return"transaction"===e.type}const Mr="7.45.0";var Hr=r(8518);class Br extends xr{constructor(e){const t=Le.SENTRY_SDK_SOURCE||(0,Hr.S)();e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${t}:@sentry/browser`,version:Mr}],version:Mr},super(e),e.sendClientReports&&Le.document&&Le.document.addEventListener("visibilitychange",(()=>{"hidden"===Le.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return function(e,t,r,n){const i=dt(e,t,r&&r.syntheticException||void 0,n);return se(i),i.level="error",r&&r.event_id&&(i.event_id=r.event_id),me(i)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",r){return function(e,t,r="info",n,i){const o=pt(e,t,n&&n.syntheticException||void 0,i);return o.level=r,n&&n.event_id&&(o.event_id=n.event_id),me(o)}(this._options.stackParser,e,t,r,this._options.attachStacktrace)}sendEvent(e,t){const r=this.getIntegrationById(Rt);r&&r.addSentryBreadcrumb&&r.addSentryBreadcrumb(e),super.sendEvent(e,t)}_prepareEvent(e,t,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,r)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.log("No outcomes to send"));if(!this._dsn)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.log("No dsn provided, will not send outcomes"));("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&te.log("Sending outcomes:",e);const t=function(e,t,r){return Er(t?{dsn:t}:{},[[{type:"client_report"},{timestamp:(0,pe.yW)(),discarded_events:e}]])}(e,this._options.tunnel&&gr(this._dsn));this._sendEnvelope(t)}}var Gr,jr,qr,Fr,Vr=Object.defineProperty,Yr=Object.defineProperties,zr=Object.getOwnPropertyDescriptors,Kr=Object.getOwnPropertySymbols,Wr=Object.prototype.hasOwnProperty,$r=Object.prototype.propertyIsEnumerable,Qr=(e,t,r)=>t in e?Vr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Zr=(e,t)=>{for(var r in t||(t={}))Wr.call(t,r)&&Qr(e,r,t[r]);if(Kr)for(var r of Kr(t))$r.call(t,r)&&Qr(e,r,t[r]);return e},Jr=(e,t)=>Yr(e,zr(t)),Xr=(e,t,r)=>new Promise(((n,i)=>{var o=e=>{try{a(r.next(e))}catch(e){i(e)}},s=e=>{try{a(r.throw(e))}catch(e){i(e)}},a=e=>e.done?n(e.value):Promise.resolve(e.value).then(o,s);a((r=r.apply(e,t)).next())})),en=class extends Error{constructor(e){super(e),this.name="IframeMessengerImplementationError",Object.setPrototypeOf(this,en.prototype)}},tn=class extends Error{constructor(e){super(e),this.name="IframeMessengerInternalMessageError",Object.setPrototypeOf(this,tn.prototype)}},rn=class extends Error{constructor(e,t,r){if(r){let n=document.getElementById(r);super(`Messenger has not received an acknowledgement of message ${e} with id ${t} from iframe id=${r} which ${void 0!==(null==n?void 0:n.src)?"exists":"does not exist"}`)}else super(`Messenger has not received an acknowledgement of message ${e} with id ${t}, no iframeID was set`);this.type=e,this.id=t,this.iframeID=r,this.name="IframeMessengerTimeoutError",Object.setPrototypeOf(this,rn.prototype)}},nn="channel:connected",on="channel:connecting",sn="channel:close",an="channel:error";(jr=Gr||(Gr={})).ACK="ack",jr.OK="ok",jr.ERROR="error",(Fr=qr||(qr={}))[Fr.BAD_REQUEST=400]="BAD_REQUEST",Fr[Fr.OK=200]="OK",Fr[Fr.CREATED=201]="CREATED",Fr[Fr.NO_CONTENT=204]="NO_CONTENT",Fr[Fr.NOT_FOUND=404]="NOT_FOUND",Fr[Fr.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",Fr[Fr.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",Fr[Fr.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",Fr[Fr.UNAUTHORIZED=401]="UNAUTHORIZED";var cn,un,ln={get BACKOFF_FACTOR(){return 1.66},get REQUEST_DURATION_MAX_MS(){return 6e4},get REQUEST_TIMEOUT_MS(){return[1e4,2e4,3e4]},get RETRY_DELAY_MS(){return 200},STATUS_CODE:qr},dn=class extends Error{constructor(e,t){super(`The listener provided for event type ${e} timed out after ${t} milliseconds. If you've returned a promise, ensure it is resolving`),this.name="EventListenerTimeoutError",Object.setPrototypeOf(this,dn.prototype)}},pn=class extends Error{constructor(e,t){super(`The listener provided for event type ${e} threw an error: ${t}`),this.name="InvalidEventListenerError",Object.setPrototypeOf(this,pn.prototype)}},hn=class extends Error{constructor(e,t,r){super(`Request timeout exceeded (attempts=${e}; duration=${t}ms; url=${r})`),this.name="HttpRequestTimeoutError",Object.setPrototypeOf(this,hn.prototype)}},fn=class extends Error{constructor(e,t,r){super(`Invalid JSON received (status=${t}; url=${e})`),this.originalErrorMessage=r,this.name="HttpRequestInvalidJsonError",Object.setPrototypeOf(this,fn.prototype)}},gn=class extends Error{constructor(e,t,r){super(`Network error during request (attempts=${e}; duration=${t}ms; url=${r})`),this.name="HttpRequestNetworkError",Object.setPrototypeOf(this,gn.prototype)}},mn={timeout:function(e,t){return Xr(this,arguments,(function*(e,t,r=new Error("Promise timeout exceeded")){let n=-1,i=new Promise(((e,i)=>{n=window.setTimeout((()=>{i(r)}),t)})),o=yield Promise.race([i,e()]);return window.clearTimeout(n),o}))}};(un=cn||(cn={})).GET="GET",un.PATCH="PATCH",un.POST="POST",un.PUT="PUT";var En="include",yn="cors";function vn(e,t){let r=function(e,t){return Math.floor(e*Math.pow(ln.BACKOFF_FACTOR,t))}(ln.RETRY_DELAY_MS,e-1),n=Date.now()-t,i=ln.REQUEST_DURATION_MAX_MS-n,o=ln.REQUEST_TIMEOUT_MS[e-1];return i<=r?i-o:r}function _n(e,t){return{body:e,status:t.status,statusText:t.statusText}}function An(e){let t=new Headers([["Accept","application/json"],["Content-Type","application/json; charset=utf-8"]]);for(let r in e)e[r]&&t.set(r,e[r]);return t}function Sn(e,t){return Xr(this,null,(function*(){let r={};if(!(e.status<ln.STATUS_CODE.INTERNAL_SERVER_ERROR))return _n(r,e);{let n;try{return e.status!==ln.STATUS_CODE.NO_CONTENT&&(r=yield e.json()),_n(r,e)}catch(r){let i=r.toString();try{n=yield e.text(),n=`${n} ${i}`}catch(e){n=i}throw new fn(t,e.status,n)}}}))}function In(e,t,r){return Xr(this,arguments,(function*(e,t,r,n=1,i=Date.now()){var o;let s=null==(o=r.retryOnTimeout)||o,a=Date.now()-i,c=ln.REQUEST_DURATION_MAX_MS-a,u=Math.min(r.timeout||ln.REQUEST_TIMEOUT_MS[n-1],c),l=null;void 0!==window.AbortController&&null!==window.AbortController&&(l=new window.AbortController);let d=Jr(Zr({},t),{signal:l?l.signal:null});try{let t=yield mn.timeout(window.fetch.bind(null,e,d),u,new hn(n,a,e));return yield Sn(t,e)}catch(o){let c=0;if(o instanceof hn)l&&l.abort();else{if(o instanceof fn)throw o;if(c=vn(n,i),!s||c<=0)throw new gn(n,a,e)}if(!s||n===ln.REQUEST_TIMEOUT_MS.length)throw o;return new Promise((o=>{setTimeout((()=>{o(In(e,t,r,n+1,i))}),c)}))}}))}function Cn(e,t,r){var n,i,o;let s=An(null!=(n=t.headers)?n:{});return In(e,{body:JSON.stringify(t.body),headers:s,method:r,credentials:null!=(i=t.credentials)?i:En,mode:null!=(o=t.mode)?o:yn},t)}var On,Tn,Pn,Rn,wn,bn,Nn,Dn,Ln,xn,Un,kn,Mn,Hn,Bn,Gn,jn,qn,Fn,Vn,Yn,zn,Kn,Wn,$n,Qn=function(e,t){return Cn(e,t,cn.POST)};r(1874),r(6977),r(7852),r(4603),r(4723),r(6755),r(5306),function(e){e.API_ERROR="API_ERROR",e.AUTHENTICATION_ERROR="AUTHENTICATION_ERROR",e.INVALID_REQUEST_ERROR="INVALID_REQUEST_ERROR",e.RATE_LIMIT_ERROR="RATE_LIMIT_ERROR",e.PAYMENT_METHOD_ERROR="PAYMENT_METHOD_ERROR",e.REFUND_ERROR="REFUND_ERROR"}(On||(On={}));class Zn extends Error{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown Error",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e;t.length>0&&(r=function(e,t){return"".concat(e,"\n  ").concat(t.map((e=>{switch(!0){case"message"in e:return e.message;case"detail"in e:return e.detail;default:return"[Unspecified Error]"}})).join("\n  "))}(e,t)),super(r),this.errors=t,this.name="SqError",Object.setPrototypeOf(this,Zn.prototype)}fromSerializedError(e){this.name=e.name,this.message=e.message,e.errors&&(this.errors=e.errors)}}class Jn extends Zn{constructor(){super("The Payment 'applicationId' option is not in the correct format."),this.name="InvalidApplicationIdError",Object.setPrototypeOf(this,Jn.prototype)}}class Xn extends Zn{constructor(e,t){super("Web Payments SDK was initialized with an application ID created in ".concat(e," however you are currently using ").concat(t,".")),this.name="ApplicationIdEnvironmentMismatchError ",Object.setPrototypeOf(this,Xn.prototype)}}class ei extends Zn{constructor(){super("You cannot call `tokenize` when using an `onTokenize` callback"),this.name="AfterpayOnTokenizeListenerError",Object.setPrototypeOf(this,ei.prototype)}}class ti extends Zn{constructor(e,t){super("This instance of ".concat(e," is missing the ").concat(t," listener.")),this.name="PaymentMethodMissingListener",Object.setPrototypeOf(this,ti.prototype)}}class ri extends Zn{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("The payment request used for Afterpay/Clearpay caused a failure",e),this.errors=e,this.name="AfterpayRequestError",Object.setPrototypeOf(this,ri.prototype)}}class ni extends Zn{constructor(){super("The amount is outside of the merchant's Afterpay payment limits."),this.name="AfterpayAmountOutsideLimitsError",Object.setPrototypeOf(this,ni.prototype)}}class ii extends Zn{constructor(){super("The currency provided is not supported for use with Afterpay/Clearpay"),this.name="AfterpayUnsupportedCurrencyError",Object.setPrototypeOf(this,ii.prototype)}}class oi extends Zn{constructor(){super("Afterpay/Clearpay is not enabled for this merchant."),this.name="AfterpayMerchantError",Object.setPrototypeOf(this,oi.prototype)}}class si extends Zn{constructor(e){super(e),this.name="AfterpayInvalidPaymentRequestError",Object.setPrototypeOf(this,si.prototype)}}class ai extends Zn{constructor(e){var t=e instanceof HTMLElement?e.nodeName:e;super("The element ".concat(t," was not found")),this.name="ElementNotFoundError",Object.setPrototypeOf(this,ai.prototype)}}class ci extends Zn{constructor(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).join("\n");super("Please ensure you call payments.paymentRequest (https://developer.squareup.com/reference/sdks/web/payments#Payments.paymentRequest) with the appropriate options.\n".concat(e)),this.name="InvalidPaymentRequestError",Object.setPrototypeOf(this,ci.prototype)}}class ui extends Zn{constructor(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).join("\n");super("\n".concat(e)),this.name="InvalidPaymentRequestUpdateError",Object.setPrototypeOf(this,ui.prototype)}}class li extends Zn{constructor(e,t){super("The callback provided to the event listener ".concat(e," threw an error with message: ").concat(t)),this.name="InvalidEventListenerCallbackError",Object.setPrototypeOf(this,li.prototype)}}class di extends Zn{constructor(e){super("option: '".concat(e,"'")),this.name="InvalidOptionError",Object.setPrototypeOf(this,di.prototype)}}class pi extends Zn{constructor(){super("Tokenization has failed. `accountHolderName` is a required option when calling ach.tokenize()"),this.name="PlaidMissingNameError",Object.setPrototypeOf(this,pi.prototype)}}class hi extends Zn{constructor(e){super("An issue occurred while verifying the buyer",[e]),this.name="VerifyBuyerError",Object.setPrototypeOf(this,hi.prototype)}}r(6833),(Wn=Tn||(Tn={})).FOCUS_CLASS_ADDED="focusClassAdded",Wn.FOCUS_CLASS_REMOVED="focusClassRemoved",Wn.ERROR_CLASS_ADDED="errorClassAdded",Wn.ERROR_CLASS_REMOVED="errorClassRemoved",Wn.CARD_BRAND_CHANGED="cardBrandChanged",Wn.POSTAL_CODE_CHANGED="postalCodeChanged",Wn.ESCAPE="escape",Wn.SUBMIT="submit",(Kn=Pn||(Pn={})).CARD_NUMBER="cardNumber",Kn.CVV="cvv",Kn.EXPIRATION_DATE="expirationDate",Kn.POSTAL_CODE="postalCode",(zn=Rn||(Rn={})).CARD_INPUT="input",zn.CARD_INPUT_FOCUS="input.is-focus",zn.CARD_INPUT_PLACEHOLDER="input::placeholder",zn.CARD_INPUT_FOCUS_PLACEHOLDER="input.is-focus::placeholder",zn.CARD_INPUT_ERROR="input.is-error",zn.CARD_INPUT_ERROR_PLACEHOLDER="input.is-error::placeholder",zn.CARD_COMPONENT=".input-container",zn.CARD_COMPONENT_FOCUS=".input-container.is-focus",zn.CARD_COMPONENT_ERROR=".input-container.is-error",zn.CARD_INPUT_HELPER_TEXT=".message-text",zn.CARD_INPUT_HELPER_ICON=".message-icon",zn.CARD_INPUT_ERROR_TEXT=".message-text.is-error",zn.CARD_INPUT_ERROR_ICON=".message-icon.is-error",(wn||(wn={})).GIFT_CARD_NUMBER="giftCardNumber",(Yn=bn||(bn={})).FOCUS_CLASS_ADDED="focusClassAdded",Yn.FOCUS_CLASS_REMOVED="focusClassRemoved",Yn.ERROR_CLASS_ADDED="errorClassAdded",Yn.ERROR_CLASS_REMOVED="errorClassRemoved",Yn.CARD_BRAND_CHANGED="cardBrandChanged",Yn.ESCAPE="escape",Yn.SUBMIT="submit",function(e){e.UNKNOWN="Unknown"}(Nn||(Nn={})),function(e){e.GIFT="Gift"}(Dn||(Dn={}));class fi extends Zn{constructor(e){super("".concat(e," is not a valid field name. Valid field names are ").concat([...Object.values(Pn),...Object.values(wn)].join(", "))),this.name="InvalidFieldNameError",Object.setPrototypeOf(this,fi.prototype)}}class gi extends Zn{constructor(e){super("Configuration property '".concat(e,"' is invalid")),this.name="InvalidConfigurationPropertyError",Object.setPrototypeOf(this,gi.prototype)}}class mi extends Zn{constructor(e,t,r){super("Configuration property '".concat(e,"' has an invalid value '").concat(t,"'.").concat(r?" ".concat(r,"."):"")),this.name="InvalidConfigurationValueError",Object.setPrototypeOf(this,mi.prototype)}}class Ei extends Zn{constructor(e,t){super("amount '".concat(e,"' in ").concat(t," is not expressed in a valid format")),this.name="InvalidCurrencyFormatError",Object.setPrototypeOf(this,Ei.prototype)}}class yi extends Zn{constructor(){super("Web Payments SDK does not support this browser"),this.name="BrowserNotSupportedError",Object.setPrototypeOf(this,yi.prototype)}}class vi extends Zn{constructor(){super("Web Payments SDK can only be embedded on sites that use HTTPS"),this.name="WebSdkEmbedError",Object.setPrototypeOf(this,vi.prototype)}}class _i extends Zn{constructor(e){super("This instance of ".concat(e," has already been attached to the page.")),this.name="PaymentMethodAlreadyAttachedError",Object.setPrototypeOf(this,_i.prototype)}}class Ai extends Zn{constructor(e){super("".concat(e," has not been attached to the page. It must be attached before you can call this method.")),this.name="PaymentMethodNotAttachedError",Object.setPrototypeOf(this,Ai.prototype)}}class Si extends Zn{constructor(e){super("This instance of ".concat(e," has already been destroyed.")),this.name="PaymentMethodAlreadyDestroyedError",Object.setPrototypeOf(this,Si.prototype)}}class Ii extends Zn{constructor(e,t){var r=e instanceof HTMLElement?e.nodeName:e;super("The value ".concat(r," is not a valid element type or selector. Only valid elements or selectors referring to ").concat([...t].join(", ")," elements are allowed.")),this.name="InvalidElementTypeError",Object.setPrototypeOf(this,Ii.prototype)}}class Ci extends Zn{constructor(e,t){super("An element with one of the following conflicting IDs was found on the page: ".concat(t,". You must change those elements' ID before you can use ").concat(e)),this.name="InvalidElementPresentError",Object.setPrototypeOf(this,Ci.prototype)}}class Oi extends Zn{constructor(e,t){var r=t||(null==e?void 0:e.field);super("Method unsupported: ".concat(null==e?void 0:e.message).concat(r?" (field=".concat(r,")"):"")),this.name="PaymentMethodUnsupportedError",Object.setPrototypeOf(this,Oi.prototype)}}class Ti extends Zn{constructor(e){super("The ".concat(e," feature is not enabled for this application.")),this.name="FeatureDisabledError",Object.setPrototypeOf(this,Ti.prototype)}}class Pi extends Zn{constructor(e,t,r){super("error loading script ".concat(e,": ").concat(t," ").concat(null==r?void 0:r.toString())),this.name="ScriptLoaderError",Object.setPrototypeOf(this,Pi.prototype)}}class Ri extends Zn{constructor(e){super("Invalid style property '".concat(e,"'.")),this.name="InvalidInputStylePropertyError",Object.setPrototypeOf(this,Ri.prototype)}}class wi extends Zn{constructor(e,t){super("Invalid style value '".concat(t,"' for property '").concat(e,"'.")),this.name="InvalidInputStyleValueError",Object.setPrototypeOf(this,wi.prototype)}}class bi extends Zn{constructor(e){super("Invalid style selector '".concat(e,"'.")),this.name="InvalidInputStyleSelectorError",Object.setPrototypeOf(this,bi.prototype)}}class Ni extends Zn{constructor(e){super("One or more style selectors and/or CSS properties are invalid",e),this.errors=e,this.name="InvalidStylesError",Object.setPrototypeOf(this,Ni.prototype)}}class Di extends Zn{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("Tokenization has failed",e),this.errors=e,this.name="TokenizationError",Object.setPrototypeOf(this,Di.prototype)}}class Li extends Zn{constructor(e){var t="An unexpected error occurred";e&&(t+=" while ".concat(e)),super("".concat(t,".")),this.name="UnexpectedError",Object.setPrototypeOf(this,Li.prototype)}}($n=Ln||(Ln={})).APPLE_PAY="Apple Pay",$n.AFTERPAY_CLEARPAY="AfterpayClearpay",$n.CARD="Card",$n.CASH_APP="Cash App",$n.GOOGLE_PAY="Google Pay",$n.GIFT_CARD="Gift Card",$n.ACH="ACH",$n.CASH_APP_PAY="Cash App Pay",function(e){e.SHIPPING_CONTACT_CHANGED="shippingcontactchanged",e.SHIPPING_OPTION_CHANGED="shippingoptionchanged"}(xn||(xn={}));class xi{constructor(e,t){this.type=e,this.detail=t,this.type=e,this.detail=t}}!function(e){e.UNKNOWN="Unknown",e.OK="OK",e.ERROR="Error",e.INVALID="Invalid",e.ABORT="Abort",e.CANCEL="Cancel"}(Un||(Un={})),function(e){e.BLACK="black",e.GREEN="mint",e.MINT="mint"}(kn||(kn={})),function(e){e.CheckoutWithAfterpay="checkout_with_afterpay",e.BuyNowWithAfterpay="buy_now_with_afterpay",e.PlaceOrderWithAfterpay="place_order_with_afterpay"}(Mn||(Mn={})),function(e){e.REVIEW_MY_ORDER="review_my_order",e.BUY_NOW="buy_now"}(Hn||(Hn={})),function(e){e.BLACK_ON_MINT="black-on-mint",e.BLACK_ON_WHITE="black-on-white",e.MINT_ON_BLACK="mint-on-black",e.WHITE_ON_BLACK="white-on-black"}(Bn||(Bn={})),function(e){e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg"}(Gn||(Gn={})),function(e){e.CIRCLED_INFO_ICON="circled-info-icon",e.CIRCLED_QUESTION_ICON="circled-question-icon",e.LEARN_MORE_TEXT="learn-more-text",e.MORE_INFO_TEXT="more-info-text",e.NONE="none"}(jn||(jn={})),function(e){e.MINT="mint",e.WHITE="white"}(qn||(qn={})),function(e){e.AFTERPAY_SHIPPING_ADDRESS_CHANGED="afterpay_shippingaddresschanged",e.AFTERPAY_SHIPPING_OPTION_CHANGED="afterpay_shippingoptionchanged"}(Fn||(Fn={})),function(e){e.ON_TOKENIZATION="ontokenization",e.CLOSE_OAUTH="CLOSE_OAUTH",e.ERROR="ERROR",e.EXIT="EXIT",e.FAIL_OAUTH="FAIL_OAUTH",e.HANDOFF="HANDOFF",e.MATCHED_SELECT_INSTITUTION="MATCHED_SELECT_INSTITUTION",e.MATCHED_SELECT_VERIFY_METHOD="MATCHED_SELECT_VERIFY_METHOD",e.OPEN="OPEN",e.OPEN_MY_PLAID="OPEN_MY_PLAID",e.OPEN_OAUTH="OPEN_OAUTH",e.SEARCH_INSTITUTION="SEARCH_INSTITUTION",e.SELECT_BRAND="SELECT_BRAND",e.SELECT_INSTITUTION="SELECT_INSTITUTION",e.SUBMIT_CREDENTIALS="SUBMIT_CREDENTIALS",e.SUBMIT_MFA="SUBMIT_MFA",e.TRANSITION_VIEW="TRANSITION_VIEW"}(Vn||(Vn={}));var Ui,ki,Mi,Hi,Bi,Gi,ji,qi,Fi,Vi,Yi,zi,Ki,Wi,$i,Qi=["borderColor","borderRadius","borderWidth"],Zi=["borderColor","borderWidth"],Ji=["color"],Xi=["color"];function eo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.entries(t).map((e=>{var[t,r]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r))})).join("&");return encodeURI(e)+(r.length>0?"?".concat(r):"")}function to(e){return e.hostname.endsWith("localhost")||"https:"===e.protocol}!function(e){e.UNKNOWN="OTHER_BRAND",e.AMERICAN_EXPRESS="AMERICAN_EXPRESS",e.DINERS_CLUB="DISCOVER_DINERS",e.DISCOVER="DISCOVER",e.JCB="JCB",e.MASTERCARD="MASTERCARD",e.UNION_PAY="CHINA_UNIONPAY",e.VISA="VISA"}(Ui||(Ui={})),function(e){e.UNKNOWN_CARD_TYPE="UNKNOWN_CARD_TYPE",e.CREDIT="CREDIT",e.DEBIT="DEBIT"}(ki||(ki={})),function(e){e.UNKNOWN_PAYMENT_TYPE="UNKNOWN_PREPAID_TYPE",e.NOT_PREPAID="NOT_PREPAID",e.PREPAID="PREPAID"}(Mi||(Mi={})),function(e){e.DEFAULT="default",e.BLACK="black",e.WHITE="white"}(Hi||(Hi={})),function(e){e.STATIC="static",e.FILL="fill"}(Bi||(Bi={})),function(e){e.LONG="long",e.SHORT="short"}(Gi||(Gi={})),function(e){e.PAYMENT_METHOD_DESTROYED="PAYMENT_METHOD_DESTROYED",e.SHIPPING_ADDRESS_UNSERVICEABLE="SHIPPING_ADDRESS_UNSERVICEABLE",e.SHIPPING_ADDRESS_INVALID="SHIPPING_ADDRESS_INVALID"}(ji||(ji={})),function(e){e.LIGHT="light",e.DARK="dark"}(qi||(qi={})),function(e){e.SQUARED="Squared",e.SEMIROUNDED="Semirounded",e.ROUNDED="Rounded"}(Fi||(Fi={})),function(e){e.ROUND="round",e.SEMIROUND="semiround"}(Vi||(Vi={})),function(e){e.MEDIUM="medium",e.SMALL="small"}(Yi||(Yi={})),function(e){e.DARK="dark",e.LIGHT="light"}(zi||(zi={})),function(e){e.FULL="full",e.STATIC="static"}(Ki||(Ki={})),function(e){e.ONTOKENIZATION="ontokenization",e.CUSTOMER_INTERACTION="customerInteraction",e.CUSTOMER_DISMISSED="customerDismissed"}(Wi||(Wi={})),function(e){e.GBP="GBP",e.USD="USD"}($i||($i={}));var ro=new RegExp(/^[\w.-]+$/i),no=new RegExp(/sq0at/i);function io(e){return _.env===e}function oo(){return io(h.production)}function so(e){if(!function(e){return!(e.length<22||e.length>37)&&ro.test(e)&&!no.test(e)}(e))throw new Jn;var t=e.match(/^[\w-]{22}$/),r=e.startsWith("sq0idp-"),n=e.startsWith("sandbox-sq0idb"),i=e.startsWith("sq0ids-");if(!(t||r||n||i))throw new Jn;if(r&&!oo())throw new Xn(h.production,_.env);if(n&&!io(h.sandbox))throw new Xn(h.sandbox,_.env)}var ao=uo(60),co=lo(60);function uo(e){return 1e3*e}function lo(e){return e*ao}var po={hoursToMs:function(e){return e*co},minutesToMs:lo,msToSeconds:function(e){return e/1e3},secondsToMs:uo},ho=/^_/g,fo=/(?!^)([A-Z])/g,go=/[\s_]+(?=[A-Za-z])/g,mo=new Set(["BIF","DJF","GNF","JPY","KMF","KRW","PYG","RWF","UGX","UYI","VND","VUV","XAF","XOF","XPF"]),Eo=new Set(["JOD","KWD","LYD","OMR","TND"]);function yo(e){var t=e.toUpperCase();return mo.has(t)?0:Eo.has(t)?3:2}var vo,_o,Ao,So={convertLocaleToUnderscore:function(e){return e.replace(/-/,"_")},cssProperty:function(e){return e.replace(ho,"-").replace(fo," $1").replace(go,"-").toLowerCase()},delay:function(e){return new Promise((t=>setTimeout(t,e)))},decimalPlaces:yo,formatCSSKeyValuePair:function(e,t){return"".concat(e,": ").concat(t,";")},enumValues:function(e){return Object.keys(e).map((t=>e[t])).filter((function(e){return"string"==typeof e}))},isInstanceOf:function(e,t){return t.some((function(t){return e instanceof t}))},isStaging:function(){return io(h.staging)},isProduction:oo,isValidUrl:function(e){try{return new URL(e),!0}catch(e){return!1}},requestId:function(){return Date.now()+Number.parseFloat(Math.random().toFixed(8))},url:eo,versionedUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return eo(e,t)},paymentRequestAmountToMoneyAmount:function(e,t){var r=yo(t),n="^(-?[0-9]+)";r>0&&(n="".concat(n,"(?:\\.([0-9]{1,").concat(r,"})[0-9]*)?")),n="".concat(n,"$");var i=e.match(n);if(!i)throw new Ei(e,t);var o=i[1];if(r>0){var s=i[2]||"";o=o+s+"0".repeat(r-s.length)}return Number(o)},moneyAmountToPaymentRequestAmount:function(e,t){var r=yo(t);return(e/Math.pow(10,r)).toFixed(r)},moneyAmountToInternationalizedCurrency:function(e,t,r){var n=yo(t),i=e/Math.pow(10,n);return new Intl.NumberFormat(r,{currency:t,style:"currency"}).format(i)}},Io=So;!function(e){e.CanUseOverrideStrings="can_use_override_strings",e.CanUseInterac="can_use_interac",e.CanUsePaymentsUI="can_use_payments_ui",e.CanUseAchAuth="can_use_ach_auth",e.PaymentsUICanUseCard="payments_ui_can_use_card",e.PaymentsUICanUseCashApp="payments_ui_can_use_cash_app",e.PaymentsUICanUseApplePay="payments_ui_can_use_apple_pay",e.PaymentsUICanUseGooglePay="payments_ui_can_use_google_pay",e.PaymentsUICanUseAchPlaid="payments_ui_can_use_ach_plaid",e.PaymentsUICanUseBnplA="payments_ui_can_use_bnpl_a",e.PaymentsUICanUseGiftCard="payments_ui_can_use_gift_card",e.CanUseBNPLA="can_use_bnpl_a",e.RecordErrorMetrics="record_error_metrics"}(vo||(vo={})),function(e){e.Control="C",e.TreatmentA="T1"}(_o||(_o={})),function(e){e.NoSupport="NO_SUPPORT",e.Supported="SUPPORTED",e.Required="REQUIRED"}(Ao||(Ao={}));var Co,Oo,To=_.SENTRY_DSN;class Po{constructor(e){var t;t=e.useGlobalHandlers?new nr.GlobalHandlers:new nr.GlobalHandlers({onerror:!1,onunhandledrejection:!1});var r=[new le,new Z,new nr.TryCatch,new nr.Breadcrumbs,t,new nr.LinkedErrors,new nr.HttpContext],n={beforeSend:(t,r)=>{var n;if(!e.enableErrorLogging)return console.error(t.exception),null!==(n=t.exception)&&void 0!==n&&n.values&&t.exception.values.forEach((e=>{console.error(e)})),null;if(!r)return t;var i=r.originalException;if(void 0!==this.featureFlagHandler&&this.featureFlagHandler.isActive(vo.RecordErrorMetrics)){var o=null==i?void 0:i.toString();i instanceof Error&&(o=i.stack);var s="applicationID: ".concat(e.applicationId,", url: ").concat(e.applicationUrl,", source: ").concat(e.sourceName,", error: ").concat(o);Qn(_.METRICS_ERROR_URL,{body:{sdk_version:_.VERSION,error_message:s||""}}).catch((()=>{}))}return t},dsn:To,environment:e.environment,integrations:r,release:"web-payments-sdk@".concat(_.VERSION),stackParser:dr,transport:e.transport||wr},i=new Br(n);this.hub=new Ce(i),this.hub.configureScope((t=>{t.setTag("applicationId",e.applicationId),t.setTag("applicationUrl",e.applicationUrl),t.setTag("source",e.sourceName),t.setTag("version",e.version)})),e.useGlobalHandlers&&Te(this.hub)}setFeatureFlagHandler(e){this.featureFlagHandler=e}setAvt(e){this.hub.setUser({id:e}),this.hub.configureScope((t=>{t.setTag("avt",e)}))}setSessionId(e){this.hub.configureScope((t=>{t.setTag("sessionId",e)}))}setInstanceId(e){this.hub.configureScope((t=>{t.setTag("instanceId",e)}))}captureException(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Io.isInstanceOf(e,[gn,hn])||(e instanceof fn&&this.hub.addBreadcrumb({category:"invalid json error message",message:e.originalErrorMessage,level:"info"}),this.hub.withScope((r=>{Object.entries(t).forEach((e=>{var[t,n]=e;r.setTag(t,n)})),this.hub.captureException(e)})))}}!function(e){e.INVALID_APPLICATION_ID="INVALID_APPLICATION_ID",e.INVALID_CARD_NUMBER="INVALID_CARD_NUMBER",e.INVALID_CVV="INVALID_CVV",e.INVALID_EXPIRATION_DATE="INVALID_EXPIRATION_DATE",e.INVALID_POSTAL_CODE="INVALID_POSTAL_CODE",e.INVALID_SANDBOX_CARD_NUMBER="INVALID_SANDBOX_CARD_NUMBER",e.INVALID_STAGING_CARD_NUMBER="INVALID_STAGING_CARD_NUMBER",e.MISSING_APPLICATION_ID="MISSING_APPLICATION_ID",e.MISSING_CARD_DATA="MISSING_CARD_DATA",e.UNKNOWN="UNKNOWN",e.UNSUPPORTED_CARD_BRAND="UNSUPPORTED_CARD_BRAND"}(Co||(Co={})),function(e){e.UNKNOWN="UNKNOWN"}(Oo||(Oo={}));var Ro,wo={[Oo.UNKNOWN]:{message:"An unknown error has occurred",type:"UNKNOWN"}};!function(e){e.EXPIRED_PLAID_SESSION="EXPIRED_PLAID_SESSION",e.INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID="INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID",e.UNKNOWN="UNKNOWN"}(Ro||(Ro={}));var bo,No,Do={EXPIRED_PLAID_SESSION:{message:"The plaid session was expired. Please try again.",type:"EXPIRED_PLAID_SESSION"},INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID:{message:"Invalid plaid bank account id selected",type:"INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID"},UNKNOWN:{message:"An unknown error has occurred",type:"UNKNOWN"}},Lo={INVALID_APPLICATION_ID:{message:"Invalid applicationId",type:"INVALID_APPLICATION_ID"},INVALID_CARD_NUMBER:{field:"cardNumber",message:"Credit card number is not valid",type:"VALIDATION_ERROR"},INVALID_CVV:{field:"cvv",message:"CVV is not valid",type:"VALIDATION_ERROR"},INVALID_EXPIRATION_DATE:{field:"expirationDate",message:"Expiration date is not valid",type:"VALIDATION_ERROR"},INVALID_POSTAL_CODE:{field:"postalCode",message:"Postal code is not valid",type:"VALIDATION_ERROR"},INVALID_SANDBOX_CARD_NUMBER:{field:"cardNumber",message:"Credit card number is not valid for sandbox use. Please use one of the test numbers documented at https://developer.squareup.com/docs/testing/test-values.",type:"VALIDATION_ERROR"},INVALID_STAGING_CARD_NUMBER:{field:"cardNumber",message:"Card number is not allowed in Staging. See: https://go/panfake-ui",type:"VALIDATION_ERROR"},MISSING_APPLICATION_ID:{message:"Missing applicationId",type:"MISSING_APPLICATION_ID"},MISSING_CARD_DATA:{message:"Missing card data",type:"MISSING_CARD_DATA"},UNKNOWN:{message:"An unknown error has occurred",type:"UNKNOWN"},UNSUPPORTED_CARD_BRAND:{field:"cardNumber",message:"Card not supported",type:"UNSUPPORTED_CARD_BRAND"}};!function(e){e.INVALID_VALUE="INVALID_VALUE",e.MISSING_LOCATION_ID_OR_NAME="MISSING_LOCATION_ID_OR_NAME",e.NOT_FOUND="NOT_FOUND",e.UNKNOWN="UNKNOWN"}(bo||(bo={}));class xo extends Zn{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("Internal Validation Error",e),this.errors=e,this.name="InternalValidationError",Object.setPrototypeOf(this,xo.prototype)}}function Uo(){return new Di([Lo.UNKNOWN])}!function(e){e.INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",e.NOT_FOUND="NOT_FOUND",e.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE",e.TOO_MANY_REQUESTS="TOO_MANY_REQUESTS",e.UNAUTHORIZED="UNAUTHORIZED",e.UNKNOWN="UNKNOWN"}(No||(No={}));var ko={message:"An internal error has occurred. Unable to complete the request.",type:"INTERNAL_SERVER_ERROR"},Mo={message:"The requested resource was not found.",type:"NOT_FOUND"},Ho={message:"The endpoint is currently unavailable.",type:"SERVICE_UNAVAILABLE"},Bo={message:"Too many requests in progress.",type:"TOO_MANY_REQUESTS"},Go={message:"Request not authorized.",type:"UNAUTHORIZED"},jo={message:"An unknown error has occurred",type:"UNKNOWN"};class qo extends Zn{constructor(e){super(e),this.name="InternalError",Object.setPrototypeOf(this,qo.prototype)}}class Fo extends Zn{constructor(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=function(e){var{STATUS_CODE:t}=ln;switch(e){case t.UNAUTHORIZED:return Go;case t.NOT_FOUND:return Mo;case t.TOO_MANY_REQUESTS:return Bo;case t.INTERNAL_SERVER_ERROR:return ko;case t.SERVICE_UNAVAILABLE:return Ho;default:return jo}}(t);super("".concat(i.message," (message=").concat(r,"; url=").concat(e,")"),n),this.name="InternalHttpError",Object.setPrototypeOf(this,Fo.prototype)}}class Vo extends Zn{constructor(e,t){super("".concat(e," (payment_method=").concat(t,")")),this.name="InternalPaymentMethodError",Object.setPrototypeOf(this,Vo.prototype)}}class Yo extends Zn{constructor(e,t,r){super("Request timeout exceeded (attempts=".concat(e,"; duration=").concat(t,"ms; url=").concat(r,")")),this.name="InternalTimeoutError",Object.setPrototypeOf(this,Yo.prototype)}}function zo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ko(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zo(Object(r),!0).forEach((function(t){Wo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Wo(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $o={HttpRequestTimeoutError:hn,HttpRequestInvalidJsonError:fn,HttpRequestNetworkError:gn,InternalError:qo,InternalHttpError:Fo,InternalPaymentMethodError:Vo,InternalTimeoutError:Yo,InternalValidationError:xo};function Qo(e){return Object.values($o).some((t=>e instanceof t))}var Zo,Jo,Xo,es,ts,rs,ns,is,os,ss,as,cs,us={AfterpayAmountOutsideLimitsError:ni,AfterpayMerchantError:oi,AfterpayRequestError:ri,AfterpayUnsupportedCurrencyError:ii,BrowserNotSupportedError:yi,ElementNotFoundError:ai,InvalidCurrencyFormatError:Ei,InvalidElementTypeError:Ii,InvalidEventListenerCallbackError:li,InvalidOptionError:di,InvalidPaymentRequestError:ci,InvalidPaymentRequestUpdateError:ui,PaymentMethodUnsupportedError:Oi,PlaidMissingNameError:pi,ScriptLoaderError:Pi,TokenizationError:Di,UnexpectedError:Li,VerifyBuyerError:hi,WebSdkEmbedError:vi},ls=Ko(Ko(Ko({},us),$o),{},{AfterpayInvalidPaymentRequestError:si,AfterpayOnTokenizeListenerError:ei,InvalidApplicationIdError:Jn,InvalidInputStylePropertyError:Ri,InvalidInputStyleValueError:wi,InvalidStylesError:Ni,PaymentMethodAlreadyAttachedError:_i,PaymentMethodAlreadyDestroyedError:Si,PaymentMethodMissingListener:ti,PaymentMethodNotAttachedError:Ai,SqError:Zn});(cs=Zo||(Zo={})).AttachStart="ATTACH:START",cs.AttachOK="ATTACH:OK",cs.AttachError="ATTACH:ERROR",cs.BuildStart="BUILD:START",cs.BuildOK="BUILD:OK",cs.BuildError="BUILD:ERROR",cs.CashAppAPICustomerStart="CASH_APP_API_CUSTOMER:START",cs.CashAppAPICustomerOK="CASH_APP_API_CUSTOMER:OK",cs.CashAppAPICustomerError="CASH_APP_API_CUSTOMER:ERROR",cs.CashAppAuthStart="CASH_APP_AUTH:START",cs.CashAppAuthOK="CASH_APP_AUTH:OK",cs.CashAppAuthError="CASH_APP_AUTH:ERROR",cs.CashAppPayClickValidating="CASH_APP_PAY_CLICK:VALIDATING",cs.CashAppPayClickInvalid="CASH_APP_PAY_CLICK:INVALID",cs.CashAppPayClickError="CASH_APP_PAY_CLICK:ERROR",cs.CashAppPayAuthStart="CASH_APP_PAY_AUTH:START",cs.FirstInteraction="FIRST_INTERACTION:OK",cs.PaymentsUILoadFirstScreenStart="LOAD_FIRST_SCREEN:START",cs.PaymentsUILoadFirstScreenOK="LOAD_FIRST_SCREEN:OK",cs.PaymentsUITransitionToStart="TRANSITION_TO:START",cs.PaymentsUITransitionToOK="TRANSITION_TO:OK",cs.PaymentsUITransitionBackStart="TRANSITION_BACK:START",cs.PaymentsUITransitionBackOK="TRANSITION_BACK:OK",cs.GetProductInformationStart="GET_PRODUCT_INFORMATION:START",cs.GetProductInformationOK="GET_PRODUCT_INFORMATION:OK",cs.GetProductInformationError="GET_PRODUCT_INFORMATION:ERROR",cs.InitializeStart="INITIALIZATION:START",cs.InitializeOK="INITIALIZATION:OK",cs.InitializeError="INITIALIZATION:ERROR",cs.LoadOK="LOAD:OK",cs.MainIframeOK="MAIN_IFRAME:OK",cs.NonceStart="NONCE:START",cs.NonceOK="NONCE:OK",cs.NonceError="NONCE:ERROR",cs.VerificationStart="VERIFICATION:START",cs.VerificationOK="VERIFICATION:OK",cs.VerificationError="VERIFICATION:ERROR",cs.AchMissingRequiredOAuthParameters="ACH_MISSING_REQUIRED_OAUTH_PARAMETERS",(as=Jo||(Jo={})).ExternalSessionStart="EXTERNAL_SESSION:START",as.ExternalSessionOK="EXTERNAL_SESSION:OK",as.ExternalSessionError="EXTERNAL_SESSION:ERROR",as.ExternalSessionCancel="EXTERNAL_SESSION:CANCEL",as.ShippingAddressChangeOK="SHIPPING_ADDRESS_CHANGE:OK",as.ShippingOptionChangeOK="SHIPPING_OPTION_CHANGE:OK",as.AfterpayCreateCheckoutStart="AFTERPAY_CREATE_CHECKOUT:START",as.AfterpayCreateCheckoutOK="AFTERPAY_CREATE_CHECKOUT:OK",as.AfterpayCreateCheckoutError="AFTERPAY_CREATE_CHECKOUT:ERROR",function(e){e.Clear="CLEAR",e.ConfigUpdated="CONFIG_UPDATED",e.Configured="CONFIGURED",e.PaymentsUIConfigured="PAYMENTS_UI_CONFIGURED",e.Destroyed="DESTROYED",e.Detached="DETACHED",e.EventListenerAdded="EVENT_LISTENER_ADDED",e.EventListenerOnCompleteResponse="EVENT_LISTENER_ON_COMPLETE_RESPONSE",e.Focused="FOCUSED",e.OverrideStrings="OVERRIDE_STRINGS",e.RecalculatedSize="RECALCULATED_SIZE",e.SetLocale="SET_LOCALE",e.SetError="SET_ERROR"}(Xo||(Xo={})),function(e){e.IframeMessengerTimeoutError="IFRAME_MESSENGER_TIMEOUT_ERROR"}(es||(es={})),function(e){e.ExperimentInteraction="EXPERIMENT_INTERACTION"}(ts||(ts={})),function(e){e.CASH_APP_API_CUSTOMER="CASH_APP_API_CUSTOMER",e.CASH_APP_AUTH="CASH_APP_AUTH",e.GET_PRODUCT_INFORMATION="GET_PRODUCT_INFORMATION",e.LOAD="LOAD",e.MAIN_IFRAME="MAIN_IFRAME",e.NONCE="NONCE"}(rs||(rs={})),function(e){e.ATTACH="ATTACH",e.BUILD="BUILD",e.INITIALIZATION="INITIALIZATION"}(ns||(ns={})),function(e){e.START="START",e.OK="OK",e.ERROR="ERROR"}(is||(is={})),(ss=os||(os={})).Ach="ACH",ss.Afterpay="Afterpay",ss.App="WebSDK",ss.ApplePay="Apple Pay",ss.Card="Card",ss.CashApp="Cash App",ss.CashAppPayV1="Cash App Pay V1",ss.GooglePay="Google Pay",ss.Masterpass="Masterpass",ss.GiftCard="Gift Card",ss.Fields="Fields",ss.PaymentRequest="Payment Request",ss.PaymentsUI="Payments UI";var ds,ps={CARD_NONCE_ENDPOINT:new RegExp(_.CARD_NONCE_ENDPOINT),CASH_APP_API_CUSTOMER:new RegExp(_.CASH_APP_API_CUSTOMER),CASH_APP_AUTH_ENDPOINT:new RegExp(_.CASH_APP_AUTH_ENDPOINT),GET_PRODUCT_INFORMATION_ENDPOINT:new RegExp(_.GET_PRODUCT_INFORMATION_ENDPOINT),LIBRARY_RESOURCE:new RegExp("".concat(_.ASSET_BASE_URL,"/([\\w\\d.-]*/)?square").concat(_.APPENDED_FILE_NAME,"\\.js")),MAIN_IFRAME_RESOURCE:new RegExp("".concat(_.ASSET_URL,"/main-iframe").concat(_.APPENDED_FILE_NAME))};!function(e){e.navigation="navigation",e.fetch="fetch",e.iframe="iframe",e.script="script"}(ds||(ds={}));var hs=new Set(Object.values(Xo)),fs=new Set([Zo.InitializeOK,ts.ExperimentInteraction,es.IframeMessengerTimeoutError]);r(4765);var gs,ms,Es,ys,vs,_s={hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",port:"",protocol:"",search:"",toString:()=>""};function As(){if(g.windowLocation===g.windowParentLocation)return g.windowLocation;var e=g.documentReferrer;return e&&0!==e.length?(gs||(gs=document.createElement("a")),gs.href="".concat(e),{hash:gs.hash,host:gs.host,hostname:gs.hostname,href:gs.href,origin:gs.origin,pathname:gs.pathname,port:gs.port,protocol:gs.protocol,search:gs.search,toString(){return this.href}}):_s}r(6699),r(2023);class Ss{constructor(e){this.options=e}format(e){var t=e;return void 0!==this.options.regexp&&void 0!==this.options.replacement&&(this.options.replacement,t=e.replace(this.options.regexp,this.options.replacement)),t.slice(0,this.options.maxLength)}}function Is(e,t){var r={};return Object.keys(e).forEach((n=>{"object"==typeof e[n]&&!Array.isArray(e[n])&&t[n]?r[n]=Is(e[n],t[n]):r[n]=t[n]||e[n]})),r}(vs=ms||(ms={})).CA="CA",vs.GB="GB",vs.US="US",function(e){e.en="en",e.ja="ja",e.fr="fr",e.es="es"}(Es||(Es={})),function(e){e.enUS="en-US",e.enIE="en-IE",e.enCA="en-CA",e.enGB="en-GB",e.enAU="en-AU",e.jaJP="ja-JP",e.frFR="fr-FR",e.frCA="fr-CA",e.esES="es-ES"}(ys||(ys={}));var Cs={"en-AU":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid ZIP code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"en-CA":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"en-GB":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid ZIP code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the zip code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected delivery contact. Please try again.",optionsError:"There was an error processing your selected delivery option. Please try again."}}}},"en-IE":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiry date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiry date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected delivery contact. Please try again.",optionsError:"There was an error processing your selected delivery option. Please try again."}}}},"en-US":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the zip code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"es-ES":{paymentMethods:{afterpay:{checkoutWidget:{title:"Tus 4 pagos sin intereses",today:"Hoy",weeks:"semanas"}},cards:{errors:{cardNumberError:"Introduce un nÃºmero de tarjeta vÃ¡lido.",cvvError:"Introduce un cÃ³digo de seguridad vÃ¡lido.",expirationDateError:"Introduce una fecha de caducidad vÃ¡lida.",multipleErrors:"Corrige los errores resaltados.",postalCodeErrors:{CA:"Introduce un cÃ³digo postal vÃ¡lido.",GB:"Introduce un cÃ³digo postal vÃ¡lido.",US:"Introduce un cÃ³digo postal vÃ¡lido."}},helperText:{cardNumber:"Introduce tu nÃºmero de tarjeta",cvv:"Introduce el cÃ³digo de seguridad",expirationDate:"Introduce la fecha de caducidad",postalCodes:{CA:"Introduce el cÃ³digo postal",GB:"Introduce el cÃ³digo postal",US:"Introduce el cÃ³digo postal"}},placeholderText:{cardNumber:"NÃºmero de tarjeta",cvv:"CÃ³digo CVV",expirationDate:"MM/AA",postalCodes:{CA:"CÃ³digo postal",GB:"CÃ³digo postal",US:"C.P."}}},giftCards:{errors:{giftCardNumberError:"Introduce un nÃºmero de tarjeta regalo vÃ¡lido."},helperText:{giftCardNumber:"Introduce el nÃºmero de tu tarjeta regalo"},placeholderText:{giftCardNumber:"Tarjeta regalo"}},wallets:{callbackErrors:{contactError:"Se ha producido un error al procesar el contacto de envÃ­o que has seleccionado. IntÃ©ntalo de nuevo.",optionsError:"Se ha producido un error al procesar la opciÃ³n de envÃ­o que has seleccionado. IntÃ©ntalo de nuevo."}}}},"fr-CA":{paymentMethods:{cards:{errors:{cardNumberError:"Saisissez un numÃ©ro de carte valide.",cvvError:"Veuillez saisir un code de sÃ©curitÃ© valide.",expirationDateError:"Veuillez saisir une date dâ€™expiration valide.",multipleErrors:"Corrigez les erreurs mises en Ã©vidence.",postalCodeErrors:{CA:"Saisissez un code postal valide.",GB:"Saisissez un code postal valide.",US:"Saisissez un code postal valide."}},helperText:{cardNumber:"Saisir votre numÃ©ro de carte",cvv:"Saisir le code de sÃ©curitÃ©",expirationDate:"Saisir la date dâ€™expiration",postalCodes:{CA:"Saisir le code postal",GB:"Saisir le code postal",US:"Saisir le code postal"}},placeholderText:{cardNumber:"NumÃ©ro de la carte",cvv:"CVV",expirationDate:"MM/AA",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code postal"}}},giftCards:{errors:{giftCardNumberError:"Saisissez un numÃ©ro de carte-cadeau valide."},helperText:{giftCardNumber:"Saisir le numÃ©ro de votre carte cadeau"},placeholderText:{giftCardNumber:"Carte-cadeau"}},afterpay:{checkoutWidget:{title:"Vos quatre paiements sans intÃ©rÃªts",today:"Aujourdâ€™hui",weeks:"semaines"}},wallets:{callbackErrors:{contactError:"Une erreur sâ€˜est produite lors du traitement du contact de livraison sÃ©lectionnÃ©. Veuillez rÃ©essayer.",optionsError:"Une erreur sâ€˜est produite lors du traitement de lâ€˜option dâ€˜expÃ©dition sÃ©lectionnÃ©e. Veuillez rÃ©essayer."}}}},"fr-FR":{paymentMethods:{afterpay:{checkoutWidget:{title:"Vos quatre paiements sans intÃ©rÃªts",today:"Aujourdâ€™hui",weeks:"semaines"}},cards:{errors:{cardNumberError:"Saisissez un numÃ©ro de carte valide",cvvError:"Veuillez saisir un code de sÃ©curitÃ© valide.",expirationDateError:"Saisir une date dâ€™expiration valide",multipleErrors:"Corrigez les erreurs mises en Ã©vidence.",postalCodeErrors:{CA:"Saisissez un code postal valide",GB:"Saisissez un code postal valide",US:"Saisissez un code ZIP valide"}},helperText:{cardNumber:"Saisir votre numÃ©ro de carte",cvv:"Saisir le code de sÃ©curitÃ©",expirationDate:"Saisir la date dâ€™expiration",postalCodes:{CA:"Saisir un code postal",GB:"Saisir un code postal",US:"Saisir un code ZIP"}},placeholderText:{cardNumber:"NumÃ©ro de carte",expirationDate:"MM/AA",cvv:"CVV",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code ZIP"}}},giftCards:{errors:{giftCardNumberError:"Saisir un numÃ©ro de carte cadeau valide"},helperText:{giftCardNumber:"Saisir le numÃ©ro de votre carte cadeau"},placeholderText:{giftCardNumber:"Carte cadeau"}},wallets:{callbackErrors:{contactError:"Une erreur sâ€˜est produite lors du traitement du contact de livraison sÃ©lectionnÃ©. Veuillez rÃ©essayer.",optionsError:"Une erreur sâ€˜est produite lors du traitement de lâ€˜option dâ€˜expÃ©dition sÃ©lectionnÃ©e. Veuillez rÃ©essayer."}}}},"ja-JP":{paymentMethods:{afterpay:{checkoutWidget:{title:"ç„¡åˆ©æ¯ã®4å›žæ‰•ã„",today:"ä»Šæ—¥",weeks:"é€±é–“"}},cards:{errors:{cardNumberError:"æ­£ã—ã„ã‚«ãƒ¼ãƒ‰ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚",cvvError:"æœ‰åŠ¹ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚",expirationDateError:"æ­£ã—ã„æœ‰åŠ¹æœŸé™ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚",multipleErrors:"å¼·èª¿è¡¨ç¤ºã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ã‚’ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚",postalCodeErrors:{CA:"æ­£ã—ã„éƒµä¾¿ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚",GB:"æœ‰åŠ¹ãªéƒµä¾¿ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚",US:"æ­£ã—ã„ZIPã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"}},helperText:{cardNumber:"ã‚«ãƒ¼ãƒ‰ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",cvv:"ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",expirationDate:"æœ‰åŠ¹æœŸé™ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",postalCodes:{CA:"éƒµä¾¿ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",GB:"éƒµä¾¿ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",US:"ZIPã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"}},placeholderText:{cardNumber:"ã‚«ãƒ¼ãƒ‰ç•ªå·",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"éƒµä¾¿ç•ªå·",GB:"éƒµä¾¿ç•ªå·",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"æœ‰åŠ¹ãªã‚®ãƒ•ãƒˆã‚«ãƒ¼ãƒ‰ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"},helperText:{giftCardNumber:"ã‚®ãƒ•ãƒˆã‚«ãƒ¼ãƒ‰ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"},placeholderText:{giftCardNumber:"ã‚®ãƒ•ãƒˆã‚«ãƒ¼ãƒ‰"}},wallets:{callbackErrors:{contactError:"é¸æŠžã•ã‚ŒãŸé…é€ä½æ‰€ã‚’å‡¦ç†ã™ã‚‹éš›ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ã‚„ã‚Šç›´ã—ã¦ãã ã•ã„ã€‚",optionsError:"é¸æŠžã•ã‚ŒãŸé…é€æ–¹æ³•ã‚’å‡¦ç†ã™ã‚‹éš›ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ã‚„ã‚Šç›´ã—ã¦ãã ã•ã„ã€‚"}}}}},Os={en:ys.enUS,es:ys.esES,fr:ys.frFR,ja:ys.jaJP},Ts=Os[Es.en];class Ps{constructor(e){this.currentLocale=Ts,this.currentTranslations=Cs[this.currentLocale],this.setLocale(e)}setTranslationOverrides(e){this.translationOverrides=e}setLocale(e){var t=this.getLanguageFromLocale(e),r=this.getRegionFromLocale(e),n=this.currentLocale;if(Cs[e])this.currentLocale=e;else{if(!Es[t])return{message:"Locale ".concat(e," is not supported. Language ").concat(t," and region ").concat(r," are both unsupported."),newLocale:this.currentLocale,previousLocale:n};this.currentLocale=Os[t]}this.currentTranslations=Cs[this.currentLocale];var i=this.getRegionFromLocale(this.currentLocale);return r&&i&&r.toLowerCase()!==i.toLowerCase()?{message:"Locale ".concat(e," is not supported. Language ").concat(t," is supported, but region ").concat(r," is not. Falling back to ").concat(this.currentLocale,"."),newLocale:this.currentLocale,previousLocale:n}:{newLocale:this.currentLocale,previousLocale:n}}getCurrentLocale(){return this.currentLocale}getLocaleString(){return this.translationOverrides?Is(this.currentTranslations,this.translationOverrides):this.currentTranslations}getLanguageFromLocale(e){return e.split("-")[0]}getRegionFromLocale(e){return e.split("-")[1]}}var Rs="INVALID_VALUE",ws="SANITIZED",bs=new Set(["countryCode","currencyCode","requestBillingContact","requestShippingContact","lineItems","total","shippingOptions","shippingContact"]),Ns=new Set(["error","shippingErrors","lineItems","total","shippingOptions","taxLineItems","shippingLineItems","discounts"]),Ds=new Set([...Ns.values(),"eventName"]),Ls=new Set(["includeInputLabels","postalCode","style"]),xs=new Set(["includeInputLabels","style"]),Us=new Set(["lineItems","total","shippingOptions","shippingContact"]),ks=new Set(["buttonColor","buttonSizeMode","buttonType"]),Ms=new Set(["paymentRequestOptions","enableMethods","disableMethods","redirectURI","transactionId"]),Hs=new Set(["redirectURI","transactionId"]),Bs=new Set(["shape","size","values","theme","width"]),Gs=ta(Vn),js=ta(Tn),qs=ta(bn),Fs=ta(xn),Vs=ta(Pn),Ys=ta(wn),zs=ta(ys),Ks=ta(Hi),Ws=ta(Bi),$s=ta(Gi),Qs=ta($i),Zs=ta(Yi),Js=ta(Vi),Xs=ta(zi),ea=ta(Ki);function ta(e){return new Set(Object.values(e))}function ra(e){return JSON.stringify({value:e})}function na(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={};return Object.entries(e).forEach((e=>{var[o,s]=e;if(t.has(o)){var a=s;r.has(o)?a=ws:n[o]&&(a=n[o].has(s)?s:Rs),i[o]=a}})),JSON.stringify(i)}function ia(e){return na(e,Ms,Hs)}function oa(e){return na(e,Bs,void 0,{shape:Js,size:Zs,values:Xs,theme:Xs,width:ea})}var sa=function(e,t,r){switch(e){case Xo.Configured:case Xo.ConfigUpdated:return function(e,t){switch(e){case os.Card:case os.GiftCard:return function(e,t){return na(t,e===os.Card?Ls:xs)}(e,t);case os.GooglePay:return function(e){return na(e,ks,void 0,{buttonColor:Ks,buttonSizeMode:Ws,buttonType:$s})}(t);case os.PaymentRequest:return function(e){return na(e,bs,Us,{currencyCode:Qs})}(t);case os.PaymentsUI:return ia(t);case os.CashAppPayV1:return oa(t)}return Rs}(t,r);case Xo.PaymentsUIConfigured:return ia(r);case Xo.Focused:return ra(function(e,t){if("string"!=typeof t)return Rs;switch(e){case os.Card:if(Vs.has(t))return t;break;case os.GiftCard:if(Ys.has(t))return t}return Rs}(t,r));case Xo.SetLocale:return ra(function(e){return"string"!=typeof e?Rs:zs.has(e)?e:Rs}(r));case Xo.EventListenerAdded:return ra(function(e,t){if("string"!=typeof t)return Rs;switch(e){case os.Ach:if(Gs.has(t))return t;break;case os.Card:if(js.has(t))return t;break;case os.GiftCard:if(qs.has(t))return t;break;case os.PaymentRequest:if(Fs.has(t))return t}return Rs}(t,r));case Xo.EventListenerOnCompleteResponse:return function(e,t){return e===os.PaymentRequest?function(e){return na(e,Ds,Ns,{eventName:Fs})}(t):Rs}(t,r);case Xo.Destroyed:case Xo.RecalculatedSize:default:return""}};function aa(e,t){return null!==e.document.body&&void 0!==e.document.body&&null!==e.document.createNodeIterator(e.document.body,NodeFilter.SHOW_ELEMENT,{acceptNode:t}).nextNode()}function ca(e,t){return Boolean(e.querySelector(t))}function ua(e,t){return void 0!==e[t]}r(8559);var la=function(e){var t,r=ua(e,"angular"),n=ca(e.document,"[ng-version]")||ua(e,"getAllAngularRootElements")||ua(e,"getAngularVersion"),i=ua(e,"bootstrap"),o=ua(e,"Ember"),s=ua(e,"jQuery"),a=ca(e.document,'form[action*="paypal.com"]'),c=function(e){return aa(e,(function(e){return e.__k||e._component||e.__c?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),u=function(e){var t=ca(e.document,"*[data-reactroot]");if(t)return t;return aa(e,(function(e){return e._reactRootContainer?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),l=function(e){var t=ua(e,"__NUXT__")||ua(e,"$nuxt"),r=ua(e,"__VUE__");if(r||t)return r||t;return aa(e,(function(e){return e.__vue__?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),d={angular:n,angularJS:r,bootstrap:i,ember:o,jquery:s,nextJS:ua(e,"__NEXT_DATA__")&&void 0!==(null===(t=e.__NEXT_DATA__)||void 0===t?void 0:t.buildId),paypalBuyNow:a,preact:c,react:u,vue:l};return Object.fromEntries(Object.entries(d).filter((e=>{var[t,r]=e;return!0===r})))};function da(e,t){var r=g.windowPerformance;if(!r||"function"!=typeof r.getEntriesByType)return null;var n=function(e,t,r){var n=e.filter((e=>e.initiatorType===t&&r.test(e.name)));return n[n.length-1]}([...r.getEntriesByType("resource"),...r.getEntriesByType("navigation")],e,t);return n?Math.round(function(e){return e.duration>0?e.duration:Math.max(Math.trunc(e.responseEnd-e.startTime),0)}(n)):null}var pa=function(e){switch(e){case rs.CASH_APP_AUTH:return da(ds.fetch,ps.CASH_APP_AUTH_ENDPOINT);case rs.CASH_APP_API_CUSTOMER:return da(ds.fetch,ps.CASH_APP_API_CUSTOMER);case rs.GET_PRODUCT_INFORMATION:return da(ds.fetch,ps.GET_PRODUCT_INFORMATION_ENDPOINT);case rs.MAIN_IFRAME:return da(ds.navigation,ps.MAIN_IFRAME_RESOURCE);case rs.LOAD:return da(ds.script,ps.LIBRARY_RESOURCE);case rs.NONCE:return da(ds.fetch,ps.CARD_NONCE_ENDPOINT);default:return null}};function ha(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ha(Object(r),!0).forEach((function(t){ga(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ha(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ga(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ma,Ea=_.METRICS_URL,ya=_.METRICS_V2_URL;class va{constructor(e,t){this.sdkVersion=_.VERSION,this.jsFramework="",this.applicationData=t,this.manualTelemetryStarts={},this.metricsBuffer=[],this.errorLogger=e,this.disableBeacon=!1}setAvt(e){this.avt=e}logEvent(e,t,r,n,i){try{var o={origin:As().origin},s={innerHeight:g.windowInnerHeight,innerWidth:g.windowInnerWidth,language:g.windowNavigationLanguage},a=this.eventDuration(e,n),{event:c,eventSource:u,eventConfigurationValues:l,internalConfigurationValues:d}=e,p=this.sdkVersion,h=this.metricsSession(t,r,i),f={appLocation:o,avt:this.avt,browserData:s,event:c,eventSource:u,paymentMethodTrackingId:n,sdkVersion:p,session:h};void 0!==l&&(E=c,hs.has(E))&&(f.eventConfigurationValues=sa(c,u,l)),void 0!==d&&function(e){return fs.has(e)}(c)&&(f.internalConfigurationValues=JSON.stringify(d)),a&&(f.duration=a),c===Zo.InitializeOK&&(f.jsFramework=this.getJSFrameworkValue());var m=!1;c!==Zo.NonceOK&&c!==Xo.Destroyed||(m=!0),this.postMetricsEvent(f,m)}catch(e){this.errorLogger.captureException(e)}var E}getJSFrameworkValue(){return 0===this.jsFramework.length&&(this.jsFramework=JSON.stringify(la(window))),this.jsFramework}eventDuration(e,t){var[r,n]=e.event.split(":");if(r in ns){var i;if(r===ns.INITIALIZATION?i=r:t&&(i="".concat(r,":").concat(t)),!i)return null;if(n===is.START){var o=Date.now();return this.manualTelemetryStarts[i]=o,null}if(n===is.OK||n===is.ERROR){var s=this.manualTelemetryStarts[i];return void 0===s?null:(delete this.manualTelemetryStarts[i],Date.now()-s)}}return n!==is.START&&r in rs?pa(r):null}postMetricsEvent(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!this.disableBeacon&&g.windowNavigationBeacon&&g.documentVisibilityState?(this.metricsBuffer.push(e),t&&this.buildAndSendBeacon(),void 0===this.currentInterval&&(document.addEventListener("visibilitychange",(()=>{"hidden"===g.documentVisibilityState&&(this.buildAndSendBeacon(),clearInterval(this.currentInterval),this.currentInterval=void 0)})),this.currentInterval=window.setInterval((()=>{this.buildAndSendBeacon()}),1e3))):Qn(Ea,{body:e}).catch((e=>{this.errorLogger.captureException(e)}))}buildAndSendBeacon(){if(0!==this.metricsBuffer.length){try{var e=new Blob([JSON.stringify({metrics:this.metricsBuffer})],{type:"text/plain;charset=UTF-8"});window.navigator.sendBeacon(ya,e)}catch(e){e instanceof TypeError&&"Illegal invocation"===e.message||this.errorLogger.captureException(e),this.disableBeacon=!0,void 0!==this.currentInterval&&(clearInterval(this.currentInterval),this.currentInterval=void 0),Qn(ya,{body:{metrics:this.metricsBuffer}}).catch((e=>{this.errorLogger.captureException(e)}))}this.metricsBuffer=[]}}metricsSession(e,t,r){return fa(fa({},this.applicationData),{},{instanceId:e,sessionId:t,paymentsUIInstanceId:r})}}!function(e){e.ACH="ACH",e.AFTERPAY="AFTERPAY",e.APPLE_PAY="APPLE_PAY",e.CASH_APP="CASH_APP",e.CASH_APP_PAY_V1="CASH_APP_PAY_V1",e.GOOGLE_PAY="GOOGLE_PAY"}(ma||(ma={})),_.HYDRATION_ENDPOINT;var _a,Aa,Sa="INITIALIZE",Ia="UPDATE_SESSION",Ca={[vo.CanUseInterac]:{false:_o.Control,true:_o.TreatmentA},[vo.CanUseOverrideStrings]:{false:_o.Control,true:_o.TreatmentA},[vo.CanUsePaymentsUI]:{false:_o.Control,true:_o.TreatmentA},[vo.PaymentsUICanUseCard]:{false:_o.Control,true:_o.TreatmentA},[vo.PaymentsUICanUseAchPlaid]:{false:_o.Control,true:_o.TreatmentA},[vo.PaymentsUICanUseApplePay]:{false:_o.Control,true:_o.TreatmentA},[vo.PaymentsUICanUseGooglePay]:{false:_o.Control,true:_o.TreatmentA},[vo.PaymentsUICanUseCashApp]:{false:_o.Control,true:_o.TreatmentA},[vo.PaymentsUICanUseBnplA]:{false:_o.Control,true:_o.TreatmentA},[vo.PaymentsUICanUseGiftCard]:{false:_o.Control,true:_o.TreatmentA},[vo.CanUseBNPLA]:{false:_o.Control,true:_o.TreatmentA},[vo.RecordErrorMetrics]:{false:_o.Control,true:_o.TreatmentA},[vo.CanUseAchAuth]:{[Ao.NoSupport]:_o.Control,[Ao.Supported]:_o.TreatmentA,[Ao.Required]:_o.TreatmentA}};class Oa{constructor(e){this.featureFlagValues=e}isActive(e){return this.experimentGroup(e)!==_o.Control}experimentGroup(e){return this.featureFlagValueExperimentGroup(e)}featureFlagValueExperimentGroup(e){var t=this.featureFlagValues[e];return Ca[e][t]||_o.Control}}!function(e){e.AFTERPAY="square-payments-afterpay-script",e.AFTERPAY_MESSAGING="square-payments-afterpay-messaging-script",e.ANALYTICS="square-payments-analytics-link-script",e.GOOGLE="square-payments-google-link-script",e.PLAID="square-payments-plaid-link-script",e.CASH_APP_PAY="square-payments-cash-app-pay-script"}(_a||(_a={})),function(e){e.AFTERPAY="window.AfterPay",e.AFTERPAY_MESSAGING="window.Afterpay",e.ANALYTICS="window.Square.Analytics",e.GOOGLE="window.google.payments",e.PLAID="window.Plaid",e.CASH_APP_PAY="window.CashApp"}(Aa||(Aa={}));var Ta={};function Pa(e,t,r,n){var i=n();if(i)return Promise.resolve(i);if(Ta[t])return Ta[t];var o=document.createElement("script");return o.id=e,o.src=r,Ta[t]=new Promise(((i,s)=>{o.onload=()=>{var o=n();if(o)i(o);else{Ra(t,e);var a="".concat(t," is undefined");s(new Pi(r,a))}},o.onerror=(n,i,o,a,c)=>{Ra(t,e),s(new Pi(r,"Unknown error occured",c))}})),document.body.appendChild(o),Ta[t]}function Ra(e,t){delete Ta[e];var r=document.getElementById(t);r&&r.remove()}var wa,ba=function(){return Pa(_a.AFTERPAY,Aa.AFTERPAY,_.AFTERPAY_SCRIPT_URL,(()=>{var e;return null===(e=window)||void 0===e?void 0:e.AfterPay}))},Na=function(){return Pa(_a.AFTERPAY_MESSAGING,Aa.AFTERPAY_MESSAGING,_.AFTERPAY_MESSAGING_SCRIPT_URL,(()=>{var e;return null===(e=window)||void 0===e?void 0:e.Afterpay}))},Da=function(){return Pa(_a.ANALYTICS,Aa.ANALYTICS,_.ANALYTICS_PUBLIC_ENDPOINT,(()=>{var e,t;return null===(e=window)||void 0===e||null===(t=e.Square)||void 0===t?void 0:t.Analytics}))},La=function(){return Pa(_a.CASH_APP_PAY,Aa.CASH_APP_PAY,_.CASH_APP_PAY_SCRIPT_URL,(()=>{var e;return null===(e=window)||void 0===e?void 0:e.CashApp}))},xa=function(){return Pa(_a.GOOGLE,Aa.GOOGLE,_.GOOGLE_PAY_SCRIPT_URL,(()=>{var e,t;return null===(e=window)||void 0===e||null===(t=e.google)||void 0===t?void 0:t.payments}))},Ua=function(){return Pa(_a.PLAID,Aa.PLAID,_.PLAID_LINK_SCRIPT_URL,(()=>{var e;return null===(e=window)||void 0===e?void 0:e.Plaid}))};function ka(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ma(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ka(Object(r),!0).forEach((function(t){Ha(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ka(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ha(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ba(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Ga(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Ba(o,n,i,s,a,"next",e)}function a(e){Ba(o,n,i,s,a,"throw",e)}s(void 0)}))}}var ja=po.hoursToMs(2);function qa(e){var{applicationId:t,locationId:r}=e;return wa||(wa=Da().then((e=>new e(t,{locationId:r}))))}function Fa(e){return function(e){return"region"in e||"country"in e||"countryName"in e}(e)?e:{addressLines:e.addressLines,familyName:e.familyName,givenName:e.givenName,email:e.email,country:e.countryCode,phone:e.phone,postalCode:e.postalCode,region:e.state,city:e.city}}function Va(){return Va=Ga((function*(e){var t=yield qa(e);return new Promise((e=>{t.getToken(e)}))})),Va.apply(this,arguments)}var Ya={analyticsLibrary:qa,getToken:function(e){return Va.apply(this,arguments)},resetLibraryCache:function(){wa=void 0},verifyBuyer:function(e,t,r){var n=Ma(Ma({},r),{},{billingContact:Fa(r.billingContact)});return new Promise(((r,i)=>{e.verifyBuyer(t,n,((e,t)=>{e?i(e):r(t)}))}))},toSqContact:Fa};function za(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}var Ka,Wa="LOCALE_CHANGED_EVENT";class $a extends class{constructor(e,t){this.errorLogger=e,this.messenger=t}}{constructor(e,t,r,n,i,o,s,a){super(e,t),this.session=n,this.localeStrings=o,this.paymentMethodSupportDetail=i,this.metricsHandler=r,this.eventTarget=s,this.featureFlagHandler=new Oa(a),this.featureFlagValues=a}addLocaleChangedListener(e){this.eventTarget.addEventListener(Wa,e)}removeLocaleChangedListener(e){this.eventTarget.removeEventListener(Wa,e)}getSession(){return this.session.serialize()}getFeatureFlagValues(){return this.featureFlagValues}getLocaleString(){return this.localeStrings.getLocaleString()}setTranslationOverrides(e){this.localeStrings.setTranslationOverrides(e),this.session.setTranslationOverrides(e),this.eventTarget.dispatchEvent(Wa,this.localeStrings.getCurrentLocale()),this.messenger.sendOneWayMessage(Ia,{session:this.session.serialize()})}setLocale(e){var t=this.localeStrings.setLocale(e);if(t.previousLocale===t.newLocale)return t;var r=this.localeStrings.getCurrentLocale();return this.session.setLocale(r),this.eventTarget.dispatchEvent(Wa,r),this.messenger.sendOneWayMessage(Ia,{session:this.session.serialize()}),t}updateSession(e){var t,r=this;return(t=function*(){r.session.setSessionId(e);try{var t=yield Ya.getToken({applicationId:r.session.applicationId,locationId:r.session.locationId,websiteUrl:r.session.sourceUrl});r.errorLogger instanceof Po&&r.errorLogger.setSessionId(e),r.session.setAnalyticsToken(t)}catch(e){r.session.locationId&&r.errorLogger.captureException(e)}yield r.messenger.sendOneWayMessage(Ia,{session:r.session.serialize()})},function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(e){za(o,n,i,s,a,"next",e)}function a(e){za(o,n,i,s,a,"throw",e)}s(void 0)}))})()}setPaymentMethodTrackingId(e){this.metricsHandler.setPaymentMethodTrackingId(e)}setPaymentsUIInstanceId(e){this.session.setPaymentsUIInstanceId(e)}getPaymentMethodTrackingId(){return this.metricsHandler.getPaymentMethodTrackingId()}getPaymentsUIInstanceId(){return this.session.paymentsUIInstanceId}}function Qa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://developer.squareup.com/docs/api/paymentform".concat(e)}function Za(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://developer.squareup.com/docs/payment-form/add-digital-wallets/apple-pay".concat(e)}!function(e){e.APPLE_PAY_BROWSER_NOT_SUPPORTED="APPLE_PAY_BROWSER_NOT_SUPPORTED",e.APPLE_PAY_DEVICE_NOT_SUPPORTED="APPLE_PAY_DEVICE_NOT_SUPPORTED",e.APPLE_PAY_NOT_REGISTERED="APPLE_PAY_NOT_REGISTERED",e.GOOGLE_PAY_BROWSER_NOT_SUPPORTED="GOOGLE_PAY_BROWSER_NOT_SUPPORTED",e.INVALID_CONFIG="INVALID_CONFIG",e.UNKNOWN="UNKNOWN",e.WALLET_NOT_REQUESTED="WALLET_NOT_REQUESTED"}(Ka||(Ka={}));var Ja,Xa={APPLE_PAY_BROWSER_NOT_SUPPORTED:{message:"Apple Pay is only available on Safari.",type:"BROWSER_NOT_SUPPORTED"},APPLE_PAY_DEVICE_NOT_SUPPORTED:{message:"Device does not support Apple Pay.\nSee:".concat(Za("#prerequisites-and-assumptions"),"."),type:"DEVICE_NOT_SUPPORTED"},APPLE_PAY_NOT_REGISTERED:{message:"No active card available in the Apple Wallet or domain not registered.",type:"NOT_REGISTERED"},GOOGLE_PAY_BROWSER_NOT_SUPPORTED:{message:"Browser does not support Google Pay. \nSee: ".concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://developer.squareup.com/docs/payment-form/add-digital-wallets/google-pay".concat(e)}("#prerequsites-and-assumptions")),type:"BROWSER_NOT_SUPPORTED"},INVALID_CONFIG:{message:"Configuration is invalid.",type:"INVALID_CONFIG"},UNKNOWN:{message:"An unknown error has occurred.",type:"UNKNOWN"},WALLET_NOT_REQUESTED:{message:"Wallet is not specified in the payment request config.\nSee:".concat(Qa("#paymentform-configurationfields")),type:"WALLET_NOT_REQUESTED"}};!function(e){e.COUNTRY_NOT_SUPPORTED="COUNTRY_NOT_SUPPORTED",e.APPLICATION_DISABLED="APPLICATION_DISABLED",e.MISSING_LOCATION_ID="MISSING_LOCATION_ID",e.UNVERIFIED_DOMAIN="UNVERIFIED_DOMAIN",e.NOT_ONBOARDED="NOT_ONBOARDED",e.US_AND_UK_MERCHANT_ONLY="US_AND_UK_MERCHANT_ONLY",e.US_MERCHANT_ONLY="US_MERCHANT_ONLY",e.INTERNAL_ERROR="INTERNAL_ERROR",e.DOMAIN_NOT_REGISTERED="DOMAIN_NOT_REGISTERED"}(Ja||(Ja={}));var ec={APPLICATION_DISABLED:{message:"Wallet is disabled for your application.",type:"APPLICATION_DISABLED"},COUNTRY_NOT_SUPPORTED:{message:"Wallet is not available in this merchant country.",type:"COUNTRY_NOT_SUPPORTED"},MISSING_LOCATION_ID:{field:"locationId",message:"Missing locationId in the payment request configuration.\nSee: ".concat(Qa("#paymentform-configurationfields")),type:"MISSING_LOCATION_ID"},NOT_ONBOARDED:{message:"Your merchant account has not yet been onboarded for this payment method. Please visit the Seller Dashboard to enable the payment method",type:"NOT_ONBOARDED"},UNVERIFIED_DOMAIN:{message:"Your website's domain is not verified for use with Apple Pay. Please visit the Square Developer Dashboard at https://developer.squareup.com/ to register your domain for use with Apple Pay",type:"UNVERIFIED_DOMAIN"},US_AND_UK_MERCHANT_ONLY:{message:"Wallet is available for US and UK merchants only.",type:"US_AND_UK_MERCHANT_ONLY"},US_MERCHANT_ONLY:{message:"Wallet is available for US merchants only.",type:"US_MERCHANT_ONLY"},INTERNAL_ERROR:{message:"There was a temporary error determining your website's payment method status",type:"INTERNAL_ERROR"},DOMAIN_NOT_REGISTERED:{message:"Your website's domain is not registered for use with Apple Pay.\nSee: ".concat(Za("#production-configuration")),type:"DOMAIN_NOT_REGISTERED"}};class tc extends Zn{constructor(e,t,r){var n="".concat(e," was called with a missing or invalid parameter. '").concat(t,"' is required");r&&(n+=" and must be a(n) ".concat(r)),super("".concat(n,".")),this.name="InvalidFunctionArgumentError",Object.setPrototypeOf(this,tc.prototype)}}class rc extends Zn{constructor(e){super("One or more of the arguments needed are missing or invalid."),this.argumentErrors=e,this.name="InvalidArgumentsError",Object.setPrototypeOf(this,rc.prototype)}}class nc{constructor(){this.listeners={}}addEventListener(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}removeEventListener(e,t){if(e in this.listeners)for(var r=this.listeners[e],n=0;n<r.length;n++)r[n]===t&&(r.splice(n,1),n--)}dispatchEvent(e,t){if(e in this.listeners)for(var r=new xi(e,t),n=[...this.listeners[e]],i=0,o=n.length;i<o;i++)try{n[i](r)}catch(e){console.error(e)}}hasEventListener(e){return e in this.listeners&&this.listeners[e].length>0}}var ic,oc,sc=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).slice(1)}return"".concat(e()+e(),"-").concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e()).concat(e()).concat(e())};!function(e){e.REQUEST_GOOGLE_PAY_CARD_NONCE="REQUEST_GOOGLE_PAY_CARD_NONCE",e.GENERATE_GOOGLE_PAY_AUTH_TOKEN="GENERATE_GOOGLE_PAY_AUTH_TOKEN"}(ic||(ic={}));class ac{constructor(e,t,r,n){this.metricsLogger=e,this.eventSource=r,this.session=t,this.paymentMethodTrackingId=n}logEvent(e,t){var r={event:e,eventSource:this.eventSource};void 0!==t&&(r.eventConfigurationValues=t);var{instanceId:n,sessionId:i,paymentsUIInstanceId:o}=this.session.serialize();return this.metricsLogger.logEvent(r,n,i,this.paymentMethodTrackingId,o)}setPaymentMethodTrackingId(e){this.paymentMethodTrackingId=e}getPaymentMethodTrackingId(){return this.paymentMethodTrackingId}}!function(e){e[e.DETACHED=0]="DETACHED",e[e.ATTACHED=1]="ATTACHED",e[e.DESTROYED=2]="DESTROYED"}(oc||(oc={}));class cc{constructor(e){this.status=oc.DETACHED,this.eventTarget=new nc,this.eventBuffer={},this.context=e}get session(){return this.context.getSession()}get messenger(){return this.context.messenger}get metricsHandler(){return this.context.metricsHandler}get errorLogger(){return this.context.errorLogger}get featureFlagHandler(){return this.context.featureFlagHandler}addEventListener(e,t){this.eventTarget.addEventListener(e,t),e in this.eventBuffer&&this.eventBuffer[e].length>0&&(this.eventBuffer[e].forEach((t=>this.eventTarget.dispatchEvent(e,t))),this.eventBuffer[e]=[])}hasEventListener(e){return this.eventTarget.hasEventListener(e)}removeEventListener(e,t){this.eventTarget.removeEventListener(e,t)}destroy(){return Promise.resolve(!0)}detach(){return Promise.resolve()}dispatchEvent(e,t){this.hasEventListener(e)?this.eventTarget.dispatchEvent(e,t):(e in this.eventBuffer||(this.eventBuffer[e]=[]),this.eventBuffer[e].push(t))}throwIfDestroyed(){if(this.status===oc.DESTROYED)throw new Si(this.methodType)}throwIfDestroyedOrAlreadyAttached(){if(this.throwIfDestroyed(),this.status===oc.ATTACHED)throw new _i(this.methodType)}throwIfDestroyedOrNotAttached(){if(this.throwIfDestroyed(),this.status!==oc.ATTACHED)throw new Ai(this.methodType)}}var uc,lc={message:"the tokenization request is already in process",type:"TOKENIZATION_IN_PROCESS"};function dc(e,t){var r=e;return e instanceof Zn||(r=new Zn,t.captureException(e)),{errors:[r],status:Un.ERROR}}class pc{constructor(e){this.id=sc(),this.context=e}request(e,t){return this.context.messenger.request(e,{featureFlagValues:this.context.getFeatureFlagValues(),paymentMethodInstanceId:this.id,paymentMethodTrackingId:this.context.getPaymentMethodTrackingId(),session:this.context.getSession(),body:t})}initializeMessageBus(e){var t=this,r=function(e){t.context.messenger.onMessage({listener(t){e(t)},messageType:"".concat(n,":").concat(t.id)})};for(var[n,i]of Object.entries(e))r(i)}}function hc(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function fc(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){hc(o,n,i,s,a,"next",e)}function a(e){hc(o,n,i,s,a,"throw",e)}s(void 0)}))}}!function(e){e.CREATE_OAUTH_PLAID_LINK_SESSION="CREATE_OAUTH_PLAID_LINK_SESSION",e.REQUEST_ACH_BANK_NONCE="REQUEST_ACH_BANK_NONCE"}(uc||(uc={}));var gc=new Set(["ITEM_ERROR"]),mc=new Set(["en","es"]),Ec="Square, Inc.",yc=["US"];function vc(e,t){var r=e.getSession();if(!r.locationId)throw new Li("locationId not defined when creating OAuth Plaid Link Session");var n=_.PLAID_OAUTH_REDIRECT_URI,i=g.windowNavigationLanguage.slice(0,2),o={createOAuthPlaidLinkSessionRequest:{clientId:r.applicationId,locationId:r.locationId,redirectUri:n,languageCode:i}};return t.request(uc.CREATE_OAUTH_PLAID_LINK_SESSION,o)}function _c(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Ac(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){_c(o,n,i,s,a,"next",e)}function a(e){_c(o,n,i,s,a,"throw",e)}s(void 0)}))}}var Sc={build(e,t,r){var n=t.getSession(),i=new pc(t),o=function(e,t,r){var n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};function o(r){return new Promise(((o,s)=>{var a=g.windowNavigationLanguage.split("-")[0];mc.has(a)||(a="en");var{errorLogger:c,metricsHandler:u}=t;n=e.create({clientName:Ec,countryCodes:yc,env:_.PLAID_LINK_ENV,language:a,onEvent:(e,t)=>{e!==Vn.ERROR||gc.has(t.error_type)||c.captureException(new Vo("PlaidErrorEvent: ".concat(JSON.stringify(t)),Ln.ACH)),i.onEvent&&i.onEvent(e,t)},onExit:(e,t)=>{e&&(u.logEvent(Jo.ExternalSessionError),gc.has(e.error_type)||c.captureException(new Vo("PlaidErrorOnExit: ".concat(JSON.stringify(e),", Metadata: ").concat(t),Ln.ACH))),o({kind:"canceled"})},onSuccess:(e,t)=>{if(!t||!t.accounts||!t.accounts[0]){u.logEvent(Jo.ExternalSessionError);var n=new Error("No account selected but expected account, metadata: ".concat(JSON.stringify(t)));return c.captureException(n),void s(n)}u.logEvent(Jo.ExternalSessionOK),o({kind:"success",publicToken:e,selectedBankAccountId:t.accounts[0].id,gringottsSessionToken:r.gringottsSessionToken})},product:["auth"],token:r.plaidLinkToken}),u.logEvent(Jo.ExternalSessionStart),n.open()}))}function s(){return a.apply(this,arguments)}function a(){return(a=fc((function*(){return o(yield vc(t,r))}))).apply(this,arguments)}function c(){n&&(n.exit({force:!0}),n.destroy(),n=void 0)}return{beginFlow:s,destroy:c}}(e,t,i,{onEvent:r});function s(){return(s=Ac((function*(e){var t=yield o.beginFlow();return"success"===t.kind?yield a(e.accountHolderName,t.publicToken,t.selectedBankAccountId,t.gringottsSessionToken):{status:Un.CANCEL}}))).apply(this,arguments)}function a(e,t,r,n){return c.apply(this,arguments)}function c(){return(c=Ac((function*(e,r,o,s){var a={accountHolderName:e,gringottsSessionToken:s,plaidPublicToken:r,selectedPlaidBankAccountId:o},c={bankNonceRequest:{clientId:n.applicationId,locationId:n.locationId,paymentMethodTrackingId:t.getPaymentMethodTrackingId(),plaidLinkData:a,sessionId:n.sessionId,websdkVersion:_.VERSION,websiteUrl:n.sourceUrl}};try{var u=yield i.request(uc.REQUEST_ACH_BANK_NONCE,c);return yield t.updateSession(u.sessionId),t.setPaymentMethodTrackingId(u.paymentMethodTrackingId),{status:Un.OK,bankNonce:u.bankNonce,accountDetails:u.accountDetails}}catch(e){throw e instanceof Di?e:new Di([Do.UNKNOWN])}}))).apply(this,arguments)}return Object.freeze({run:function(e){return s.apply(this,arguments)},destroy:function(){o.destroy()}})}};class Ic extends Error{constructor(e){super(e),this.name="InvalidAuthorizationParameter",Object.setPrototypeOf(this,Ic.prototype)}}Error;class Cc extends Error{constructor(e,t){super(`The listener provided for event type ${e} threw an error: ${t}`),this.name="InvalidEventListenerError",Object.setPrototypeOf(this,Cc.prototype)}}class Oc{constructor(){this.listeners={},this.eventBuffer={}}addEventListener(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t),e in this.eventBuffer&&this.eventBuffer[e].length>0&&(this.eventBuffer[e].forEach((e=>{this.dispatchEvent(e)})),this.eventBuffer[e]=[])}removeEventListener(e,t){if(!(e in this.listeners))return;const r=this.listeners[e];for(let e=0;e<r.length;e++)r[e]===t&&(r.splice(e,1),e--)}hasEventListener(e){return e in this.listeners&&this.listeners[e].length>0}dispatchEvent(e){if(this.hasEventListener(e.type)){const t=[...this.listeners[e.type]];for(let r=0,n=t.length;r<n;r++)try{t[r](e)}catch(t){throw new Cc(e.type,t.message)}}else e.type in this.eventBuffer||(this.eventBuffer[e.type]=[]),this.eventBuffer[e.type].push(e)}}class Tc{constructor(){this.eventTarget=new Oc}addEventListener(e,t){this.eventTarget.addEventListener(e,(e=>{t(e.detail)}))}dispatchEvent(e){this.eventTarget.dispatchEvent(new CustomEvent(e.type,{detail:e}))}}class Pc extends Error{constructor(){super("Buyer canceled the authorization flow"),this.name="BuyerCanceledError",Object.setPrototypeOf(this,Pc.prototype)}}const Rc=function(e){const t=document.createElement("iframe");return new Promise(((r,n)=>{t.onerror=e=>{n(e)},t.onload=()=>{r(t)},t.setAttribute("id","ach-auth-enclave"),t.setAttribute("width","100%"),t.setAttribute("height","100%"),t.setAttribute("style","position: fixed; inset: 0px; z-index: 2147483647; border-width: 0px; display: block; overflow: hidden auto;"),t.setAttribute("src",`${e}/ach-authz-sdk/enclave.html`),document.body.append(t)}))},wc=function(e){e.parentElement?.removeChild(e)};class bc extends Error{constructor(e){super(e),this.name="IframeMessengerImplementationError",Object.setPrototypeOf(this,bc.prototype)}}class Nc extends Error{constructor(e){super(e),this.name="IframeMessengerInternalMessageError",Object.setPrototypeOf(this,Nc.prototype)}}class Dc extends Error{constructor(e,t,r){super(r?`Messenger has not received an acknowledgement of message ${e} with id ${t} from iframe id=${r} which ${void 0!==document.getElementById(r)?.src?"exists":"does not exist"}`:`Messenger has not received an acknowledgement of message ${e} with id ${t}, no iframeID was set`),this.type=e,this.id=t,this.iframeID=r,this.name="IframeMessengerTimeoutError",Object.setPrototypeOf(this,Dc.prototype)}}const Lc="channel:connected",xc="channel:connecting",Uc="channel:close",kc="channel:error";class Mc{constructor(e){this.receiveMessage=e=>{switch(e.data){case this.messageWithName(xc):this.handleConnecting(e);break;case this.messageWithName(Lc):this.handleConnected();break;case this.messageWithName(Uc):this.close();break;case this.messageWithName(kc):break;default:this.handleMessage(e)}},this.connected=!1,this.listeners=[],this.messageBuffer=[],this.name=e?`:${e}`:""}set onmessage(e){this.listeners.push(e)}close(){this.port&&(this.postMessage(this.messageWithName(Uc)),this.port.close(),this.port=void 0,this.connected||window.removeEventListener("message",this.receiveMessage)),this.connected=!1}connect(e){if(this.connected)throw new bc("message channel is already connected");if(e){if(void 0===e.origin)throw new bc("message channel remote.origin must be defined");if(null===e.window)throw new bc("message channel remote.window cannot be null");const t=new MessageChannel;this.setupPort(t.port1),e.window.postMessage(this.messageWithName(xc),e.origin,[t.port2])}else window.addEventListener("message",this.receiveMessage)}setErrorHandler(e){this.errorHandler=e}postMessage(e){this.port&&this.connected?this.port.postMessage(e):this.messageBuffer.push(e)}handleConnecting(e){if(this.connected)throw new bc("message channel should not be connecting because already connected");window.removeEventListener("message",this.receiveMessage),e.ports[0]&&(this.setupPort(e.ports[0]),this.postMessage(this.messageWithName(Lc)),this.connectionEstablished())}handleConnected(){if(this.connected)throw new bc("message channel already connected");this.connectionEstablished()}connectionEstablished(){for(this.connected=!0;this.messageBuffer.length>0;)this.postMessage(this.messageBuffer.shift())}handleMessage(e){this.listeners.forEach((t=>{t(e)}))}setupPort(e){this.port=e,this.port.onmessage=this.receiveMessage,this.port.onmessageerror=e=>{this.postMessage(this.messageWithName(kc)),this.errorHandler&&this.errorHandler(new bc("message channel failed to deserialize message"),e)}}messageWithName(e){return e+this.name}}var Hc;!function(e){e.ACK="ack",e.OK="ok",e.ERROR="error"}(Hc||(Hc={}));class Bc{constructor(e={}){this.messageListeners={},this.channel=new Mc(e.name),this.channel.onmessage=this.handleMessage.bind(this),this.payloadSerializer=e.payloadSerializer,this.errorSerializer=e.errorSerializer}setErrorHandler(e){this.errorHandler=e,this.channel.setErrorHandler(e)}sendOneWayMessage(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:this.uniqueId(),mustAcknowledge:!1,mustRespond:!1,payload:r,type:e})}sendMessage(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:this.uniqueId(),mustAcknowledge:!0,mustRespond:!1,payload:r,type:e})}request(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:this.uniqueId(),mustAcknowledge:!0,mustRespond:!0,payload:r,type:e})}respond(e,t){const r=`${e.type}:${Hc.OK}`;let n=t;return void 0!==this.payloadSerializer&&(n=this.payloadSerializer.serialize(t)),this.postResponse(r,e,n)}reject(e,t){const r=`${e.type}:${Hc.ERROR}`;let n=t;return void 0!==this.errorSerializer&&(n=this.errorSerializer.serialize(t)),this.postResponse(r,e,n)}onMessage(e,t){const r=t||this.uniqueId();return this.addMessageEventListener(e,r),r}connect(e,t){this.iframeID=t,this.channel.connect(e)}close(){this.channel.close()}handleMessage(e){const t=this.messageListeners[e.data.type];e.data.type&&"undefined"!==e.data.type?t?(e.data.mustAcknowledge&&this.acknowledge(e.data),Object.values(t).forEach((t=>{t.forEach((t=>{t(e)}))}))):this.errorHandler&&this.errorHandler(new bc(`Listener does not exist for ${e.data.type}. Add one to your messenger instance:\n            messenger.onMessage({\n                    listener: (msg) => {},\n                    messageType: '${e.data.type}',\n                });\n          `),e):void 0!==this.errorHandler&&this.errorHandler(new Nc("Received a messenger message with an undefined type"),e)}logMessengerTimeout(e){const t=new Dc(e.type,e.id,this.iframeID);this.errorHandler&&this.errorHandler(t,new MessageEvent(e.type,{data:e}))}handleMessageContract(e){const t=this.errorSerializer,r=this.payloadSerializer;if(!e.mustAcknowledge)return new Promise((e=>{e({})}));let n;const i=()=>{[Hc.ACK,Hc.OK,Hc.ERROR].forEach((t=>{delete this.messageListeners[`${e.type}:${t}`][n]}))},o=window.setTimeout((()=>{this.logMessengerTimeout(e)}),1e4);return new Promise(((s,a)=>{n=this.onMessage({listener(){clearTimeout(o),e.mustRespond||(i(),s({}))},messageType:`${e.type}:${Hc.ACK}`}),this.onMessage({listener(e){i();const{payload:t}=e.data;if(void 0!==r){const e=r.deserialize(t);s(e)}else s(t)},messageType:`${e.type}:${Hc.OK}`},n),this.onMessage({listener(e){i();const{payload:r}=e.data;if(void 0!==t){const e=t.deserialize(r);a(e)}else a(r)},messageType:`${e.type}:${Hc.ERROR}`},n)}))}acknowledge(e){const t=`${e.type}:${Hc.ACK}`;return this.message({id:e.id,mustAcknowledge:!1,mustRespond:!1,type:t})}postResponse(e,t,r){return this.message({id:t.id,mustAcknowledge:!0,mustRespond:!1,payload:r,type:e})}message(e){const t=this.handleMessageContract(e);return e.type&&"undefined"!==e.type||void 0===this.errorHandler||this.errorHandler(new Nc("attempting to send a messenger message with an undefined type")),this.channel.postMessage(e),t}addMessageEventListener(e,t){const{messageType:r,listener:n}=e;this.messageListeners[r]=this.messageListeners[r]||{};const i=this.messageListeners[r];i[t]||(i[t]=[]),i[t].push(n)}uniqueId(){return Date.now().toString()+Math.floor(8e3*Math.random())}}const Gc={get IFRAME_NAME(){return"ach_authz"}};var jc;!function(e){e.CAPTURE_AUTHORIZATION="CAPTURE_AUTHORIZATION"}(jc||(jc={}));const qc=function(){const e={name:Gc.IFRAME_NAME};return new Bc(e)},Fc=async function(e,t,r){e.connect({origin:r,window:t.contentWindow},t.id),await e.sendMessage("INITIALIZE")},Vc={build(e){const t=function(e){switch(e){case"production":return"https://web.squarecdn.com";case"sandbox":return"https://sandbox.web.squarecdn.com";case"development":return"https://localhost:1779";default:return"https://staging.web.squarecdn.com"}}(e),r=qc(),n=new Tc;return Promise.resolve(Object.freeze({captureAuthorization:async function(e){let i;try{!function(e){if(!e.idempotencyKey)throw new Ic("idempotencyKey is invalid");if(!e.applicationId)throw new Ic("applicationId is invalid");if(!e.locationId)throw new Ic("locationId is invalid");if(!e.bankNonce&&!e.bankAccountId)throw new Ic("one of bankNonce or bankAccountId needs to be provided");if(e.bankNonce&&e.bankAccountId)throw new Ic("only one of bankNonce or bankAccountId needs to be provided");if(!e.total)throw new Ic("total needs to be provided");if("number"!=typeof e.total.amount)throw new Ic("amount needs to be a number");if(!e.total.currencyCode)throw new Ic("total needs to be valid")}(e),i=await Rc(t),await Fc(r,i,t);const o=await r.request(jc.CAPTURE_AUTHORIZATION,e);n.dispatchEvent({type:"signed",token:o.token})}catch(e){e instanceof Pc?n.dispatchEvent({type:"canceled"}):n.dispatchEvent({type:"error",error:e})}i&&wc(i)},addEventListener:function(e,t){n.addEventListener(e,t)}}))}};var Yc;function zc(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Kc(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){zc(o,n,i,s,a,"next",e)}function a(e){zc(o,n,i,s,a,"throw",e)}s(void 0)}))}}!function(e){e.GBP="GBP",e.USD="USD"}(Yc||(Yc={}));var Wc,$c,Qc,Zc,Jc,Xc,eu,tu={build(e){var{env:t,transactionId:r,session:n,onSigned:i,onCanceled:o,onError:s}=e;function a(){return(a=Kc((function*(e){var a=yield Vc.build(t);return a.addEventListener("signed",(function(t){i(t.token,e.bankAccountDetails)})),a.addEventListener("canceled",o),a.addEventListener("error",(function(e){s(e.error)})),a.captureAuthorization({idempotencyKey:r,applicationId:n.applicationId,locationId:n.locationId,bankNonce:e.bankNonce,bankAccountId:e.bankAccountId,total:e.total})}))).apply(this,arguments)}return Object.freeze({run:function(e){return a.apply(this,arguments)}})}};function ru(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function nu(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){ru(o,n,i,s,a,"next",e)}function a(e){ru(o,n,i,s,a,"throw",e)}s(void 0)}))}}class iu extends cc{constructor(e,t,r){super(t),this.methodType=Ln.ACH,this.tokenizeInProgress=!1,this.wasFirstInteractionCalled=!1;try{!function(e){if(e&&e.length>0){var t;try{t=new URL(e)}catch(t){throw new mi("redirectURI",e,"Must be a valid URI")}if([...t.searchParams.values()].length>0)throw new mi("redirectURI",e,"URI must not contain query parameters");return!0}throw new mi("redirectURI","".concat(e),"Must be a valid URI")}(null==r?void 0:r.redirectURI)}catch(e){console.warn(e.message)}try{!function(e){if(e&&e.length>0){if(e.length>50)throw new mi("transactionId",e,"String must be between 1 and 50 characters");return!0}throw new mi("transactionId","".concat(e),"String must be between 1 and 50 characters")}(null==r?void 0:r.transactionId)}catch(e){console.warn(e.message)}var n=this.dispatchPlaidEvent.bind(this);this.plaidNonceFlow=Sc.build(e,this.context,n),this.achAuthFlow=tu.build({env:_.env,transactionId:(null==r?void 0:r.transactionId)||sc(),session:this.session,onSigned:this.dispatchSuccessfulTokenResult.bind(this),onCanceled:this.dispatchCancelResult.bind(this),onError:this.dispatchError.bind(this)})}tokenize(e){var t=this;return nu((function*(){try{if(t.throwIfDestroyed(),t.tokenizeInProgress)throw new Di([lc]);if(!e||!e.accountHolderName)throw new pi;if(!function(e,t){switch(t[vo.CanUseAchAuth]){case Ao.NoSupport:return ou(e);case Ao.Supported:return!0;case Ao.Required:return!ou(e);default:return!1}}(e,t.context.getFeatureFlagValues()))throw new di("Invalid parameter format for ACH tokenize");if(!t.hasEventListener(Vn.ON_TOKENIZATION)){var r="Add event listener for '".concat(Vn.ON_TOKENIZATION,"' before calling tokenize.");console.warn("".concat(r," This will result in an error when using the Plaid OAuth flow."))}if(t.tokenizeInProgress=!0,t.handleFirstInteraction(),function(e){return"intent"in e&&"charge"===e.intent}(e)&&e.bankAccountId)return t.achAuthFlow.run({bankAccountId:e.bankAccountId,total:e.total});var n=yield t.plaidNonceFlow.run(e);if(ou(e))switch(n.status){case Un.OK:var i=t.buildSuccessfulTokenResult(n.bankNonce,n.accountDetails);return t.dispatchTokenizationEvent(i),t.resetFirstInteraction(),i;case Un.CANCEL:var o=t.buildCancelTokenResult();return t.dispatchTokenizationEvent(o),o;default:throw new Li("Unexpected tokenize flow status")}return t.runAchAuthFlowBasedOnPlaidResult(n,e)}catch(e){throw t.dispatchError(e),e}finally{t.tokenizeInProgress=!1}}))()}destroy(){return this.status=oc.DESTROYED,this.metricsHandler.logEvent(Xo.Destroyed),this.plaidNonceFlow.destroy(),Promise.resolve(!0)}addEventListener(e,t){this.metricsHandler.logEvent(Xo.EventListenerAdded,e),super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}runAchAuthFlowBasedOnPlaidResult(e,t){var r=this;return nu((function*(){if(e.status===Un.CANCEL)r.dispatchTokenizationEvent(r.buildCancelTokenResult());else switch(t.intent){case"charge":yield r.achAuthFlow.run({bankNonce:e.bankNonce,total:t.total,bankAccountDetails:e.accountDetails});break;case"store":r.dispatchSuccessfulTokenResult(e.bankNonce,e.accountDetails);break;default:throw new di("Unsupported intent ".concat(t.intent,". Must be one of: charge, store"))}}))()}resetFirstInteraction(){this.wasFirstInteractionCalled=!1}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(Zo.FirstInteraction))}buildCancelTokenResult(){return{status:Un.CANCEL}}buildSuccessfulTokenResult(e,t){var r={status:Un.OK,token:e};return t&&(r.details={bankAccount:t,method:Ln.ACH}),r}dispatchCancelResult(){this.dispatchTokenizationEvent(this.buildCancelTokenResult())}dispatchSuccessfulTokenResult(e,t){this.resetFirstInteraction();var r=this.buildSuccessfulTokenResult(e,t);this.dispatchTokenizationEvent(r)}dispatchError(e){this.dispatchEvent(Vn.ON_TOKENIZATION,{error:e})}dispatchPlaidEvent(e,t){this.dispatchEvent(e,t)}dispatchTokenizationEvent(e){this.dispatchEvent(Vn.ON_TOKENIZATION,{tokenResult:e})}}function ou(e){return!("intent"in e)}r(5827),($c=Wc||(Wc={})).UNKNOWN="unknown",$c.AMERICAN_EXPRESS="americanExpress",$c.DISCOVER="discover",$c.DISCOVER_DINERS="discoverDiners",$c.JCB="JCB",$c.MASTER_CARD="masterCard",$c.UNION_PAY="unionPay",$c.VISA="visa",$c.SQUARE_GIFT_CARD_V2="squareGiftCardV2",$c.INTERAC="interac",$c.SQUARE_CAPITAL_CARD="squareCapitalCard",$c.EFTPOS="eftpos",Pn.CARD_NUMBER,Pn.CVV,Pn.EXPIRATION_DATE,Pn.POSTAL_CODE,(Xc=Qc||(Qc={})).CARD_BRAND_CHANGED="cardBrandChanged",Xc.ERROR_CLASS_ADDED="errorClassAdded",Xc.ERROR_CLASS_REMOVED="errorClassRemoved",Xc.FOCUS_CLASS_ADDED="focusClassAdded",Xc.FOCUS_CLASS_REMOVED="focusClassRemoved",Xc.POSTAL_CODE_CHANGED="postalCodeChanged",Xc.SET_POSTAL_COUNTRY="setPostalCountry",Xc.ESCAPE="escape",Xc.SUBMIT="submit",(Jc=Zc||(Zc={})).ERROR="error",Jc.FOCUS="focus",Jc.UNKNOWN="unknown",(eu||(eu={})).THIRD_PARTY_GIFT_CARD="thirdPartyGiftCard";class su{constructor(e){this.options=e}format(e){for(var t=[...e],r="",n=0;t.length>0;)r+=this.options.delimiterPositions.includes(n)?this.options.delimiter:t.shift(),n+=1;return r}}r(9494);class au{getName(){return"LuhnValdator"}isValid(e){var t=String(e).replace(/\D/g,"");if(!t)return!1;for(var r=0,n=!1,i=t.length-1;i>=0;i--){var o=Number.parseInt(t.charAt(i),10);r+=n?au.luhnDigits[o]:o,n=!n}return r%10==0}}au.luhnDigits=[0,2,4,6,8,1,3,5,7,9];var cu=new RegExp(/\D/g);new Ss({maxLength:15,regexp:cu,replacement:""}),new Ss({maxLength:19,regexp:cu,replacement:""}),new Ss({maxLength:14,regexp:cu,replacement:""}),new Ss({maxLength:16,regexp:cu,replacement:""}),new Ss({maxLength:16,regexp:cu,replacement:""}),new Ss({maxLength:16,regexp:cu,replacement:""}),new Ss({maxLength:16,regexp:cu,replacement:""}),new Ss({maxLength:19,regexp:cu,replacement:""}),new Ss({maxLength:16,regexp:cu,replacement:""}),new Ss({maxLength:255,regexp:new RegExp(/[^\dA-Za-z]/g),replacement:""}),new su({delimiter:" ",delimiterPositions:[4,11]}),new su({delimiter:" ",delimiterPositions:[4,9,14]}),new su({delimiter:" ",delimiterPositions:[4,11]}),new su({delimiter:" ",delimiterPositions:[4,9,14]}),new su({delimiter:" ",delimiterPositions:[4,9,14]}),new su({delimiter:" ",delimiterPositions:[4,9,14]}),new su({delimiter:" ",delimiterPositions:[4,9,14]}),new su({delimiter:" ",delimiterPositions:[4,9,14]}),new su({delimiter:" ",delimiterPositions:[4,9,14]}),_.GET_PRODUCT_INFORMATION_ENDPOINT;var uu="sq-focus",lu="sq-error",du=".".concat(uu),pu=".".concat(lu),hu="::placeholder";new qo("IFrame does not exist");var fu=["top","right","bottom","left"],gu=(r(3123),r(3210),/^\d+\/\d+$/),mu=/^#([\dA-Fa-f]{3}|[\dA-Fa-f]{6})$/,Eu=/^-\d*\.?\d+em$/,yu=/^-\d*\.?\d+pt$/,vu=/^-\d*\.?\d+px$/,_u=/^\d*\.?\d+em$/,Au=/^\d*\.?\d+%$/,Su=/^\d*\.?\d+pt$/,Iu=/^\d*\.?\d+px$/,Cu=/^\d*\.?\d+(?:dpi|dpcm|dppx|x)$/,Ou=/^rgb\((\s*\d{1,3},){2}\s*\d{1,3}\)$/,Tu=/^rgba\((\s*\d{1,3},){3}\s*(1|0*.\d*)\)$/,Pu=/\s(?![^(]*\))/,Ru=new Set(["screen","all","print","speech"]),wu=new Set(["and"]),bu=new Set(["not","only"]),Nu=new Set(["portrait","landscape"]),Du=new Set(["xx-small","x-small","small","medium","large","x-large","xx-large"]),Lu=new Set(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"]),xu=new Set([100,200,300,400,500,600,700,800,900]),Uu=new Set(["100","200","300","400","500","600","700","800","900","normal","bold","bolder","lighter"]),ku=new Set(["normal"]),Mu=new Set(["smaller","larger"]),Hu=new Set(["andale mono","arial","arial black","arial narrow","arial rounded mt bold","avant garde","baskerville","big caslon","bodoni mt","book antiqua","brush script mt","calibri","calisto mt","cambria","candara","century gothic","charcoal","comic sans ms","consolas","copperplate","copperplate gothic light","courier","courier new","cursive","didot","fantasy","franklin gothic medium","futura","garamond","geneva","georgia","gill sans","goudy old style","helvetica","helvetica neue","hoefler text","impact","lucida bright","lucida console","lucida grande","lucida sans unicode","lucida sans typewriter","monaco","monospace","optima","palatino","palatino linotype","papyrus","perpetua","rockwell","rockwell extra bold","sans-serif","segoe ui","serif","square market","square sans text","tahoma","times","times new roman","trebuchet ms","verdana"]),Bu=new Set(["none","antialiased","subpixel-antialiased"]),Gu=new Set(["grayscale","auto"]),ju=new Set(["none"]);function qu(e){return null!=e&&e.split(/, ?(?![^(]*\))/).every((e=>function(e){if(null==e)return!1;if("none"===e)return!0;var t=e.split(/ (?![^(]*\))/),r=0;if("inset"===t[0]&&(t.shift(),r++),"inset"===t[t.length-1]){if(r>0)return!1;t.pop()}for(var n=0;n<2;n++){var i=t.shift();if(void 0===i||!Wu(i))return!1}switch(t.length){case 0:return!0;case 1:return Zu(t[0])||Qu(t[0]);case 2:return Qu(t[0])&&(Zu(t[1])||$u(t[1]));case 3:return Qu(t[0])&&$u(t[1])&&Zu(t[2]);default:return!1}}(e)))}function Fu(e){return["border-box","content-box"].includes(e)}function Vu(e){return e.split(" ").every((e=>function(e){return 0===Number(e)||ul(e)||pl(e)}(e)))}function Yu(e){var t=e.split(" ");return!(0===t.length||t.length>4)&&t.every(zu)}function zu(e){return 0===Number(e)||ul(e)||pl(e)}function Ku(e){return 0===Number(e)||ul(e)||pl(e)||ll(e)||hl(e)}function Wu(e){return 0===Number(e)||cl(e)||dl(e)}function $u(e){return 0===Number(e)||cl(e)||dl(e)}function Qu(e){return 0===Number(e)||ul(e)||pl(e)}function Zu(e){return null!=e&&(function(e){return Lu.has(e.toLowerCase())}(e)||function(e){return mu.test(e)}(e)||function(e){return Ou.test(e)}(e)||function(e){return Tu.test(e)}(e))}function Ju(e){return null!=e&&(function(e){return Du.has(e.toLowerCase())}(e)||function(e){return Mu.has(e.toLowerCase())}(e)||ul(e)||fl(e)||pl(e)||gl(e))}function Xu(e){return null!==e&&e.split(", ").every((e=>{return t=e.toLowerCase().trim().replace(/["']+/g,""),Hu.has(t);var t}))}function el(e){var t=Number(e);return Number.isNaN(t)?Uu.has(e.toLowerCase()):xu.has(t)}function tl(e){return"normal"===e||dl(e)||function(e){return fl(e)||function(e){return yu.test(e)}(e)}(e)||cl(e)}function rl(e){var t=Number(e);return!Number.isNaN(t)&&t>=0||ku.has(e)||pl(e)||ul(e)||fl(e)||gl(e)}function nl(e){return Bu.has(e)}function il(e){return Gu.has(e)}function ol(e){return ju.has(e)}function sl(e){if(null===e)return!1;var t=e.toString().split(" ");return!(t.length>4)&&t.every((e=>function(e){return ul(e)||pl(e)||gl(e)||0===Number(e)}(e)))}function al(e){if(!e.startsWith("(")||!e.endsWith(")"))return!1;var t=e.slice(1,-1),[r,n]=t.split(/: */);switch(r){case"width":case"min-width":case"max-width":case"height":case"min-height":case"max-height":case"device-width":case"min-device-width":case"max-device-width":case"device-height":case"min-device-height":case"max-device-height":return ul(n)||pl(n)||gl(n);case"resolution":case"min-resolution":case"max-resolution":return function(e){return Cu.test(e)}(n);case"aspect-ratio":case"min-aspect-ratio":case"max-aspect-ratio":case"device-aspect-ratio":case"min-device-aspect-ratio":case"max-device-aspect-ratio":return function(e){return gu.test(e)}(n);case"color":case"color-index":case"monochrome":return void 0===n;case"min-color":case"max-color":case"min-color-index":case"max-color-index":case"min-monochrome":case"max-monochrome":return function(e){return Number(e)>=0}(n);case"orientation":return function(e){return Nu.has(e)}(n);default:return!1}}function cl(e){return ul(e)||ll(e)}function ul(e){return Iu.test(e)}function ll(e){return vu.test(e)}function dl(e){return pl(e)||hl(e)}function pl(e){return _u.test(e)}function hl(e){return Eu.test(e)}function fl(e){return Su.test(e)}function gl(e){return Au.test(e)}var ml=function(e,t){var r=(e=>{switch(e){case"border-color":case"background-color":case"color":case"-webkit-text-fill-color":return Zu;case"-webkit-box-shadow":case"box-shadow":return qu;case"box-sizing":return Fu;case"font-family":return Xu;case"font-size":return Ju;case"font-weight":return el;case"letter-spacing":return tl;case"line-height":return rl;case"padding":return sl;case"-webkit-font-smoothing":return nl;case"-moz-osx-font-smoothing":return il;case"display":return ol;case"border-radius":return Vu;case"border-width":return Yu;case"top":case"bottom":case"left":case"right":return Ku;case"width":return function(e){return e};default:return}})(e),n=r&&r(t)||function(e){return["unset","inherit","revert","initial"].includes(e)}(t);return n?t:""},El=function(e){return!!(t=e).startsWith("@media")&&t.slice("@media".length+1,t.length).split(/, */).every((e=>{var t=e.split(Pu);if(0===t.length)return!1;var r=0;if(!t[0].startsWith("(")){var n=0;if(bu.has(t[0])&&(n=1),t.length===n+1)return Ru.has(t[n]);if(!Ru.has(t[n])||!wu.has(t[n+1]))return!1;r=2+n}if((t.length-r)%2==0)return!1;for(var[i,o]of Object.entries(t.slice(r)))if(!(Number(i)%2==0?al(o):wu.has(o)))return!1;return!0}));var t};function yl(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r.length>0){var i=r.includes(e);if(!i)throw new Ri(e)}var o=Io.cssProperty(e),s=ml(o,t);if(0===s.length)throw new wi(e,t);return n&&(s+=" !important"),Io.formatCSSKeyValuePair(o,s)}function vl(e,t,r){var n=[],i=[],o=new Set(e.excludeProperties||[]);for(var[s,a]of Object.entries(t))if(!o.has(s)){var c=a||"";try{n.push(yl(s,c,r))}catch(e){i.push(e)}}if(i.length>0)throw new Ni(i);return Object.fromEntries(e.toSelectors.map((function(e){return[e,n]})))}function _l(e,t,r){var n={},i=[];if(e.forEach((function(e){var{property:o,setAsImportant:s,toProperty:a,toSelectors:c,transformPropertyValue:u}=e,l=t[o];if(l){var d=u?u(l):l;try{var p=yl(a||o,d,a?[...r,a]:r,s);c.forEach((e=>{n[e]||(n[e]=[]),n[e].push(p)}))}catch(e){i.push(e)}}})),i.length>0)throw new Ni(i);return n}function Al(e){var t=[];for(var[r,n]of Object.entries(e))n&&n.length>0&&t.push("\n      ".concat(r," { ").concat(n.join(" ")," }\n      "));return t.join("")}function Sl(e,t){return!t&&El(e)}var Il=function(e,t){var r=t.split(" ");switch(r.length){case 1:return r[0];case 2:switch(e){case"top":case"bottom":return r[0];default:return r[1]}case 3:switch(e){case"top":return r[0];case"bottom":return r[2];default:return r[1]}case 4:switch(e){case"top":return r[0];case"right":return r[1];case"bottom":return r[2];case"left":return r[3];default:return""}default:return""}},Cl=function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[],s=[...Object.keys(r.selectorMappings),...Object.keys(r.selectorPropertyMappings||{})],a=new Set(s),c=new Set(Object.values(n));Object.keys(t).forEach((e=>{c.has(e)||Sl(e,i)||o.push(new bi(e))}));var u={};function l(e){for(var[t,r]of Object.entries(e))u[t]||(u[t]=[]),u[t].push(...r)}for(var d of a){var p,h=t[d],f=r.allowedAttributes[d]||[],g=r.selectorMappings[d]||[],m=(null==r||null===(p=r.selectorPropertyMappings)||void 0===p?void 0:p[d])||[];if(h){try{var E=vl(g,h,f);l(E)}catch(e){e instanceof Ni&&o.push(...e.errors)}try{var y=_l(m,h,f);l(y)}catch(e){e instanceof Ni&&o.push(...e.errors)}}}var v=Object.keys(t).filter((e=>!a.has(e)&&El(e)));if(v.forEach((i=>{try{var s=e(t[i],r,n,!0);u[i]=[s]}catch(e){o.push(...e.errors)}})),o.length>0)throw new Ni(o);return Al(u)},Ol="sq-card-iframe-container",Tl="sq-card-wrapper",Pl="sq-card-component",Rl="sq-card-message",wl="sq-card-message-error",bl="sq-card-message-no-error",Nl="sq-visible",Dl=".".concat(Tl),Ll=".".concat(Pl),xl=".".concat(Ol),Ul="".concat(Dl).concat(du),kl="".concat(Dl).concat(pu),Ml="".concat(Dl," ").concat(Ll),Hl="".concat(Dl," ").concat(xl),Bl="".concat(Ul," ").concat(xl),Gl="".concat(kl," ").concat(xl),jl="input",ql="form",Fl="label",Vl=".sq-background-text",Yl=".sq-visible-background-text",zl=".sq-card-message-error::before",Kl=".sq-card-message-no-error::before",Wl="".concat(xl).concat("::before"),$l="".concat(ql).concat(du),Ql="".concat(ql).concat(pu),Zl=("".concat($l," ").concat(jl),"".concat(jl).concat(pu),"".concat($l," ").concat(jl).concat(hu),"".concat(Ql," ").concat(jl).concat(pu).concat(hu),"".concat(ql," ").concat(jl).concat(hu),"".concat(ql," ").concat(Vl)),Jl=("".concat(Zl," ").concat(Yl),"".concat($l," ").concat(Fl),"".concat(Ql," ").concat(jl).concat(pu," ~ ").concat(Fl),"".concat($l," ").concat(Vl," ").concat(Yl),"".concat(Ql," ").concat(jl).concat(pu," ~ ").concat(Vl," ").concat(Yl),"".concat(ql," ").concat("#card-number-wrapper"),["borderWidth"]);function Xl(e){var t=["".concat(e).concat(pu," ").concat(Wl),"".concat(e).concat(du," ").concat(Wl)];return fu.map((e=>{return{property:"borderWidth",toProperty:e,toSelectors:t,transformPropertyValue:(r=e,function(e){var t=Il(r,e);return"0"===t[0]?t:"-".concat(t)})};var r}))}function ed(e,t){return Cl(e,function(e){var t="#".concat(e);return{allowedAttributes:{[Rn.CARD_COMPONENT]:Qi,[Rn.CARD_COMPONENT_FOCUS]:Zi,[Rn.CARD_COMPONENT_ERROR]:Zi,[Rn.CARD_INPUT_HELPER_TEXT]:Ji,[Rn.CARD_INPUT_HELPER_ICON]:Xi,[Rn.CARD_INPUT_ERROR_TEXT]:Ji,[Rn.CARD_INPUT_ERROR_ICON]:Xi},selectorMappings:{[Rn.CARD_COMPONENT]:{toSelectors:["".concat(t).concat(Hl)]},[Rn.CARD_COMPONENT_FOCUS]:{excludeProperties:Jl,toSelectors:["".concat(t).concat(Bl)]},[Rn.CARD_COMPONENT_ERROR]:{excludeProperties:Jl,toSelectors:["".concat(t).concat(Gl)]},[Rn.CARD_INPUT_HELPER_TEXT]:{toSelectors:["".concat(t," ").concat(".sq-card-message-no-error")]},[Rn.CARD_INPUT_HELPER_ICON]:{toSelectors:["".concat(t," ").concat(Kl)]},[Rn.CARD_INPUT_ERROR_TEXT]:{toSelectors:["".concat(t," ").concat(".sq-card-message-error")]},[Rn.CARD_INPUT_ERROR_ICON]:{toSelectors:["".concat(t," ").concat(zl)]}},selectorPropertyMappings:{[Rn.CARD_INPUT]:[{property:"backgroundColor",toSelectors:["".concat(t).concat(Hl)]}],[Rn.CARD_COMPONENT]:[{property:"borderRadius",toSelectors:["".concat(t," ").concat(Wl),"".concat(t).concat(Ml)]},{property:"borderWidth",toProperty:"width",toSelectors:["".concat(t).concat(Hl)],transformPropertyValue:e=>function(e){var t=["left","right"].map((t=>{var r=Il(t,e);return"0"===r&&(r="0px"),r})).join(" + ");return"calc(100% - (".concat(t,"))")}(e)},...Xl(t)],[Rn.CARD_COMPONENT_ERROR]:[{property:"borderColor",toSelectors:["".concat(t).concat(pu," ").concat(Wl)]},{property:"borderWidth",toSelectors:["".concat(t).concat(pu," ").concat(Wl)]}],[Rn.CARD_COMPONENT_FOCUS]:[{property:"borderColor",toSelectors:["".concat(t).concat(du," ").concat(Wl)]},{property:"borderWidth",toSelectors:["".concat(t).concat(du," ").concat(Wl)]}],[Rn.CARD_INPUT_ERROR_ICON]:[{property:"color",toProperty:"backgroundColor",toSelectors:["".concat(t," ").concat(zl)]}],[Rn.CARD_INPUT_HELPER_ICON]:[{property:"color",toProperty:"backgroundColor",toSelectors:["".concat(t," ").concat(Kl)]}]}}}(t),Rn)}Rn.CARD_INPUT,Rn.CARD_INPUT_FOCUS,Rn.CARD_INPUT_ERROR,Rn.CARD_INPUT_PLACEHOLDER,Rn.CARD_INPUT_FOCUS_PLACEHOLDER,Rn.CARD_INPUT_ERROR_PLACEHOLDER,Rn.CARD_INPUT,Rn.CARD_INPUT_FOCUS,Rn.CARD_INPUT_ERROR,Rn.CARD_INPUT_FOCUS_PLACEHOLDER,Rn.CARD_INPUT_ERROR_PLACEHOLDER,Rn.CARD_INPUT_PLACEHOLDER,Rn.CARD_COMPONENT,Rn.CARD_INPUT,Rn.CARD_INPUT_PLACEHOLDER,Rn.CARD_INPUT_FOCUS_PLACEHOLDER,Rn.CARD_INPUT_ERROR_PLACEHOLDER;var td="background-text";"sq-".concat(td),"sq-hidden-".concat(td),"sq-visible-".concat(td),Pn.CARD_NUMBER,"0".repeat(24),Pn.EXPIRATION_DATE,"0".repeat(4),Pn.CVV,"0".repeat(4),Pn.POSTAL_CODE;var rd,nd=[Ri,wi,bi,Ni,_i,Si,Li],id=[Ai,bi,Ri,wi,Ni];_.CARD_NONCE_ENDPOINT,function(e){e.ANALYTICS_TOKEN="_analyticsToken",e.LOCALE="_locale",e.SESSION_ID="_sessionId",e.TRANSLATION_OVERRIDES="_translationOverrides",e.PAYMENTS_UI_INSTANCE_ID="_paymentsUIInstanceId"}(rd||(rd={}));class od{constructor(e){var{applePayMerchantIdentifier:t,cashAppPayMerchantIdentifier:r,applicationId:n,avt:i,hostname:o,locationId:s,instanceId:a,sessionId:c,sourceUrl:u,locale:l,paymentsUIInstanceId:d}=e;this.applicationId=n,this.locationId=s,this._sessionId=c,this.instanceId=a,this.applePayMerchantIdentifier=t,this.cashAppPayMerchantIdentifier=r,this.hostname=o,this.sourceUrl=u,this._locale=l,this.avt=i,this._paymentsUIInstanceId=d}get analyticsToken(){return this._analyticsToken}get paymentsUIInstanceId(){return this._paymentsUIInstanceId}get sessionId(){return this._sessionId}setSessionId(e){this.setAttribute(rd.SESSION_ID,e)}setTranslationOverrides(e){this.setAttribute(rd.TRANSLATION_OVERRIDES,e)}setLocale(e){this.setAttribute(rd.LOCALE,e)}setPaymentsUIInstanceId(e){this.setAttribute(rd.PAYMENTS_UI_INSTANCE_ID,e)}setAnalyticsToken(e){this.setAttribute(rd.ANALYTICS_TOKEN,e)}serialize(){return this.serialized||(this.serialized={applePayMerchantIdentifier:this.applePayMerchantIdentifier||"",cashAppPayMerchantIdentifier:this.cashAppPayMerchantIdentifier||"",applicationId:this.applicationId,avt:this.avt,hostname:this.hostname,instanceId:this.instanceId,locale:this._locale,locationId:this.locationId,sessionId:this._sessionId,sourceUrl:this.sourceUrl},this._analyticsToken&&(this.serialized.analyticsToken=this._analyticsToken),this._translationOverrides&&(this.serialized.translationOverrides=this._translationOverrides),this._paymentsUIInstanceId&&(this.serialized.paymentsUIInstanceId=this._paymentsUIInstanceId)),this.serialized}setAttribute(e,t){(this.isValueString(t)||e===rd.TRANSLATION_OVERRIDES)&&(this[e]=t),this.serialized=void 0}isValueString(e){return"string"==typeof e}}var sd,ad=[Di,Ai],cd=function(e,t){var r=document.createElement("iframe");return new Promise(((n,i)=>{r.onerror=e=>{i(e)},r.onload=()=>{n(r)},Object.entries(e).forEach((e=>{var[t,n]=e;r.setAttribute(t,n)})),t?t.appendChild(r):document.body.appendChild(r)}))},ud=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)};!function(e){e.CONFIGURE="configure",e.DESTROY="destroy",e.LOAD_CARDS_FORM="loadCardsForm",e.REQUEST_CARD_NONCE_IF_VALID_FORM="requestCardNonceIfValidForm",e.SET_FOCUS="setFocus",e.CLEAR="clear",e.SET_ERROR="setError"}(sd||(sd={}));var ld=new Set(["DIV","SPAN"]),dd=new Set(["DIV","SPAN"]),pd=new Set(["DIV","SPAN","BUTTON"]);function hd(e,t){var r;if(function(e){return"string"==typeof e}(e)){var n=document.querySelector(e);if(!n)throw new ai(e);r=n}else{if(!(e instanceof HTMLElement))throw new Ii(e,t);if(r=e,!document.contains(r))throw new ai(r)}if(!t.has(r.nodeName))throw new Ii(r,t);return r}function fd(e){return hd(e,ld)}function gd(e){return hd(e,pd)}var md={addStyleElement:function(e,t,r,n){if(md.hasExistingStyleElement(t))r&&r();else{var i=document.createElement("link");r&&(i.onload=r),n&&(i.onerror=t=>{n(new Error("Failed to load stylesheet at ".concat(e,". The onerror callback was invoked.")))}),i.href=e,i.rel="stylesheet",i.type="text/css",i.id=t,document.head.appendChild(i)}},hasExistingStyleElement:function(e){return Boolean(document.getElementById(e))}},Ed=md;function yd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yd(Object(r),!0).forEach((function(t){_d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ad(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Sd(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Ad(o,n,i,s,a,"next",e)}function a(e){Ad(o,n,i,s,a,"throw",e)}s(void 0)}))}}var Id="emptyMessage",Cd=[Pn.CARD_NUMBER,Pn.EXPIRATION_DATE,Pn.CVV,Pn.POSTAL_CODE];function Od(e){return"".concat("single-card-wrapper","-").concat(e)}function Td(e,t){var r=function(e){return"".concat("sq-single-card-custom-styles","-").concat(e)}(t),n=document.getElementById(r);null===n&&((n=document.createElement("style")).id=r,document.head.appendChild(n)),n.innerHTML=ed(e,Od(t))}var Pd=class extends cc{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.methodType=Ln.CARD,this.postalCountry=ms.US,this.onResize=this.onResize.bind(this),this.id=sc(),this.iframeName="".concat("single-card","-").concat(this.id),this.paymentMessenger=new pc(this.context),this.tokenizeInProcess=!1,this.inputLabelsIncluded=Boolean(t.includeInputLabels),this.initializeMessageBus(),this.errorList=new Set,this.updateCardDetailText=this.updateCardDetailText.bind(this),this.context.addLocaleChangedListener(this.updateCardDetailText),this.validateOptions(t),this.initialOptions=t,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t}))}configure(){var e=arguments,t=this;return Sd((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:{};t.throwIfDestroyedOrNotAttached(),t.validateOptions(r),t.metricsHandler.logEvent(Xo.ConfigUpdated,r),void 0!==r.includeInputLabels&&(t.inputLabelsIncluded=Boolean(r.includeInputLabels),t.onResize()),void 0!==r.style&&Td(r.style,t.id);try{return void(yield t.paymentMessenger.request(sd.CONFIGURE,{includeInputLabels:t.inputLabelsIncluded,postalCode:r.postalCode,style:r.style,type:t.methodType}))}catch(e){if(Io.isInstanceOf(e,id))throw e;throw t.errorLogger.captureException(e),new Li("configuring the Card Element")}}))()}attach(e){var t=this;return Sd((function*(){var r;t.throwIfDestroyedOrAlreadyAttached(),t.status=oc.ATTACHED,t.metricsHandler.logEvent(Zo.AttachStart),t.metricsHandler.logEvent(Xo.Configured,t.initialOptions);try{r=fd(e)}catch(e){throw t.metricsHandler.logEvent(Zo.AttachError),t.status===oc.ATTACHED&&(t.status=oc.DETACHED),e}try{return t.attachPromise=t.buildElementOnIframe(r),yield t.attachPromise,t.attachPromise=void 0,t.throwIfDestroyed(),t.element=r,window.addEventListener("resize",t.onResize),t.showCardElement(),t.onResize(),void t.metricsHandler.logEvent(Zo.AttachOK)}catch(e){if(t.status===oc.ATTACHED&&(t.status=oc.DETACHED),t.metricsHandler.logEvent(Zo.AttachError),Io.isInstanceOf(e,nd))throw e;throw t.errorLogger.captureException(e),new Li("attaching the Card Element")}}))()}detach(){return this.throwIfDestroyed(),this.detachElement(oc.DETACHED,Xo.Detached)}destroy(){var e=this;return Sd((function*(){if(e.status===oc.DESTROYED)return!1;var t=yield e.detachElement(oc.DESTROYED,Xo.Destroyed);return e.context.removeLocaleChangedListener(e.updateCardDetailText),t}))()}focus(e){var t=this;return Sd((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(Pn).includes(e))throw new fi(e);t.metricsHandler.logEvent(Xo.Focused,e);try{return yield t.paymentMessenger.request(sd.SET_FOCUS,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}clear(){var e=this;return Sd((function*(){e.throwIfDestroyedOrNotAttached();try{return yield e.paymentMessenger.request(sd.CLEAR)}catch(t){e.errorLogger.captureException(t)}return e.metricsHandler.logEvent(Xo.Clear),!1}))()}addEventListener(e,t){this.throwIfDestroyed(),this.metricsHandler.logEvent(Xo.EventListenerAdded,e),super.addEventListener(e,t)}removeEventListener(e,t){this.throwIfDestroyed(),super.removeEventListener(e,t)}tokenize(){var e=this;return Sd((function*(){if(e.throwIfDestroyedOrNotAttached(),e.tokenizeInProcess)throw new Di([lc]);e.tokenizeInProcess=!0;try{var t=yield e.paymentMessenger.request(sd.REQUEST_CARD_NONCE_IF_VALID_FORM,{type:e.methodType});return e.tokenizeInProcess=!1,e.context.setPaymentMethodTrackingId(t.paymentMethodTrackingId),yield e.context.updateSession(t.sessionId),function(e){var{card:t,billingContact:r,cardNonce:n}=e;return{details:{card:t,method:Ln.CARD,billing:r},status:Un.OK,token:n}}(t)}catch(t){if(e.tokenizeInProcess=!1,t instanceof xo)return{errors:t.errors,status:Un.INVALID};throw Io.isInstanceOf(t,ad)?t:(e.errorLogger.captureException(t),Uo())}}))()}recalculateSize(){this.throwIfDestroyedOrNotAttached(),this.metricsHandler.logEvent(Xo.RecalculatedSize),this.onResize()}setError(e){var t=this;return Sd((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(Pn).includes(e))throw new fi(e);t.metricsHandler.logEvent(Xo.SetError,e);try{return yield t.paymentMessenger.request(sd.SET_ERROR,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}buildElementOnIframe(e){var t=this;return Sd((function*(){yield t.buildCardElement(e),yield t.paymentMessenger.request(sd.LOAD_CARDS_FORM,{configuration:vd(vd({},t.initialOptions),{},{type:t.methodType}),iframeName:t.iframeName}),yield t.stylesLoadedPromise}))()}validateOptions(e){var t={includeInputLabels:e=>"boolean"==typeof e,postalCode:e=>"string"==typeof e,style:e=>"object"==typeof e};Object.entries(e).forEach((e=>{var[r,n]=e;if(void 0===t[r])throw new gi(r);if(t[r]&&!t[r](n))throw new mi(r,n)}))}buildErrorMessage(e){switch(e){case Pn.CARD_NUMBER:return this.context.getLocaleString().paymentMethods.cards.errors.cardNumberError;case Pn.CVV:return this.context.getLocaleString().paymentMethods.cards.errors.cvvError;case Pn.EXPIRATION_DATE:return this.context.getLocaleString().paymentMethods.cards.errors.expirationDateError;case Pn.POSTAL_CODE:return this.context.getLocaleString().paymentMethods.cards.errors.postalCodeErrors[this.postalCountry];default:return""}}buildHelperMessage(e){switch(e){case Pn.CARD_NUMBER:return this.context.getLocaleString().paymentMethods.cards.helperText.cardNumber;case Pn.CVV:return this.context.getLocaleString().paymentMethods.cards.helperText.cvv;case Pn.EXPIRATION_DATE:return this.context.getLocaleString().paymentMethods.cards.helperText.expirationDate;case Pn.POSTAL_CODE:return this.context.getLocaleString().paymentMethods.cards.helperText.postalCodes[this.postalCountry];default:return""}}updateCardDetailText(){var e,t,r;this.cardDetail&&(0===this.errorList.size?(e=null!==(r=this.focusedInput)&&void 0!==r?r:Id,t=this.buildHelperMessage(e),this.cardDetail.classList.remove(wl),this.cardDetail.classList.add(bl)):(e=Cd.find((e=>this.errorList.has(e)))||Id,t=this.buildErrorMessage(e),this.cardDetail.classList.add(wl),this.cardDetail.classList.remove(bl)),this.cardDetail.textContent!==t&&(this.cardDetail.textContent=t),t.length>0?this.cardDetail.classList.add(Nl):this.cardDetail.classList.remove(Nl))}addErrorMessage(e){this.errorList.add(e),this.updateCardDetailText()}removeErrorMessage(e){this.errorList.has(e)&&(this.errorList.delete(e),this.updateCardDetailText())}addFocusMessage(e){this.focusedInput=e,this.updateCardDetailText()}removeFocusMessage(e){this.focusedInput===e&&(this.focusedInput=null),setTimeout((()=>{null===this.focusedInput&&this.updateCardDetailText()}),50)}removeFocusClass(){setTimeout((()=>{var e;this.focusedInput||null===(e=this.wrapperElement)||void 0===e||e.classList.remove(uu)}),50)}removeErrorClass(){var e;0===this.errorList.size&&(null===(e=this.wrapperElement)||void 0===e||e.classList.remove(lu))}handleInputEvent(e){var t,r,{data:n}=e,i=n.payload.body;switch(i.eventType){case Tn.ERROR_CLASS_ADDED:this.addErrorMessage(i.field),null===(t=this.wrapperElement)||void 0===t||t.classList.add(lu);break;case Tn.ERROR_CLASS_REMOVED:this.removeErrorMessage(i.field),this.removeErrorClass();break;case Tn.FOCUS_CLASS_ADDED:this.addFocusMessage(i.field),null===(r=this.wrapperElement)||void 0===r||r.classList.add(uu);break;case Tn.FOCUS_CLASS_REMOVED:this.removeFocusMessage(i.field),this.removeFocusClass()}super.dispatchEvent(i.eventType,i)}handleSetPostalCountry(e){var{data:t}=e;this.postalCountry=t.payload.body.postalCountry}initializeMessageBus(){var e=this.handleInputEvent.bind(this),t=this.handleSetPostalCountry.bind(this),r={[Qc.SET_POSTAL_COUNTRY]:t,[Qc.FOCUS_CLASS_ADDED]:e,[Qc.FOCUS_CLASS_REMOVED]:e,[Qc.ERROR_CLASS_ADDED]:e,[Qc.ERROR_CLASS_REMOVED]:e,[Qc.CARD_BRAND_CHANGED]:e,[Qc.POSTAL_CODE_CHANGED]:e,[Qc.SUBMIT]:e,[Qc.ESCAPE]:e};this.paymentMessenger.initializeMessageBus(r)}buildCardIframe(e){return cd({frameborder:"0",height:"0px",name:this.iframeName,scrolling:"no",src:_.SINGLE_CARD_IFRAME,width:"100%"},e)}hideCardElement(){this.wrapperElement&&this.wrapperElement.setAttribute("style","display: none;")}showCardElement(){this.wrapperElement&&this.wrapperElement.removeAttribute("style")}buildCardElement(e){var t=this;return Sd((function*(){var r;t.wrapperElement=document.createElement("div"),t.wrapperElement.id=Od(t.id),t.wrapperElement.classList.add(Tl),t.hideCardElement(),t.cardDetail=document.createElement("span"),t.cardDetail.classList.add(Rl),e.appendChild(t.wrapperElement),t.iframeContainer=document.createElement("div"),t.iframeContainer.classList.add(Ol),t.wrapperElement.appendChild(t.iframeContainer),t.iframe=yield t.buildCardIframe(t.iframeContainer),t.iframe.classList.add(Pl),t.wrapperElement.appendChild(t.cardDetail),Ed.addStyleElement(_.SINGLE_CARD_WRAPPER_STYLES,"sq-single-card-styles",t.resolveStylePromise,t.rejectStylePromise),null!==(r=t.initialOptions)&&void 0!==r&&r.style&&Td(t.initialOptions.style,t.id)}))()}onResize(e){if(this.iframe&&this.wrapperElement&&this.iframeContainer&&(this.lastResizeWidth=this.iframe.clientWidth,!this.currentResizeTimeout)){var t=e=>{if(this.wrapperElement&&this.iframe&&this.iframeContainer){var t=this.inputLabelsIncluded?62:48;e<=482&&(t=2*t+1),this.iframeContainer.style.height="".concat(Math.round(t),"px"),this.iframe.height="".concat(Math.round(t),"px")}};t(this.lastResizeWidth||0),this.currentResizeTimeout=window.setTimeout((()=>{t(this.lastResizeWidth||0),this.currentResizeTimeout=void 0}),100)}}detachElement(e,t){var r=this;return Sd((function*(){var n=r.status;if(r.attachPromise)try{yield r.attachPromise}catch(e){}try{var i=yield r.paymentMessenger.request(sd.DESTROY);return r.element&&(ud(r.element),window.removeEventListener("resize",r.onResize)),r.status=e,r.metricsHandler.logEvent(t),i}catch(e){throw r.status=n,e}}))()}};function Rd(e){return{detail:"Received an error in redirectURI coming back from Cash App",message:"Received an error in redirect from Cash App: ".concat(e),type:"UNKNOWN"}}r(9601);var wd,bd=function(e){window.localStorage&&window.localStorage.removeItem(e)},Nd=function(e){if(window.localStorage){var t,r=window.localStorage.getItem(e);if(!r)return null;try{t=JSON.parse(r)}catch(e){return null}return{key:e,value:t}}return null},Dd=function(e){window.localStorage&&window.localStorage.setItem(e.key,JSON.stringify(e.value))};!function(e){e.REQUEST_CASH_APP_AUTH="REQUEST_CASH_APP_AUTH",e.REQUEST_CASH_APP_CUSTOMER="REQUEST_CASH_APP_CUSTOMER",e.REQUEST_CASH_APP_CREATE_WALLET_TOKEN="REQUEST_CASH_APP_CREATE_WALLET_TOKEN"}(wd||(wd={}));var Ld=["state","code","access_token"],xd=new Set(["iPhone Simulator","iPod Simulator","iPhone","iPod"]),Ud={CASH_APP_OAUTH_PARAMS:Ld,extractCashAppParamsFromURI:function(e,t){var r=new URL(e),n=0,i=[];Ld.forEach((e=>{r.searchParams.get(e)&&(n++,i.push(e),r.searchParams.delete(e))}));var o=r.searchParams.get("error");return o&&r.searchParams.delete("error"),!o&&n>0&&n!==Ld.length&&t.captureException(new qo("redirectURI: removed [".concat(i.toString(),"] but not all of Cash App OAuth params [").concat(Ld.toString(),"]"))),r.toString()},findAndRemoveQueryParams:function(e,t){var r={};if(!window.URLSearchParams)return r;var n=new URLSearchParams(e),i=t.length,o=0;if(t.forEach((e=>{r[e]=n.get(e),r[e]&&o++})),i===o){var s=new URLSearchParams(e);t.forEach((e=>{s.delete(e)}));var a="?".concat(s.toString()),c=g.windowHash;c&&(a+="".concat(c)),g.replaceWindowState(a)}return r},isIOS:function(){return xd.has(window.navigator.platform)||/iPhone|iPod/.test(navigator.userAgent)&&"ontouchend"in document}};class kd extends Zn{constructor(){super("Cash Client: QR Code Image URL is not valid"),this.name="InvalidQrCodeUrlError",Object.setPrototypeOf(this,kd.prototype)}}function Md(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Hd(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Md(o,n,i,s,a,"next",e)}function a(e){Md(o,n,i,s,a,"throw",e)}s(void 0)}))}}class Bd{constructor(){this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t})),Ed.addStyleElement(_.CASH_APP_STYLES,"sq-cash-app-styles",this.resolveStylePromise,this.rejectStylePromise)}createCashAppButton(e){var t=this;return Hd((function*(){yield t.stylesLoadedPromise;var r,n=document.createElement("button"),i=document.createElement("img");return i.setAttribute("src",(r=e.theme===qi.DARK?"fff":"000","data:image/svg+xml,%3Csvg width='143' height='22' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M13.027 2c2.008 0 3.012 0 4.092.342a4.247 4.247 0 012.54 2.539C20 5.96 20 6.965 20 8.973v6.054c0 2.008 0 3.012-.342 4.092a4.247 4.247 0 01-2.539 2.54C16.04 22 15.035 22 13.027 22H6.973c-2.008 0-3.012 0-4.092-.342A4.247 4.247 0 01.34 19.12C0 18.04 0 17.035 0 15.027V8.973c0-2.008 0-3.012.342-4.092A4.248 4.248 0 012.88 2.34C3.96 2 4.965 2 6.973 2h6.054z' fill='%2300D64F'/%3E%3Cg clip-path='url(%23clip0)'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M10.411 8.757c.967 0 1.894.391 2.5.929a.38.38 0 00.525-.01l.72-.732a.376.376 0 00-.017-.547 5.695 5.695 0 00-1.931-1.086l.226-1.076a.377.377 0 00-.37-.455h-1.392a.377.377 0 00-.369.299l-.204.957C8.25 7.128 6.68 8.05 6.68 9.946c0 1.64 1.298 2.344 2.668 2.83 1.297.487 1.982.667 1.982 1.352 0 .703-.684 1.117-1.694 1.117-.92 0-1.885-.303-2.633-1.04a.376.376 0 00-.528-.002l-.774.764a.38.38 0 00.002.542c.604.586 1.368 1.01 2.24 1.248l-.212.997a.378.378 0 00.366.456l1.395.01a.377.377 0 00.372-.3l.201-.958c2.216-.137 3.572-1.341 3.572-3.104 0-1.622-1.351-2.307-2.992-2.866-.937-.343-1.748-.577-1.748-1.28 0-.684.757-.955 1.514-.955z' fill='%23fff'/%3E%3C/g%3E%3Cpath d='M37.316 8.99l.942-.592c.296-.192.365-.436.156-.715-1.167-1.585-2.858-2.352-4.775-2.352-3.572 0-6.03 2.631-6.03 6.43 0 3.834 2.458 6.466 6.083 6.466 2.091 0 3.677-.89 4.792-2.458.192-.296.122-.54-.174-.714l-.959-.558c-.278-.157-.522-.104-.714.157-.662.924-1.603 1.499-2.928 1.499-2.283 0-3.694-1.795-3.694-4.392 0-2.561 1.394-4.356 3.66-4.356 1.202 0 2.195.47 2.91 1.429.209.261.453.33.731.156zm8.91 9.01h1.045c.331 0 .523-.192.523-.523v-5.855c0-2.144-1.516-3.032-3.677-3.032-1.255 0-2.474.33-3.415.836-.297.157-.349.418-.21.715l.332.68c.156.313.4.365.714.208.767-.383 1.673-.592 2.405-.592.75 0 1.638.209 1.638.976 0 .871-1.133.958-2.457 1.15-1.238.174-3.242.558-3.242 2.806 0 1.812 1.308 2.84 3.19 2.84 1.272 0 2.073-.453 2.63-1.185v.488c0 .314.193.488.524.488zm-.645-4.548v1.045c0 1.377-.993 1.97-2.056 1.97-.854 0-1.447-.384-1.447-1.203 0-.889.697-1.098 1.499-1.255.819-.14 1.586-.244 2.004-.557zm4.651 2.248l-.505.592c-.209.262-.209.523.052.75.924.749 2.179 1.167 3.643 1.167 2.422 0 3.955-1.185 3.955-3.102 0-1.812-1.394-2.44-3.59-2.823-1.028-.174-2.056-.314-2.056-1.046 0-.662.732-.906 1.569-.906.906 0 1.742.297 2.335.715.261.209.523.209.732-.053l.488-.575c.226-.261.226-.522-.053-.731-.784-.593-1.934-1.098-3.415-1.098-1.987 0-3.73.854-3.73 2.875 0 1.934 1.639 2.492 3.329 2.788 1.603.28 2.265.418 2.265 1.116 0 .766-.732 1.08-1.707 1.08-.872 0-1.813-.227-2.562-.802-.279-.209-.54-.209-.75.053zM59.76 18h1.167c.331 0 .523-.192.523-.523v-4.67c0-1.394.906-2.23 2.091-2.23 1.255 0 1.569.888 1.569 1.864v5.036c0 .331.191.523.522.523H66.8c.331 0 .523-.192.523-.523v-5.542c0-1.969-1.133-3.345-3.067-3.345-1.22 0-2.214.54-2.806 1.359V6.08c0-.33-.192-.523-.523-.523H59.76c-.332 0-.523.192-.523.523v11.397c0 .331.191.523.523.523zm23.533 0h1.498c.384 0 .558-.244.419-.61L80.992 5.976c-.104-.297-.296-.419-.592-.419h-1.865c-.296 0-.488.122-.592.419L73.708 17.39c-.14.366.035.61.418.61h1.412c.296 0 .505-.14.592-.418l.907-2.667h4.757l.906 2.667c.087.279.296.418.593.418zM79.44 7.579l1.76 5.402h-3.59l1.83-5.402zm9.05 1.22h-1.167c-.331 0-.523.191-.523.523v11.187c0 .331.192.523.523.523h1.168c.33 0 .522-.192.522-.523v-3.694c.645.941 1.69 1.394 2.841 1.394 2.51 0 4.13-2.091 4.13-4.827 0-2.719-1.62-4.792-4.13-4.792-1.133 0-2.196.435-2.84 1.376v-.644c0-.332-.192-.523-.523-.523zm.523 4.583c0-1.586.802-2.858 2.37-2.858 1.534 0 2.283 1.29 2.283 2.858 0 1.586-.749 2.893-2.282 2.893-1.551 0-2.37-1.29-2.37-2.893zm10.544-4.583H98.39c-.331 0-.523.191-.523.523v11.187c0 .331.192.523.523.523h1.168c.33 0 .522-.192.522-.523v-3.694c.645.941 1.691 1.394 2.841 1.394 2.509 0 4.13-2.091 4.13-4.827 0-2.719-1.621-4.792-4.13-4.792-1.133 0-2.196.435-2.841 1.376v-.644c0-.332-.191-.523-.522-.523zm.522 4.583c0-1.586.802-2.858 2.37-2.858 1.534 0 2.283 1.29 2.283 2.858 0 1.586-.749 2.893-2.283 2.893-1.551 0-2.37-1.29-2.37-2.893zm16.199.122h2.962c2.841 0 4.462-1.569 4.462-3.973 0-2.388-1.638-3.974-4.462-3.974h-4.757c-.331 0-.523.192-.523.523v11.397c0 .331.192.523.523.523h1.272c.331 0 .523-.192.523-.523v-3.973zm2.945-2.109h-2.945V7.666h2.945c1.377 0 2.126.662 2.126 1.847 0 1.203-.749 1.882-2.126 1.882zM130.979 18h1.045c.332 0 .523-.192.523-.523v-5.855c0-2.144-1.516-3.032-3.677-3.032-1.255 0-2.474.33-3.415.836-.297.157-.349.418-.21.715l.332.68c.156.313.4.365.714.208.767-.383 1.673-.592 2.405-.592.749 0 1.638.209 1.638.976 0 .871-1.133.958-2.457 1.15-1.237.174-3.241.558-3.241 2.806 0 1.812 1.307 2.84 3.189 2.84 1.272 0 2.073-.453 2.631-1.185v.488c0 .314.192.488.523.488zm-.645-4.548v1.045c0 1.377-.993 1.97-2.056 1.97-.854 0-1.447-.384-1.447-1.203 0-.889.697-1.098 1.499-1.255.819-.14 1.586-.244 2.004-.557zm4.588 6.238l-.21.785c-.087.33.018.575.332.644.244.053.557.087.941.087 1.533 0 2.387-.644 3.311-3.084l3.311-8.713c.139-.366-.035-.61-.419-.61h-1.272c-.296 0-.488.14-.592.418l-2.057 5.977-2.073-5.977c-.105-.279-.297-.418-.593-.418h-1.394c-.383 0-.54.244-.401.61l3.311 8.452c-.418 1.115-.749 1.498-1.411 1.498-.105 0-.227 0-.331-.035-.209-.052-.366.053-.453.366z' fill='%23".concat(r,"'/%3E%3C/svg%3E"))),n.classList.add("sq-cash-button",function(e){switch(e){case Fi.ROUNDED:return"sq-cash-button-rounded";case Fi.SEMIROUNDED:return"sq-cash-button-semi-rounded";default:return"sq-cash-button-squared"}}(e.shape),function(e){return e===qi.DARK?"sq-cash-button-dark":"sq-cash-button-light"}(e.theme)),n.appendChild(i),n}))()}createQrCodeContainer(e){var t=this;return Hd((function*(){if(yield t.stylesLoadedPromise,!Io.isValidUrl(e))throw new kd;var r=new URL(e);r.searchParams.set("rounded","0");var n=document.createElement("div");n.classList.add("sq-cash-qr-container");var i=document.createElement("div");i.classList.add("col-left");var o=document.createElement("div");o.classList.add("col-right");var s=document.createElement("div");s.classList.add("sq-cash-qr-instruction"),s.innerHTML="<div><h3>Cash App Pay</h3><span>Scan the QR Code to check out</span></div>";var a=document.createElement("div"),c=document.createElement("img");a.classList.add("sq-cash-qr-guide"),c.setAttribute("src","data:image/svg+xml,%3Csvg width='133' height='109' viewBox='0 0 133 109' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg clip-path='url(%23clip0)'%3E%3Crect x='6.51207' y='2.51207' width='122.976' height='125.976' rx='14.9276' fill='%2300B843' stroke='black' stroke-width='4.97585'/%3E%3Cg clip-path='url(%23clip1)'%3E%3Cpath d='M59.7669 79.5683C60.3043 79.5683 60.6028 79.2399 60.6028 78.6727V78.1054C64.7527 77.8069 67.1112 75.0602 67.1112 71.7164C67.1112 67.5964 63.5883 66.1037 60.6028 65.3275V59.5953C61.7373 59.8341 62.633 60.3118 63.4391 61.1179C63.8272 61.506 64.2451 61.5956 64.693 61.297L65.8872 60.5506C66.3947 60.2521 66.5141 59.7744 66.126 59.3266C64.693 57.595 62.6927 56.6695 60.6028 56.4306V55.6843C60.6028 55.2066 60.3043 54.9677 59.7669 54.9677C59.2295 54.9677 58.9011 55.2961 58.9011 55.8634V56.3709C55.1692 56.5202 52.4524 58.7892 52.4524 62.4315C52.4524 66.7008 56.244 68.104 58.9011 68.7309V75.0005C57.5277 74.8512 56.1544 74.284 55.1095 72.8509C54.7512 72.3434 54.393 72.224 53.8854 72.5524L52.4822 73.4182C51.9747 73.7466 51.8553 74.1646 52.1837 74.6423C53.6764 76.6724 56.0051 77.9263 58.9011 78.1353V78.8518C58.9011 79.2996 59.2295 79.5683 59.7669 79.5683ZM56.035 62.133C56.035 60.4312 57.3486 59.5953 58.9011 59.4759V64.9095C57.2889 64.4617 56.035 63.775 56.035 62.133ZM63.6182 72.0449C63.6182 73.7167 62.5434 74.8811 60.6028 75.0602V69.1489C62.4837 69.6863 63.6182 70.3431 63.6182 72.0449Z' fill='white'/%3E%3Cpath d='M84.4025 67.1785C84.4025 61.4761 82.4619 56.1022 76.8491 56.1022C71.2065 56.1022 69.2958 61.4761 69.2958 67.1785C69.2958 72.8509 71.2065 78.195 76.8491 78.195C82.4619 78.195 84.4025 72.8509 84.4025 67.1785ZM80.372 67.1486C80.372 71.5672 79.5361 74.9408 76.8491 74.9408C74.1025 74.9408 73.2964 71.5672 73.2964 67.1486C73.2964 62.7301 74.1025 59.3863 76.8491 59.3863C79.5361 59.3863 80.372 62.7301 80.372 67.1486Z' fill='white'/%3E%3C/g%3E%3Cg filter='url(%23filter0_d)'%3E%3Ccircle cx='21.7048' cy='28.7714' r='21.7048' fill='%2300D64F'/%3E%3C/g%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15.6143 24.2473C15.5832 24.6287 15.5824 25.1239 15.5824 25.8616V26.8927H13.6492V25.8616V25.8224C13.6492 25.134 13.6492 24.5594 13.6875 24.0899C13.7275 23.6003 13.814 23.1407 14.0355 22.706C14.3753 22.0391 14.9175 21.4969 15.5844 21.1571C16.0191 20.9356 16.4787 20.8491 16.9683 20.8091C17.4378 20.7708 18.0123 20.7708 18.7007 20.7708L18.7008 20.7708L18.74 20.7708H19.7711V22.704H18.74C18.0023 22.704 17.5071 22.7048 17.1258 22.7359C16.7557 22.7662 16.5788 22.8201 16.4621 22.8796C16.1589 23.0341 15.9125 23.2805 15.758 23.5836C15.6985 23.7004 15.6446 23.8773 15.6143 24.2473ZM24.239 22.704C24.9768 22.704 25.472 22.7048 25.8533 22.7359C26.2233 22.7662 26.4003 22.8201 26.517 22.8796C26.8201 23.0341 27.0666 23.2805 27.221 23.5836C27.2805 23.7004 27.3345 23.8773 27.3647 24.2473C27.3959 24.6287 27.3966 25.1239 27.3966 25.8616V26.8927H29.3299V25.8616L29.3299 25.8224V25.8223V25.8223V25.8223C29.3299 25.1339 29.3299 24.5593 29.2915 24.0899C29.2515 23.6003 29.165 23.1407 28.9436 22.706C28.6038 22.0391 28.0616 21.4969 27.3947 21.1571C26.96 20.9356 26.5003 20.8491 26.0107 20.8091C25.5413 20.7708 24.9667 20.7708 24.2782 20.7708H24.239H23.208V22.704H24.239ZM27.3966 31.3606C27.3966 32.0984 27.3959 32.5935 27.3647 32.9749C27.3345 33.3449 27.2805 33.5219 27.221 33.6386C27.0666 33.9417 26.8201 34.1882 26.517 34.3426C26.4003 34.4021 26.2233 34.4561 25.8533 34.4863C25.472 34.5175 24.9768 34.5182 24.239 34.5182H23.208V36.4514H24.239L24.2782 36.4514H24.2784H24.2784H24.2784C24.9667 36.4515 25.5413 36.4515 26.0107 36.4131C26.5003 36.3731 26.96 36.2866 27.3947 36.0651C28.0616 35.7253 28.6038 35.1831 28.9436 34.5162C29.165 34.0816 29.2515 33.6219 29.2915 33.1323C29.3299 32.6629 29.3299 32.0883 29.3299 31.3999V31.3999V31.3998V31.3998L29.3299 31.3606V30.3295H27.3966V31.3606ZM18.74 34.5182C18.0023 34.5182 17.5071 34.5175 17.1258 34.4863C16.7557 34.4561 16.5788 34.4021 16.4621 34.3426C16.1589 34.1882 15.9125 33.9417 15.758 33.6386C15.6986 33.5219 15.6446 33.3449 15.6143 32.9749C15.5832 32.5935 15.5824 32.0984 15.5824 31.3606L15.5824 30.3295H13.6492V31.3606V31.3998V31.3999C13.6492 32.0883 13.6492 32.6629 13.6875 33.1323C13.7275 33.6219 13.814 34.0816 14.0355 34.5162C14.3753 35.1831 14.9175 35.7253 15.5844 36.0651C16.0191 36.2866 16.4787 36.3731 16.9683 36.4131C17.4378 36.4515 18.0124 36.4515 18.7008 36.4514H18.7008L18.74 36.4514H19.7711V34.5182L18.74 34.5182Z' fill='white'/%3E%3Cpath d='M35.4841 2.48792C56.4982 2.48792 83.1989 2.48792 104.213 2.48792V4.97658C103.975 4.97854 103.824 4.98566 103.693 5.0117C102.953 5.15894 102.375 5.73757 102.227 6.47776C102.192 6.65801 102.192 6.87476 102.192 7.30828C102.192 7.36349 102.192 7.41522 102.192 7.46377C102.191 7.84292 102.188 8.06738 102.173 8.26281C101.932 11.4847 99.3708 14.0459 96.1488 14.2873C95.9051 14.3056 95.6164 14.3056 95.0388 14.3056H44.6583C44.0807 14.3056 43.7919 14.3056 43.5483 14.2873C40.3263 14.0459 37.7652 11.4847 37.5238 8.26281C37.5091 8.06738 37.5062 7.84292 37.5054 7.46377L37.5055 7.30828C37.5055 6.87476 37.5055 6.65801 37.4697 6.47776C37.3224 5.73757 36.7438 5.15894 36.0036 5.0117C35.8727 4.98566 35.7225 4.97854 35.4841 4.97658V2.48792Z' fill='black'/%3E%3C/g%3E%3Cdefs%3E%3Cfilter id='filter0_d' x='-2.01905' y='6.05713' width='47.4476' height='47.4476' filterUnits='userSpaceOnUse' color-interpolation-filters='sRGB'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeColorMatrix in='SourceAlpha' type='matrix' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dy='1.00952'/%3E%3CfeGaussianBlur stdDeviation='1.00952'/%3E%3CfeColorMatrix type='matrix' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0'/%3E%3CfeBlend mode='normal' in2='BackgroundImageFix' result='effect1_dropShadow'/%3E%3CfeBlend mode='normal' in='SourceGraphic' in2='effect1_dropShadow' result='shape'/%3E%3C/filter%3E%3CclipPath id='clip0'%3E%3Crect width='133' height='109' fill='white'/%3E%3C/clipPath%3E%3CclipPath id='clip1'%3E%3Crect x='11.5378' y='4.97597' width='116.622' height='252.524' rx='12.4396' fill='white'/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E"),a.appendChild(c),i.appendChild(s),i.appendChild(a);var u=document.createElement("img");return u.classList.add("sq-cash-qr-code"),u.setAttribute("src",r.toString()),o.appendChild(u),n.appendChild(i),n.appendChild(o),n}))()}}function Gd(e,t,r){return{details:{cashApp:{cashtag:e,transactionId:t},method:Ln.CASH_APP},status:Un.OK,token:r}}function jd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jd(Object(r),!0).forEach((function(t){Fd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fd(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vd(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Yd(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Vd(o,n,i,s,a,"next",e)}function a(e){Vd(o,n,i,s,a,"throw",e)}s(void 0)}))}}var zd="sq-cash-app-redirect-payment-method-tracking-id";class Kd extends cc{constructor(e,t){if(super(e),this.methodType=Ln.CASH_APP,this.preloadedQRImage=new Image,this.authTimeoutId=-1,this.elements={button:null,qrCode:null},this.isCashAppNativePlatform=g.isAndroid()||Ud.isIOS(),this.wasFirstInteractionCalled=!1,this.paymentMethodMessenger=new pc(this.context),this.cashAppClient=new Bd,!this.session.locationId)throw new di("locationId must be provided for Cash App");if(this.locationId=this.session.locationId,function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.redirectURI)throw new di("redirectURI missing");if(!e.transactionId)throw new di("transactionId missing");if(t){if(!e.totalTransactionAmount)throw new di("totalTransactionAmount required");if(!Number.isInteger(e.totalTransactionAmount.amount)||e.totalTransactionAmount.amount<=0)throw new di("totalTransactionAmount.amount must be a positive integer")}}(t),t.transactionId.length>50)throw new di("transactionId too long. Should be less than ".concat(50," characters."));var r=Ud.extractCashAppParamsFromURI(t.redirectURI,e.errorLogger);this.fetchAuthURLs(this.locationId,r,t.transactionId,t.totalTransactionAmount)}get willRedirect(){return this.isCashAppNativePlatform}destroy(){return this.metricsHandler.logEvent(Xo.Destroyed),window.clearTimeout(this.authTimeoutId),Promise.resolve(!0)}attachAll(e,t){var r=this;return Yd((function*(){r.metricsHandler.logEvent(Zo.AttachStart);try{if(e.button){var n=yield r.cashAppClient.createCashAppButton(Object.assign({shape:Fi.ROUNDED,theme:qi.DARK},null==t?void 0:t.button));r.elements.button=r.validateAndQuerySelector(e.button),r.elements.button.appendChild(n)}return r.elements.qrCode=r.validateAndQuerySelector(e.qrCode),void r.metricsHandler.logEvent(Zo.AttachOK)}catch(e){throw r.metricsHandler.logEvent(Zo.AttachError),e}}))()}tokenize(){var e=this;return Yd((function*(){e.handleFirstInteraction();var{qrCode:t}=e.elements;if(!t)throw new Ai(e.methodType);try{var r,n=yield mn.timeout((()=>e.fetchAuthURLsPromise),po.minutesToMs(1),new Vo("Precondition failed",e.methodType));if(n.error)throw n.error;if(!e.transactionId)throw new Vo("expected transactionId to exist at tokenization",e.methodType);if(e.willRedirect){var i={paymentMethodTrackingId:e.context.getPaymentMethodTrackingId(),transactionId:e.transactionId};return e.context.getSession().paymentsUIInstanceId&&(i=qd(qd({},i),{},{paymentsUIInstanceId:e.context.getPaymentsUIInstanceId()})),Dd({key:zd,value:i}),g.redirectTo(n.redirectURL),new Promise((()=>{}))}var o=yield e.cashAppClient.createQrCodeContainer(n.qrURL);t.appendChild(o);var{token:s,cashtag:a,paymentMethodTrackingId:c,sessionId:u}=yield e.paymentMethodMessenger.request(wd.REQUEST_CASH_APP_CREATE_WALLET_TOKEN,{expiresAt:Date.now()+po.secondsToMs(n.expiresIn),requestBody:{analytics_token:null!==(r=e.session.analyticsToken)&&void 0!==r?r:"",client_id:e.session.applicationId,location_id:e.locationId,payment_method_tracking_id:e.context.getPaymentMethodTrackingId(),session_id:e.session.sessionId,transaction_id:e.transactionId,websdk_version:_.VERSION,website_url:e.session.sourceUrl}});return yield e.context.updateSession(u),e.context.setPaymentMethodTrackingId(c),Gd(a,e.transactionId,s)}catch(t){return t instanceof kd&&e.errorLogger.captureException(t),dc(t,e.errorLogger)}}))()}getRedirectResult(){var e=this;return Yd((function*(){var t,{error:r}=Ud.findAndRemoveQueryParams(window.location.search,["error"]);if(r){var n=new Di([Rd(r)]);return e.errorLogger.captureException(n),dc(n,e.errorLogger)}var i,o,s,a,c,{state:u,code:l,access_token:d}=Ud.findAndRemoveQueryParams(window.location.search,Ud.CASH_APP_OAUTH_PARAMS);if(!u||!l||!d)return null;try{o=function(e){var{transaction_id:t}=JSON.parse(e);if(void 0===t)throw new qo("Malformed state in redirect query params: ".concat(e));return t}(u);var p=function(e){var t=e.split(":");if(t.length<3)throw new qo("Invalid transaction ID: could not separate");return t}(o);i=p[0],s=p[1]}catch(t){return dc(t,e.errorLogger)}var h=Nd(zd);null!==h&&o===(null===(t=h.value)||void 0===t?void 0:t.transactionId)&&(a=h.value.paymentMethodTrackingId,c=h.value.paymentsUIInstanceId),bd(zd);var f=t=>{e.context.metricsHandler.metricsLogger.logEvent({event:t,eventSource:e.context.metricsHandler.eventSource},e.session.instanceId,i,a,c)};f(Zo.NonceStart);try{var g=yield e.messenger.request(wd.REQUEST_CASH_APP_CUSTOMER,{session:Object.assign({},e.session,{paymentMethodTrackingId:a,sessionId:i}),body:d}),m=e.generateWalletToken(i,l,o,a);return f(Zo.NonceOK),Gd(g,s,m)}catch(t){return f(Zo.NonceError),dc(t,e.errorLogger)}}))()}validateAndQuerySelector(e){if("string"!=typeof e)throw new TypeError("selector should be a string: ".concat(e));var t=document.querySelector(e);if(null===t)throw new ai(e);return t}fetchAuthURLs(e,t,r,n){var i=this;this.fetchAuthURLsPromise=Yd((function*(){var o,s={expiresIn:-1,qrURL:"",redirectURL:""},a=1e3,c=i.willRedirect?t:void 0,u=n?{amount:n.amount,currency_code:n.currencyCode}:void 0,l={client_id:i.session.applicationId,location_id:e,redirect_uri:c,total_transaction_amount:u,transaction_id:r};try{var{expires_in:d,qr_url:p,redirect_url:h,transaction_id:f}=yield i.paymentMethodMessenger.request(wd.REQUEST_CASH_APP_AUTH,l);i.transactionId=f,s.expiresIn=d,s.qrURL=p,s.redirectURL=h,o=d,a=Math.max(po.secondsToMs(o)-po.minutesToMs(1),po.minutesToMs(1)),i.willRedirect||(i.preloadedQRImage.src=p),s.expiresIn<2147483647?i.authTimeoutId=window.setTimeout((()=>{i.errorLogger.captureException(new Vo("Cash App Auth URLS expired unexpectedly with expiry of ".concat(a,"ms"),Ln.CASH_APP))}),a):i.errorLogger.captureException(new Vo("Cash App Auth URLS expires_in larger than 32 bit integer ".concat(s.expiresIn,"ms"),Ln.CASH_APP))}catch(e){s.error=e}return s}))()}generateWalletToken(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return"wnon:".concat(window.btoa(JSON.stringify({analytics_token:this.session.analyticsToken,client_id:this.session.applicationId,entry_method:"REDIRECT",location_id:this.locationId,payment_method_tracking_id:n,session_id:e,tender:{brand:"CASH_APP",preauth_idempotency_key:t,transaction_id:r},websdk_version:_.VERSION,website_url:this.session.sourceUrl})))}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(Zo.FirstInteraction))}}wn.GIFT_CARD_NUMBER,wn.GIFT_CARD_NUMBER,"0".repeat(24);var Wd,$d=[Ri,wi,bi,Ni,_i,Li];function Qd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qd(Object(r),!0).forEach((function(t){Jd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jd(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xd(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function ep(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Xd(o,n,i,s,a,"next",e)}function a(e){Xd(o,n,i,s,a,"throw",e)}s(void 0)}))}}!function(e){e.CLEAR="giftCardClear",e.CONFIGURE="giftCardConfigure",e.DESTROY="giftCardDestroy",e.LOAD_GIFT_CARDS_FORM="loadGiftCardsForm",e.REQUEST_CARD_NONCE_IF_VALID_FORM="giftCardRequestCardNonceIfValidForm",e.SET_FOCUS="giftCardSetFocus",e.SET_ERROR="giftCardSetError"}(Wd||(Wd={}));var tp=[wn.GIFT_CARD_NUMBER];class rp extends cc{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.methodType=Ln.GIFT_CARD,this.onResize=this.onResize.bind(this),this.id=sc(),this.iframeName="".concat("gift-card","-").concat(this.id),this.paymentMessenger=new pc(this.context),this.tokenizeInProcess=!1,this.inputLabelsIncluded=Boolean(null==t?void 0:t.includeInputLabels),this.initializeMessageBus(),this.validateOptions(t),this.initialOptions=t||{},this.errorList=new Set,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t}))}attach(e){var t=this;return ep((function*(){var r;t.throwIfDestroyedOrAlreadyAttached(),t.status=oc.ATTACHED,t.metricsHandler.logEvent(Zo.AttachStart),t.metricsHandler.logEvent(Xo.Configured,t.initialOptions);try{r=fd(e)}catch(e){throw t.metricsHandler.logEvent(Zo.AttachError),t.status===oc.ATTACHED&&(t.status=oc.DETACHED),e}try{return t.attachPromise=t.buildElementOnIframe(r),yield t.attachPromise,t.attachPromise=void 0,t.throwIfDestroyed(),t.element=r,window.addEventListener("resize",t.onResize),t.showCardElement(),t.onResize(),void t.metricsHandler.logEvent(Zo.AttachOK)}catch(e){if(t.status===oc.ATTACHED&&(t.status=oc.DETACHED),t.metricsHandler.logEvent(Zo.AttachError),Io.isInstanceOf(e,$d))throw e;throw t.errorLogger.captureException(e),new Li("attaching the Gift Card Element")}}))()}detach(){return this.throwIfDestroyed(),this.detachElement(oc.DETACHED,Xo.Detached)}destroy(){return this.status===oc.DESTROYED?Promise.resolve(!1):this.detachElement(oc.DESTROYED,Xo.Destroyed)}configure(e){var t=this;return ep((function*(){t.throwIfDestroyedOrNotAttached(),t.validateOptions(e),void 0!==(null==e?void 0:e.includeInputLabels)&&(t.inputLabelsIncluded=Boolean(null==e?void 0:e.includeInputLabels),t.onResize()),void 0!==e.style&&ip(e.style,t.id),t.metricsHandler.logEvent(Xo.ConfigUpdated,e);try{return void(yield t.paymentMessenger.request(Wd.CONFIGURE,{includeInputLabels:t.inputLabelsIncluded,style:e.style,type:t.methodType}))}catch(e){if(Io.isInstanceOf(e,id))throw e;throw t.errorLogger.captureException(e),new Li("configuring the Gift Card Element")}}))()}focus(e){var t=this;return ep((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(wn).includes(e))throw new fi(e);t.metricsHandler.logEvent(Xo.Focused,e);try{return yield t.paymentMessenger.request(Wd.SET_FOCUS,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}clear(){var e=this;return ep((function*(){e.throwIfDestroyedOrNotAttached();try{return yield e.paymentMessenger.request(Wd.CLEAR)}catch(t){e.errorLogger.captureException(t)}return e.metricsHandler.logEvent(Xo.Clear),!1}))()}addEventListener(e,t){this.throwIfDestroyed(),this.metricsHandler.logEvent(Xo.EventListenerAdded,e),super.addEventListener(e,t)}removeEventListener(e,t){this.throwIfDestroyed(),super.removeEventListener(e,t)}tokenize(){var e=this;return ep((function*(){if(e.throwIfDestroyedOrNotAttached(),e.tokenizeInProcess)throw new Di([lc]);e.tokenizeInProcess=!0;try{var t=yield e.paymentMessenger.request(Wd.REQUEST_CARD_NONCE_IF_VALID_FORM,{type:e.methodType});return e.tokenizeInProcess=!1,e.context.setPaymentMethodTrackingId(t.paymentMethodTrackingId),yield e.context.updateSession(t.sessionId),function(e){var{card:t,cardNonce:r}=e;return{details:{giftCard:t,method:Ln.GIFT_CARD},status:Un.OK,token:r}}(t)}catch(t){if(e.tokenizeInProcess=!1,t instanceof xo)return{errors:t.errors,status:Un.INVALID};throw Io.isInstanceOf(t,ad)?t:(e.errorLogger.captureException(t),Uo())}}))()}setError(e){var t=this;return ep((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(wn).includes(e))throw new fi(e);t.metricsHandler.logEvent(Xo.SetError,e);try{return yield t.paymentMessenger.request(Wd.SET_ERROR,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}buildElementOnIframe(e){var t=this;return ep((function*(){yield t.buildCardElement(e),yield t.paymentMessenger.request(Wd.LOAD_GIFT_CARDS_FORM,{configuration:Zd(Zd({},t.initialOptions),{},{type:t.methodType}),iframeName:t.iframeName}),yield t.stylesLoadedPromise}))()}validateOptions(e){var t={includeInputLabels:e=>"boolean"==typeof e,style:e=>"object"==typeof e};Object.entries(e).forEach((e=>{var[r,n]=e;if(void 0===t[r])throw new gi(r);if(t[r]&&!t[r](n))throw new mi(r,n)}))}buildCardElement(e){var t=this;return ep((function*(){var r;t.wrapperElement=document.createElement("div"),t.wrapperElement.id=np(t.id),t.wrapperElement.classList.add(Tl),t.hideCardElement(),t.cardDetail=document.createElement("span"),t.cardDetail.classList.add(Rl),e.appendChild(t.wrapperElement),t.iframeContainer=document.createElement("div"),t.iframeContainer.classList.add(Ol),t.wrapperElement.appendChild(t.iframeContainer),t.iframe=yield t.buildCardIframe(t.iframeContainer),t.iframe.classList.add(Pl),t.wrapperElement.appendChild(t.cardDetail),Ed.addStyleElement(_.SINGLE_CARD_WRAPPER_STYLES,"sq-single-card-styles",t.resolveStylePromise,t.rejectStylePromise),null!==(r=t.initialOptions)&&void 0!==r&&r.style&&ip(t.initialOptions.style,t.id)}))()}buildCardIframe(e){return cd({frameborder:"0",height:"0px",name:this.iframeName,scrolling:"no",src:_.GIFT_CARD_IFRAME,width:"100%"},e)}hideCardElement(){this.wrapperElement&&this.wrapperElement.setAttribute("style","display: none;")}showCardElement(){this.wrapperElement&&this.wrapperElement.removeAttribute("style")}onResize(e){if(this.iframe&&this.wrapperElement&&this.iframeContainer&&!this.currentResizeTimeout){var t=()=>{if(this.wrapperElement&&this.iframe&&this.iframeContainer){var e=this.inputLabelsIncluded?62:48;e+=2,this.iframe.style.height="".concat(e,"px"),this.iframeContainer.style.height="".concat(Math.round(e),"px")}};t(),this.currentResizeTimeout=window.setTimeout((()=>{t(),this.currentResizeTimeout=void 0}),100)}}updateCardDetailText(){var e,t,r;this.cardDetail&&(0===this.errorList.size?(e=null!==(r=this.focusedInput)&&void 0!==r?r:"emptyMessage",t=this.buildHelperMessage(e),this.cardDetail.classList.remove(wl),this.cardDetail.classList.add(bl)):(e=tp.find((e=>this.errorList.has(e)))||tp[0],t=this.buildErrorMessage(e),this.cardDetail.classList.add(wl),this.cardDetail.classList.remove(bl)),this.cardDetail.textContent!==t&&(this.cardDetail.textContent=t),t.length>0?this.cardDetail.classList.add(Nl):this.cardDetail.classList.remove(Nl))}addErrorMessage(e){this.errorList.add(e),this.updateCardDetailText()}removeErrorMessage(e){this.errorList.has(e)&&(this.errorList.delete(e),this.updateCardDetailText())}addFocusMessage(e){this.focusedInput=e,this.updateCardDetailText()}removeFocusMessage(e){this.focusedInput===e&&(this.focusedInput=null),setTimeout((()=>{null===this.focusedInput&&this.updateCardDetailText()}),50)}handleInputEvent(e){var t,r,{data:n}=e,i=n.payload.body;switch(i.eventType){case bn.ERROR_CLASS_ADDED:this.addErrorMessage(i.field),null===(t=this.wrapperElement)||void 0===t||t.classList.add(lu);break;case bn.ERROR_CLASS_REMOVED:this.removeErrorMessage(i.field),this.removeErrorClass();break;case bn.FOCUS_CLASS_ADDED:this.addFocusMessage(i.field),null===(r=this.wrapperElement)||void 0===r||r.classList.add(uu);break;case bn.FOCUS_CLASS_REMOVED:this.removeFocusMessage(i.field),this.removeFocusClass()}super.dispatchEvent(i.eventType,i)}removeFocusClass(){setTimeout((()=>{var e;this.focusedInput||null===(e=this.wrapperElement)||void 0===e||e.classList.remove(uu)}),50)}removeErrorClass(){var e;0===this.errorList.size&&(null===(e=this.wrapperElement)||void 0===e||e.classList.remove(lu))}initializeMessageBus(){var e=this.handleInputEvent.bind(this),t={[Qc.FOCUS_CLASS_ADDED]:e,[Qc.FOCUS_CLASS_REMOVED]:e,[Qc.ERROR_CLASS_ADDED]:e,[Qc.ERROR_CLASS_REMOVED]:e,[Qc.CARD_BRAND_CHANGED]:e,[Qc.SUBMIT]:e,[Qc.ESCAPE]:e};this.paymentMessenger.initializeMessageBus(t)}buildErrorMessage(e){return e===wn.GIFT_CARD_NUMBER?this.context.getLocaleString().paymentMethods.giftCards.errors.giftCardNumberError:""}buildHelperMessage(e){return e===wn.GIFT_CARD_NUMBER?this.context.getLocaleString().paymentMethods.giftCards.helperText.giftCardNumber:""}detachElement(e,t){var r=this;return ep((function*(){var n=r.status;if(r.attachPromise)try{yield r.attachPromise}catch(e){}try{var i=yield r.paymentMessenger.request(Wd.DESTROY);return r.element&&(ud(r.element),window.removeEventListener("resize",r.onResize)),r.status=e,r.metricsHandler.logEvent(t),i}catch(e){throw r.status=n,e}}))()}}function np(e){return"".concat("gift-card-wrapper","-").concat(e)}function ip(e,t){var r=function(e){return"".concat("sq-gift-card-custom-styles","-").concat(e)}(t),n=document.getElementById(r);null===n&&((n=document.createElement("style")).id=r,document.head.appendChild(n)),n.innerHTML=ed(e,np(t))}class op extends Zn{constructor(e){super("The event listener for ".concat(e," timed out (30 seconds). If you've returned a promise, ensure it is resolving")),this.name="EventListenerTimeoutError",Object.setPrototypeOf(this,op.prototype)}}function sp(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}class ap extends nc{constructor(){super(),this.listeners={},this.listeners={}}dispatchEvent(e,t,r){var n,i=this;return(n=function*(){if(e in i.listeners)for(var n=new xi(e,t),o=[...i.listeners[e]],s=function*(){var t,i;try{t=o[a](n)}catch(t){throw new li(e,t.message)}if(t instanceof Promise)try{i=yield mn.timeout((()=>t),3e4,new op(e))}catch(t){if(t instanceof op)throw t;throw new li(e,t.message)}else i=t;r&&r(i)},a=0,c=o.length;a<c;a++)yield*s()},function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function s(e){sp(o,r,i,s,a,"next",e)}function a(e){sp(o,r,i,s,a,"throw",e)}s(void 0)}))})()}}function cp(e,t){if("object"!=typeof e)return{isValid:!1,missingFields:[]};var r=[];return{isValid:Object.entries(t).map((n=>{var[i,o]=n;if("object"==typeof o){var{isValid:s,missingFields:a}=cp("object"==typeof e[i]?e[i]:{},t[i]);return a.forEach((e=>{var[t,n]=e;r.push(["".concat(i,".").concat(t),n])})),s}return i in e&&typeof e[i]===o||(r.push([i,o]),!1)})).every((e=>e)),missingFields:r}}function up(e,t,r){if(!Array.isArray(e))return{isValid:!1,missingFields:[[t,"Array"]]};var n=e.reduce(((e,n)=>{var i=cp({[t]:n},{[t]:r}),o=Object.fromEntries(i.missingFields);return{isValid:e.isValid&&i.isValid,missingFieldsMap:Object.assign({},e.missingFieldsMap,o)}}),{isValid:!0,missingFieldsMap:{}});return{isValid:n.isValid,missingFields:Object.entries(n.missingFieldsMap)}}var lp,dp,pp={amount:"string",label:"string"},hp={amount:"string",id:"string",label:"string"},fp={amount:"string",label:"string"},gp={};function mp(e,t){var{lineItems:r,taxLineItems:n,discounts:i,shippingLineItems:o}=e,s=!1,a=[],c=r,u=n,l=o,d=Ep(i);return void 0===t||void 0===r&&void 0===n&&void 0===o&&void 0===d||(c||(c=t.lineItems),u||(u=t.taxLineItems),d||(d=Ep(t.discounts)),l||(l=t.shippingLineItems)),[c,u,d,l].forEach((e=>{void 0!==e&&(s=!0,a.push(...e))})),s?a:void 0}function Ep(e){return void 0===e?e:e.map((e=>Object.assign({},e,{amount:"-".concat(e.amount)})))}function yp(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function vp(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){yp(o,n,i,s,a,"next",e)}function a(e){yp(o,n,i,s,a,"throw",e)}s(void 0)}))}}function _p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ap(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.UPDATE="update"}(lp||(lp={}));class Sp{constructor(e,t,r){this.eventTarget=new ap,this.metricsBuffer=[],this.localeStrings=t,this._requestBillingContact=Boolean(e.requestBillingContact),this._requestShippingContact=Boolean(e.requestShippingContact),this._countryCode=e.countryCode,this._currencyCode=e.currencyCode,this._lineItems=e.lineItems,this._shippingLineItems=e.shippingLineItems,this._taxLineItems=e.taxLineItems,this._discounts=e.discounts,this._total=e.total,this._shippingOptions=e.shippingOptions,this._shippingContact=e.shippingContact,this._pickupContact=e.pickupContact,this.updateLock=r;var{isValid:n,missingFields:i}=Cp(this);if(!n)throw new ci(i)}get requestBillingContact(){return this._requestBillingContact}get requestShippingContact(){return this._requestShippingContact}get countryCode(){return this._countryCode}get currencyCode(){return this._currencyCode}get lineItems(){return this._lineItems}get pickupContact(){return this._pickupContact}get shippingLineItems(){return this._shippingLineItems}get taxLineItems(){return this._taxLineItems}get discounts(){return this._discounts}get total(){return this._total}get shippingOptions(){return this._shippingOptions}get shippingContact(){return this._shippingContact}update(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_p(Object(r),!0).forEach((function(t){Ap(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({countryCode:this.countryCode,currencyCode:this.currencyCode,lineItems:this.lineItems,shippingLineItems:this.shippingLineItems,taxLineItems:this.taxLineItems,discounts:this.discounts,pickupContact:this.pickupContact,requestBillingContact:this.requestBillingContact,requestShippingContact:this.requestShippingContact,shippingContact:this.shippingContact,shippingOptions:this.shippingOptions,total:this.total},e),r=new Sp(t,this.localeStrings,this.updateLock),{isValid:n,missingFields:i}=Cp(r);if(!n)throw new ci(i);return!this.updateLock.isLocked&&(void 0!==e.requestBillingContact&&(this._requestBillingContact=Boolean(e.requestBillingContact)),void 0!==e.requestShippingContact&&(this._requestShippingContact=Boolean(e.requestShippingContact)),e.countryCode&&(this._countryCode=e.countryCode),e.currencyCode&&(this._currencyCode=e.currencyCode),e.lineItems&&(this._lineItems=e.lineItems),e.shippingLineItems&&(this._shippingLineItems=e.shippingLineItems),e.taxLineItems&&(this._taxLineItems=e.taxLineItems),e.discounts&&(this._discounts=e.discounts),e.total&&(this._total=e.total),e.pickupContact&&(this._pickupContact=e.pickupContact),e.shippingOptions&&(this._shippingOptions=e.shippingOptions),e.shippingContact&&(this._shippingContact=e.shippingContact),this.eventTarget.dispatchEvent(lp.UPDATE,r),this.logMetrics(Xo.ConfigUpdated,t),!0)}addEventListener(e,t){switch(Io.enumValues(xn).includes(e)&&this.logMetrics(Xo.EventListenerAdded,e),e){case xn.SHIPPING_CONTACT_CHANGED:this.shippingContactEventListener(t);break;case xn.SHIPPING_OPTION_CHANGED:this.shippingOptionEventListener(t);break;case lp.UPDATE:this.updateEventListener(t);break;case Fn.AFTERPAY_SHIPPING_ADDRESS_CHANGED:this.afterpayShippingContactEventListener(t);break;case Fn.AFTERPAY_SHIPPING_OPTION_CHANGED:this.afterpayShippingOptionEventListener(t);break;default:throw new tc("PaymentRequest.addEventListener","event","PaymentRequestEvent")}}dispatchEvent(e,t,r){return this.eventTarget.dispatchEvent(e,t,(t=>{if(Io.enumValues(Fn).includes(e)){var n=function(e){if(void 0!==e.error)return{isValid:!0,missingFields:[]};if(void 0!==e.shippingErrors)return{isValid:!0,missingFields:[]};if(void 0===e.shippingOptions)return{isValid:!1,missingFields:[["paymentRequestUpdate.shippingOptions","array"]]};var t=up(e.shippingOptions,"shippingOptions",{id:"string",label:"string",amount:"string",total:"object"});if(!t.isValid)return t;for(var r of e.shippingOptions){if(!(t=cp({"shippingOptions.total":r.total},{"shippingOptions.total":fp})).isValid)return t;if(void 0!==r.taxLineItems&&!(t=up(r.taxLineItems,"shippingOptions.taxLineItems",pp)).isValid)return t}return{isValid:!0,missingFields:[]}}(t);if(!n.isValid)throw new ui(n.missingFields);r(t)}else{var i=function(e){var{lineItems:t,discounts:r,taxLineItems:n,shippingLineItems:i,shippingErrors:o,shippingOptions:s,error:a,total:c}=e;if(t){var u=up(t,"lineItem",pp);if(!u.isValid)return u}if(r){var l=up(r,"discounts",pp);if(!l.isValid)return l}if(n){var d=up(n,"taxLineItems",pp);if(!d.isValid)return d}if(i){var p=up(i,"shippingLineItems",pp);if(!p.isValid)return p}if(s){var h=up(s,"shippingOption",hp);if(!h.isValid)return h}if(c){var f=cp({total:c},{total:fp});if(!f.isValid)return f}if(a&&"string"!=typeof a)return{isValid:!1,missingFields:[["error","string"]]};if(o){var g=cp(o,gp);if(!g.isValid)return g}return{isValid:!0,missingFields:[]}}(t);if(!i.isValid)throw new ui(i.missingFields);r(t)}}))}hasEventListener(e){return this.eventTarget.hasEventListener(e)}setMetricsHandler(e){this.metricsHandler=e,this.metricsBuffer.length>0&&(this.metricsBuffer.forEach((t=>{var[r,n]=t;e.logEvent(r,n)})),this.metricsBuffer=[])}shippingContactEventListener(e){var t=this;this.eventTarget.addEventListener(xn.SHIPPING_CONTACT_CHANGED,function(){var r=vp((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("ShippingContactUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return r.apply(this,arguments)}}())}shippingOptionEventListener(e){var t=this;this.eventTarget.addEventListener(xn.SHIPPING_OPTION_CHANGED,function(){var r=vp((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("ShippingOptionUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return r.apply(this,arguments)}}())}afterpayShippingContactEventListener(e){var t=this;this.eventTarget.addEventListener(Fn.AFTERPAY_SHIPPING_ADDRESS_CHANGED,function(){var r=vp((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("AfterpayShippingContactUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return r.apply(this,arguments)}}())}afterpayShippingOptionEventListener(e){this.eventTarget.addEventListener(Fn.AFTERPAY_SHIPPING_OPTION_CHANGED,(t=>{e(t.detail.contactOrOption)}))}updateEventListener(e){this.eventTarget.addEventListener(lp.UPDATE,(t=>{e(t.detail)}))}logMetrics(e,t){void 0!==this.metricsHandler?this.metricsHandler.logEvent(e,t):this.metricsBuffer.push([e,t])}}function Ip(e){return Boolean(e.shippingOptions&&e.shippingOptions.length>0)}function Cp(e){return cp(e,{countryCode:"string",currencyCode:"string",total:{amount:"string",label:"string"}})}class Op{constructor(){this.lockSet=new Set}get isLocked(){return this.lockSet.size>0}lock(e){this.lockSet.add(e)}unlock(e){this.lockSet.delete(e)}}class Tp extends Zn{constructor(){super("Method is not enabled for this app."),this.name="MethodNotAvailableError",Object.setPrototypeOf(this,Tp.prototype)}}!function(e){e.REQUEST_HYDRATION="REQUEST_HYDRATION"}(dp||(dp={}));var Pp=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URL(_.IFRAME_SRC);return Object.entries(e).forEach((e=>{var[r,n]=e;t.searchParams.set(r,n)})),t.toString()}(e);return cd({frameborder:"0",height:"0",scrolling:"no",src:t,style:"border: none !important; display: block !important; visibility: hidden !important",width:"0"})},Rp=function(e){var t=new(ls[e.name]||Zn);return t.fromSerializedError(e),t},wp=function(e){return{_isSerializedError:!0,errors:e.errors,message:e.message,name:e.name}};class bp extends class{constructor(e={}){this.logDevelopmentErrors=!1,this.messageListeners={},this.channel=new class{constructor(e){this.receiveMessage=e=>{switch(e.data){case this.messageWithName(on):this.handleConnecting(e);break;case this.messageWithName(nn):this.handleConnected();break;case this.messageWithName(sn):this.close();break;case this.messageWithName(an):break;default:this.handleMessage(e)}},this.connected=!1,this.listeners=[],this.messageBuffer=[],this.name=e?`:${e}`:""}close(){this.port&&(this.postMessage(this.messageWithName(sn)),this.port.close(),this.port=void 0,this.connected||window.removeEventListener("message",this.receiveMessage)),this.connected=!1}connect(e){if(this.connected)throw new en("message channel is already connected");if(e){if(void 0===e.origin)throw new en("message channel remote.origin must be defined");if(null===e.window)throw new en("message channel remote.window cannot be null");let t=new MessageChannel;this.setupPort(t.port1),e.window.postMessage(this.messageWithName(on),e.origin,[t.port2])}else window.addEventListener("message",this.receiveMessage)}setErrorHandler(e){this.errorHandler=e}set onmessage(e){this.listeners.push(e)}postMessage(e){this.port&&this.connected?this.port.postMessage(e):this.messageBuffer.push(e)}handleConnecting(e){if(this.connected)throw new en("message channel should not be connecting because already connected");window.removeEventListener("message",this.receiveMessage),this.setupPort(e.ports[0]),this.postMessage(this.messageWithName(nn)),this.connectionEstablished()}handleConnected(){if(this.connected)throw new en("message channel already connected");this.connectionEstablished()}connectionEstablished(){for(this.connected=!0;this.messageBuffer.length>0;)this.postMessage(this.messageBuffer.shift())}handleMessage(e){this.listeners.forEach((t=>{t(e)}))}setupPort(e){this.port=e,this.port.onmessage=this.receiveMessage,this.port.onmessageerror=e=>{this.postMessage(this.messageWithName(an)),this.errorHandler&&this.errorHandler(new en("message channel failed to deserialize message"),e)}}messageWithName(e){return e+this.name}}(e.name),this.channel.onmessage=this.handleMessage.bind(this),this.payloadSerializer=e.payloadSerializer,this.errorSerializer=e.errorSerializer,void 0!==e.logDevelopmentErrors&&(this.logDevelopmentErrors=e.logDevelopmentErrors)}setErrorHandler(e){this.errorHandler=e,this.channel.setErrorHandler(e)}sendOneWayMessage(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:this.uniqueId(),mustAcknowledge:!1,mustRespond:!1,payload:r,type:e})}sendMessage(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:this.uniqueId(),mustAcknowledge:!0,mustRespond:!1,payload:r,type:e})}request(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:this.uniqueId(),mustAcknowledge:!0,mustRespond:!0,payload:r,type:e})}respond(e,t){let r=`${e.type}:${Gr.OK}`,n=t;return void 0!==this.payloadSerializer&&(n=this.payloadSerializer.serialize(t)),this.postResponse(r,e,n)}reject(e,t){let r=`${e.type}:${Gr.ERROR}`,n=t;return void 0!==this.errorSerializer&&(n=this.errorSerializer.serialize(t)),this.postResponse(r,e,n)}onMessage(e,t){let r=t||this.uniqueId();return this.addMessageEventListener(e,r),r}connect(e,t){this.iframeID=t,this.channel.connect(e)}close(){this.channel.close()}handleMessage(e){let t=this.messageListeners[e.data.type];e.data.type&&"undefined"!==e.data.type?t?(e.data.mustAcknowledge&&this.acknowledge(e.data),Object.values(t).forEach((t=>{t.forEach((t=>{t(e)}))}))):this.logDevelopmentErrors&&console.error(`Listener does not exist for ${e.data.type}. Add one to your messenger instance:\n            messenger.onMessage({\n                    listener: (msg) => {},\n                    messageType: '${e.data.type}',\n                });\n          `):void 0!==this.errorHandler&&this.errorHandler(new tn("Received a messenger message with an undefined type"),e)}logMessengerTimeout(e){let t=new rn(e.type,e.id,this.iframeID);this.errorHandler&&this.errorHandler(t,new MessageEvent(e.type,{data:e}))}handleMessageContract(e){let t=this.errorSerializer,r=this.payloadSerializer;if(!e.mustAcknowledge)return new Promise((e=>{e({})}));let n,i=()=>{[Gr.ACK,Gr.OK,Gr.ERROR].forEach((t=>{delete this.messageListeners[`${e.type}:${t}`][n]}))},o=window.setTimeout((()=>{this.logMessengerTimeout(e)}),1e4);return new Promise(((s,a)=>{n=this.onMessage({listener(){clearTimeout(o),e.mustRespond||(i(),s({}))},messageType:`${e.type}:${Gr.ACK}`}),this.onMessage({listener(e){i();let{payload:t}=e.data;if(void 0!==r){let e=r.deserialize(t);s(e)}else s(t)},messageType:`${e.type}:${Gr.OK}`},n),this.onMessage({listener(e){i();let{payload:r}=e.data;if(void 0!==t){let e=t.deserialize(r);a(e)}else a(r)},messageType:`${e.type}:${Gr.ERROR}`},n)}))}acknowledge(e){let t=`${e.type}:${Gr.ACK}`;return this.message({id:e.id,mustAcknowledge:!1,mustRespond:!1,type:t})}postResponse(e,t,r){return this.message({id:t.id,mustAcknowledge:!0,mustRespond:!1,payload:r,type:e})}message(e){let t=this.handleMessageContract(e);return(!e.type||"undefined"===e.type)&&void 0!==this.errorHandler&&this.errorHandler(new tn("attempting to send a messenger message with an undefined type")),this.channel.postMessage(e),t}addMessageEventListener(e,t){let{messageType:r,listener:n}=e;this.messageListeners[r]=this.messageListeners[r]||{},this.messageListeners[r][t]=this.messageListeners[r][t]||[],this.messageListeners[r][t].push(n)}uniqueId(){return Date.now().toString()+Math.floor(8e3*Math.random())}}{constructor(e){super({name:e,errorSerializer:{serialize:e=>e instanceof Zn?wp(e):e,deserialize:e=>e instanceof Error?e:Rp(e)}})}setErrorLogger(e,t){this.setErrorHandler((function(r,n){var i,o,s,a,c,u;void 0!==n&&(i=null===(s=n.data.payload)||void 0===s||null===(a=s.session)||void 0===a?void 0:a.instanceId,o=null===(c=n.data.payload)||void 0===c||null===(u=c.session)||void 0===u?void 0:u.sessionId),r instanceof rn?t.logEvent({event:es.IframeMessengerTimeoutError,eventSource:os.App,internalConfigurationValues:r.message},i,o):e.captureException(r)}))}}function Np(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Dp(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Np(o,n,i,s,a,"next",e)}function a(e){Np(o,n,i,s,a,"throw",e)}s(void 0)}))}}function Lp(){return(Lp=Dp((function*(e,t,r,n,i){var o=new bp(i);return o.setErrorLogger(t,r),o.connect({origin:_.ASSET_URL,window:e.contentWindow},e.id),yield o.sendMessage(Sa,n),o}))).apply(this,arguments)}var xp={build:function(e,t,r,n,i){return Lp.apply(this,arguments)}};function Up(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function kp(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Up(o,n,i,s,a,"next",e)}function a(e){Up(o,n,i,s,a,"throw",e)}s(void 0)}))}}function Mp(){return(Mp=kp((function*(e,t,r,n){var{applicationId:i,locationId:o,hostname:s,sourceUrl:a}=e;t.logEvent({event:Zo.InitializeStart,eventSource:os.App});var c,u,l=n.getCurrentLocale();try{c=yield Pp({applicationId:i,hostname:s})}catch(e){if(t.logEvent({event:Zo.InitializeError,eventSource:os.App}),r.captureException(e),Qo(e))throw new Li("initializing the payment method");throw e}try{u=yield xp.build(c,r,t,{applicationId:i,hostname:s,locale:l,locationId:o})}catch(e){if(t.logEvent({event:Zo.InitializeError,eventSource:os.App}),r.captureException(e),Qo(e))throw new Li("initializing the payment method");throw e}try{var{avt:d,sessionId:p,applePartnerInternalMerchantIdentifier:h,cashAppPayMerchantIdentifier:f,instanceId:g,paymentMethodSupportDetail:m,featureFlagValues:E}=yield u.request(dp.REQUEST_HYDRATION,{body:{applicationId:i,hostname:s,locationId:o}});t.setAvt(d);var y=new od({applePayMerchantIdentifier:h,cashAppPayMerchantIdentifier:f,applicationId:i,avt:d,hostname:s,instanceId:g,locale:l,locationId:o,sessionId:p,sourceUrl:a});return t.logEvent({event:Zo.InitializeOK,eventSource:os.App,internalConfigurationValues:E},g,p),{featureFlagValues:E,localeStrings:n,messenger:u,paymentMethodSupportDetail:m,session:y}}catch(e){if(t.logEvent({event:Zo.InitializeError,eventSource:os.App}),Qo(e))throw new Li("initializing the payment method");throw e}}))).apply(this,arguments)}function Hp(){return(Hp=kp((function*(e,t,r){var{applicationId:n,locationId:i,sourceUrl:o}=e.serialize();try{var s=yield Ya.getToken({applicationId:n,locationId:i,websiteUrl:o});e.setAnalyticsToken(s)}catch(e){e instanceof Pi&&t.captureException(e),r&&window.clearInterval(r)}}))).apply(this,arguments)}var Bp,Gp,jp={initializeAnalytics:function(e,t,r){return Hp.apply(this,arguments)},initializePayment:function(e,t,r,n){return Mp.apply(this,arguments)},validateVerificationDetails:function(e,t){var r=[];return e.billingContact&&"object"==typeof e.billingContact||r.push(new tc(t,"details.billingContact","object")),e.intent&&"string"==typeof e.intent&&["CHARGE","STORE"].includes(e.intent)||r.push(new tc(t,"details.intent","string")),"CHARGE"===e.intent&&(e.amount&&"string"==typeof e.amount||r.push(new tc(t,"details.amount","string")),e.currencyCode&&"string"==typeof e.currencyCode||r.push(new tc(t,"details.currencyCode","string"))),r}};!function(e){e.REQUEST_APPLE_PAY_CARD_NONCE="REQUEST_APPLE_PAY_CARD_NONCE",e.REQUEST_APPLE_PAY_MERCHANT_VALIDITY="REQUEST_APPLE_PAY_MERCHANT_VALIDITY"}(Bp||(Bp={})),function(e){e.SUCCESS="SUCCESS",e.CANCEL="CANCEL"}(Gp||(Gp={}));var qp,Fp={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua And Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"Finland",AZ:"Azerbaijan",BA:"Bosnia And Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria (rep.)",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthelemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia",BQ:"Bonaire, Sint Eustatius, And Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (keeling) Islands",CD:"Congo (dem. Rep.)",CF:"Central African Republic",CG:"Congo (rep.)",CH:"Switzerland",CI:"Cote D'ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CV:"Cape Verde",CW:"Curacao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Rep.",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Rep.",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (malvinas)",FM:"Micronesia (federated State Of)",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada (west Indies)",GE:"Georgia",GF:"French Guiana",GG:"Channel Islands",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia",GT:"Guatemala",GU:"Guam",GW:"Guinea-bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard And Mcdonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary (rep.)",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle Of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran",IS:"Iceland",IT:"Italy",JE:"Channel Islands",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts And Nevis",KR:"South Korea",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao (people's Dem. Rep.)",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Rep. Moldova",ME:"Montenegro",MF:"Saint Martin",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru Central Pacific",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama (rep.)",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"St. Pierre And Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestinian Territory",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Reunion",RO:"Romania",RS:"Republic Of Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SE:"Sweden",SG:"Rep. Of Singapore",SH:"Saint Helena",SI:"Slovenia",SJ:"Svalbard And Jan Mayen Islands",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome And Principe",SV:"El Salvador",SX:"Sint Maarten",SZ:"Swaziland",TC:"Turks And Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad And Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania (united Rep.)",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Vatican",VC:"Saint Vincent And The Grenadines (antilles)",VE:"Venezuela",VG:"Virgin Islands (british)",VI:"Virgin Islands (u.s.)",VN:"Viet Nam",VU:"Vanuatu",WF:"Wallis And Futuna Islands",WS:"Samoa",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"};function Vp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vp(Object(r),!0).forEach((function(t){zp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zp(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.PENDING="pending",e.FINAL="final"}(qp||(qp={}));var Kp={addressLines:"addressLines",city:"locality",country:"countryCode",postalCode:"postalCode",state:"administrativeArea"},Wp=["visa","masterCard","jcb","discover","amex"];function $p(e){return{amount:e.amount,label:e.label,type:e.pending?qp.PENDING:qp.FINAL}}function Qp(e){return{amount:e.amount,detail:"",identifier:e.id,label:e.label}}function Zp(e,t){return t?$p(t):e}function Jp(e,t){return t?t.map($p):e}function Xp(e,t){return t?t.map(Qp):e}function eh(){for(var e=3;e>0&&!window.ApplePaySession.supportsVersion(e);)e--;return e}function th(e){var{addressLines:t,locality:r,administrativeArea:n,postalCode:i,countryCode:o,givenName:s,familyName:a,emailAddress:c,phoneNumber:u}=e;return{addressLines:t,city:r,countryCode:o&&o.toUpperCase(),email:c,familyName:a,givenName:s,phone:u,postalCode:i,state:n}}function rh(e){var{amount:t,identifier:r,label:n}=e;return{amount:t,id:r,label:n}}function nh(e,t,r){return{errors:(n=e,i=[],n.error&&i.push(new window.ApplePayError("addressUnserviceable","postalAddress",n.error)),n.shippingErrors&&Object.entries(n.shippingErrors).forEach((e=>{var[t,r]=e,n=Kp[t]||"postalAddress";i.push(new window.ApplePayError("shippingContactInvalid",n,r))})),i),newLineItems:Jp(t.lineItems,mp(e,r)),newShippingMethods:Xp(t.shippingMethods,e.shippingOptions),newTotal:Zp(t.total,e.total)};var n,i}function ih(e,t,r){var n=nh(e,t,r);return Yp({status:window.ApplePaySession.STATUS_SUCCESS},n)}function oh(e,t,r){return{newLineItems:Jp(t.lineItems,mp(e,r)),newTotal:Zp(t.total,e.total)}}function sh(e,t,r){var n=nh(e,t,r);return Yp({status:window.ApplePaySession.STATUS_SUCCESS},n)}function ah(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ch(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ah(Object(r),!0).forEach((function(t){uh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ah(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function uh(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lh(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function dh(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){lh(o,n,i,s,a,"next",e)}function a(e){lh(o,n,i,s,a,"throw",e)}s(void 0)}))}}class ph extends cc{constructor(e,t,r){if(super(t),this.methodType=Ln.APPLE_PAY,this.sessionInProgress=!1,this.wasFirstInteractionCalled=!1,this.paymentMethodMessenger=new pc(this.context),this.paymentRequestLockController=r,this.req=e,void 0===window.ApplePaySession)throw new Oi(Xa.APPLE_PAY_BROWSER_NOT_SUPPORTED);if(!window.ApplePaySession.canMakePayments())throw new Oi(Xa.APPLE_PAY_DEVICE_NOT_SUPPORTED);this.validateConfiguration()}get applePaySession(){if(!this.sessionHandler){var e="Apple Pay Session is expected to exist when it does not.";throw this.errorLogger.captureException(new Vo(e,"Apple Pay")),new Li(e)}return this.sessionHandler}set applePaySession(e){this.sessionHandler=e}tokenize(){var e=this;return dh((function*(){if(e.handleFirstInteraction(),e.throwIfDestroyed(),e.sessionInProgress)throw new Di([lc]);e.applePayPaymentRequest=function(e,t){var r=[...Wp];null!=t&&t.isActive(vo.CanUseInterac)&&r.push("interac");var n,i={countryCode:e.countryCode,currencyCode:e.currencyCode,lineItems:Jp([],mp(e)),merchantCapabilities:["supports3DS"],requiredBillingContactFields:["postalAddress"],shippingMethods:Xp([],e.shippingOptions),supportedNetworks:r,total:$p(e.total)};return e.shippingContact&&(i.shippingContact={addressLines:(n=e.shippingContact).addressLines,administrativeArea:n.state,country:Fp[n.countryCode],countryCode:n.countryCode,emailAddress:n.email,familyName:n.familyName,givenName:n.givenName,locality:n.city,phoneNumber:n.phone,postalCode:n.postalCode}),e.requestBillingContact&&(i.requiredShippingContactFields=["email","name","phone"]),e.requestShippingContact&&(i.requiredShippingContactFields=["postalAddress","name","email","phone"]),i}(e.req,e.featureFlagHandler),e.applePaySession=new window.ApplePaySession(eh(),e.applePayPaymentRequest);var t=e.shippingContactChanged.bind(e);e.applePaySession.onshippingcontactselected=r=>{t(r.shippingContact,e.applePayPaymentRequest)};var r=e.shippingOptionChanged.bind(e);e.applePaySession.onshippingmethodselected=t=>{r(t.shippingMethod,e.applePayPaymentRequest)};var n=new Promise((t=>{e.applePaySession.oncancel=()=>{e.metricsHandler.logEvent(Jo.ExternalSessionCancel),e.deleteApplePaySession(),t({status:Gp.CANCEL})}})),i=new Promise(((t,r)=>{e.applePaySession.onvalidatemerchant=function(){var n=dh((function*(n){try{var i=yield e.requestApplePayMerchantValidity(n.validationURL,e.applePayPaymentRequest);t(i)}catch(e){r(e)}}));return function(e){return n.apply(this,arguments)}}()})),o=new Promise(((t,r)=>{e.applePaySession.onpaymentauthorized=function(){var n=dh((function*(n){try{var i=yield e.requestApplePayCardNonce(n);e.deleteApplePaySession(),t(i)}catch(t){e.deleteApplePaySession(),r(t)}}));return function(e){return n.apply(this,arguments)}}()}));e.sessionInProgress=!0,e.paymentRequestLockController.lock(e),e.metricsHandler.logEvent(Jo.ExternalSessionStart),e.applePaySession.begin();try{var s=yield i;e.applePaySession.completeMerchantValidation(s);var{status:a,token:c,details:u}=yield Promise.race([o,n]);return e.metricsHandler.logEvent(Jo.ExternalSessionOK),a===Gp.SUCCESS?{details:u,status:Un.OK,token:c}:{status:Un.CANCEL}}catch(t){throw e.metricsHandler.logEvent(Jo.ExternalSessionError),t}}))()}destroy(){return this.sessionHandler&&(this.sessionHandler.abort(),this.deleteApplePaySession()),this.status=oc.DESTROYED,this.metricsHandler.logEvent(Xo.Destroyed),Promise.resolve(!0)}validateConfiguration(){var e=this.session;if(!e.applePayMerchantIdentifier)throw new Oi(Xa.INVALID_CONFIG,"applePayMerchantIdentifier");if(!e.locationId)throw new Oi(Xa.INVALID_CONFIG,"locationId")}requestApplePayCardNonce(e){var t=this;return dh((function*(){var r={applepayData:e.payment},n=t.selectedShippingMethod||t.getDefaultShippingMethod();try{var i=yield t.paymentMethodMessenger.request(Bp.REQUEST_APPLE_PAY_CARD_NONCE,r);return t.applePaySession.completePayment(window.ApplePaySession.STATUS_SUCCESS),t.context.setPaymentMethodTrackingId(i.paymentMethodTrackingId),t.wasFirstInteractionCalled=!1,yield t.context.updateSession(i.sessionId),function(e,t){var{card:r,cardNonce:n,shippingContact:i,billingContact:o}=e,s={details:{card:r,method:Ln.APPLE_PAY},status:Gp.SUCCESS,token:n};if(i){var a={contact:i};t&&(a.option=rh(t)),s.details.shipping=a}return o&&(s.details.card&&(s.details.card.billing=o),s.details.billing=o),s}(i,n)}catch(e){throw t.applePaySession.completePayment(window.ApplePaySession.STATUS_FAILURE),e instanceof Di||t.errorLogger.captureException(e),e}}))()}requestApplePayMerchantValidity(e,t){var r=this;return dh((function*(){var n,i=t&&t.total?t.total.label:null,o=r.session,s={clientId:o.applicationId,locationId:o.locationId,merchantName:i,sourceUrl:o.sourceUrl,validationUrl:e};try{n=yield r.paymentMethodMessenger.request(Bp.REQUEST_APPLE_PAY_MERCHANT_VALIDITY,s)}catch(e){throw r.applePaySession.abort(),r.deleteApplePaySession(),e}try{return JSON.parse(n.session)}catch(e){throw r.applePaySession.abort(),r.deleteApplePaySession(),r.errorLogger.captureException(new Vo(e.message,r.methodType)),new Li("parsing Apple Pay merchant validity")}}))()}shippingContactChanged(e,t){var r=eh()>=3?this.updateApplePayShippingContactV3(t):this.updateApplePayShippingContactLegacy(t);this.req.hasEventListener(xn.SHIPPING_CONTACT_CHANGED)?this.req.dispatchEvent(xn.SHIPPING_CONTACT_CHANGED,{contactOrOption:th(e)},(e=>{this.metricsHandler.logEvent(Xo.EventListenerOnCompleteResponse,ch(ch({},e),{},{eventName:xn.SHIPPING_CONTACT_CHANGED})),this.handleShippingContactUpdate(r,e)})):this.handleShippingContactUpdate(r)}handleShippingContactUpdate(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null===(t=r.shippingOptions)||void 0===t?void 0:t[0],i=this.getDefaultShippingMethod();void 0===n&&null!==i&&(n=rh(i)),void 0!==n&&this.req.hasEventListener(xn.SHIPPING_OPTION_CHANGED)?(this.selectedShippingMethod=Qp(n),this.req.dispatchEvent(xn.SHIPPING_OPTION_CHANGED,{contactOrOption:n},(t=>{this.metricsHandler.logEvent(Xo.EventListenerOnCompleteResponse,ch(ch({},t),{},{eventName:xn.SHIPPING_OPTION_CHANGED})),e(Object.assign({},r,t))}))):e(r)}shippingOptionChanged(e,t){this.selectedShippingMethod=e;var r=eh()>=3?this.updateApplePayShippingMethodV3(t):this.updateApplePayShippingMethodLegacy(t);this.req.hasEventListener(xn.SHIPPING_OPTION_CHANGED)?this.req.dispatchEvent(xn.SHIPPING_OPTION_CHANGED,{contactOrOption:rh(e)},r):r()}updateApplePayPaymentRequest(e){e.newTotal&&(this.applePayPaymentRequest.total=e.newTotal),e.newLineItems&&(this.applePayPaymentRequest.lineItems=e.newLineItems),e.newShippingMethods&&(this.applePayPaymentRequest.shippingMethods=e.newShippingMethods)}updateApplePayShippingContactV3(e){var t=this;return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=nh(r,e,t.req);t.updateApplePayPaymentRequest(n),t.metricsHandler.logEvent(Jo.ShippingAddressChangeOK),t.applePaySession.completeShippingContactSelection(n)}}updateApplePayShippingContactLegacy(e){var t=this;return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=ih(r,e,t.req);t.updateApplePayPaymentRequest(n),t.metricsHandler.logEvent(Jo.ShippingAddressChangeOK),t.applePaySession.completeShippingContactSelection(n.status,n.newShippingMethods,n.newTotal,n.newLineItems)}}updateApplePayShippingMethodV3(e){var t=this;return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=oh(r,e,t.req);t.updateApplePayPaymentRequest(n),t.metricsHandler.logEvent(Jo.ShippingOptionChangeOK),t.applePaySession.completeShippingMethodSelection(n)}}updateApplePayShippingMethodLegacy(e){var t=this;return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=sh(r,e,t.req);t.updateApplePayPaymentRequest(n),t.metricsHandler.logEvent(Jo.ShippingOptionChangeOK),t.applePaySession.completeShippingMethodSelection(n.status,n.newTotal,n.newLineItems)}}getDefaultShippingMethod(){var e=this.applePayPaymentRequest.shippingMethods;return e&&e.length>0?this.applePayPaymentRequest.shippingMethods[0]:null}deleteApplePaySession(){delete this.sessionHandler,this.paymentRequestLockController.unlock(this),this.sessionInProgress=!1}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.metricsHandler.logEvent(Zo.FirstInteraction),this.wasFirstInteractionCalled=!0)}}function hh(e,t){return Intl.NumberFormat(g.windowNavigationLanguage,{currency:t,style:"currency"}).format(Number.parseFloat(e))}var fh=["PAN_ONLY","CRYPTOGRAM_3DS"],gh=["AMEX","DISCOVER","JCB","MASTERCARD","VISA"];function mh(e){return{label:e.label,price:e.amount,status:e.pending?s.Estimated:s.Final,type:"LINE_ITEM"}}function Eh(e,t){var r=null!=t?t:e;return r?r.map((e=>mh(e))):[]}function yh(e,t){return t.map((t=>function(e,t){return{description:hh(t.amount,e),id:t.id,label:t.label}}(e,t)))}function vh(e,t,r,n){var i=null!=n?n:r;if(i&&i.length>0){var o={shippingOptions:yh(e,i)};return i.some((e=>(null==e?void 0:e.id)===t))&&(o.defaultSelectedOptionId=t),o}}function _h(e,t){return null==t?void 0:t.find((t=>t.id===e))}function Ah(e,t,r,n,i,o){var{countryCode:s,currencyCode:a,total:c,lineItems:u,taxLineItems:l,discounts:d,requestBillingContact:p,requestShippingContact:h,shippingOptions:f}=t,g=Ip(t),m=Boolean(h||g),E=Object.assign({},e,{emailRequired:Boolean(p),merchantInfo:i,shippingAddressRequired:m,shippingOptionRequired:g,transactionInfo:{countryCode:s,currencyCode:a,totalPrice:c.amount,totalPriceLabel:c.label,totalPriceStatus:n}});if(u&&u.length>0&&(E.transactionInfo.displayItems=Eh([],mp({lineItems:u,taxLineItems:l,discounts:d},t))),m&&(E.shippingAddressParameters={phoneNumberRequired:!0}),g){var y=vh(a,o,[],f);y&&(E.shippingOptionParameters=y)}return r.length>0&&(E.callbackIntents=r),E}function Sh(e,t){var r=[];return e.error&&r.push({intent:t,message:e.error,reason:ji.SHIPPING_ADDRESS_UNSERVICEABLE}),e.shippingErrors&&Object.entries(e.shippingErrors).forEach((e=>{var[n,i]=e;r.push({intent:t,message:"".concat(n,": ").concat(i),reason:ji.SHIPPING_ADDRESS_INVALID})})),r}function Ih(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ch(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ih(Object(r),!0).forEach((function(t){Oh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ih(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Oh(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Th(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Ph(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Th(o,n,i,s,a,"next",e)}function a(e){Th(o,n,i,s,a,"throw",e)}s(void 0)}))}}var Rh,wh,bh,Nh,Dh=["#google"];class Lh extends cc{constructor(e,t,r,n,i){var o;super(r),this.methodType=Ln.GOOGLE_PAY,this.shippingOptions=void 0,this.wasFirstInteractionCalled=!1,this.validateConfiguration(),this.paymentRequestLockController=i,this.req=t,this.merchantInfo=n,this.element=null,this.paymentMethodMessenger=new pc(r),Ip(this.req)&&(this.shippingOptions=this.req.shippingOptions,this.selectedShippingOptionId=null===(o=this.req.shippingOptions)||void 0===o?void 0:o[0].id),this.callbackIntents=function(e,t){var r=[],n=Ip(e)&&t.includes(xn.SHIPPING_OPTION_CHANGED),i=e.requestShippingContact&&t.includes(xn.SHIPPING_CONTACT_CHANGED);return n?r.push(a.SHIPPING_ADDRESS,a.SHIPPING_OPTION):i&&r.push(a.SHIPPING_ADDRESS),(!g.isAndroid()||n||i)&&r.push(a.PAYMENT_AUTHORIZATION),r}(this.req,this.handlers);var s,p,h,f,m=function(e,t,r){var n={environment:_.GOOGLE_PAY_ENV,merchantInfo:r},i=e.includes(a.SHIPPING_OPTION)||e.includes(a.SHIPPING_ADDRESS);if(!g.isAndroid()||i){var o={onPaymentAuthorized:()=>({transactionState:d.SUCCESS})};i&&(o.onPaymentDataChanged=t),n.paymentDataCallbacks=o}return n}(this.callbackIntents,this.onPaymentDataChanged.bind(this),this.merchantInfo);this.googlePayClient=new e.api.PaymentsClient(m),this.isReadyToPayRequest=(s=this.session.applicationId,p=this.req.requestBillingContact,h=this.featureFlagHandler,f=[...gh],null!=h&&h.isActive(vo.CanUseInterac)&&f.push("INTERAC"),{allowedPaymentMethods:[{parameters:{allowedAuthMethods:fh,allowedCardNetworks:f,billingAddressParameters:{format:p?c.FULL:c.MIN,phoneNumberRequired:Boolean(p)},billingAddressRequired:!0},tokenizationSpecification:{parameters:{gateway:"square",gatewayMerchantId:s},type:l.PAYMENT_GATEWAY},type:u.CARD}],apiVersion:2,apiVersionMinor:0})}get handlers(){var e=[];return this.req.hasEventListener(xn.SHIPPING_OPTION_CHANGED)&&e.push(xn.SHIPPING_OPTION_CHANGED),this.req.hasEventListener(xn.SHIPPING_CONTACT_CHANGED)&&e.push(xn.SHIPPING_CONTACT_CHANGED),e}attach(e,t){var r=this;return Ph((function*(){var n,i,o;r.throwIfDestroyedOrAlreadyAttached(),r.status=oc.ATTACHED;var s=null!==(n=null==t?void 0:t.buttonColor)&&void 0!==n?n:Hi.DEFAULT,a=null!==(i=null==t?void 0:t.buttonSizeMode)&&void 0!==i?i:Bi.STATIC,c=null!==(o=null==t?void 0:t.buttonType)&&void 0!==o?o:Gi.LONG;r.metricsHandler.logEvent(Zo.AttachStart),r.metricsHandler.logEvent(Xo.Configured,t);try{r.element=gd(e)}catch(e){throw r.status===oc.ATTACHED&&(r.status=oc.DETACHED),r.metricsHandler.logEvent(Zo.AttachError),e}r.isReadyToPay=yield r.checkIfReadyToPay(Zo.AttachError);try{var u=r.googlePayClient.createButton({buttonColor:s,buttonSizeMode:a,buttonType:c,onClick:()=>{}});return r.element.appendChild(u),void r.metricsHandler.logEvent(Zo.AttachOK)}catch(e){throw r.status===oc.ATTACHED&&(r.status=oc.DETACHED),r.errorLogger.captureException(e),r.metricsHandler.logEvent(Zo.AttachError),r.status=oc.DETACHED,new Oi(Xa.UNKNOWN,e)}}))()}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(oc.DETACHED,Xo.Detached),Promise.resolve()}destroy(){return this.status===oc.DESTROYED?Promise.resolve(!1):(this.detachElement(oc.DESTROYED,Xo.Destroyed),Promise.resolve(!0))}tokenize(){var e=this;return Ph((function*(){var t;e.throwIfDestroyed(),e.handleFirstInteraction(),e.metricsHandler.logEvent(Jo.ExternalSessionStart),e.isReadyToPay=e.isReadyToPay||(yield e.checkIfReadyToPay(Jo.ExternalSessionError)),e.paymentRequestLockController.lock(e);try{t=yield e.loadPaymentData(),delete e.googlePayTokenDeferred,e.metricsHandler.logEvent(Jo.ExternalSessionOK)}catch(t){if(delete e.googlePayTokenDeferred,e.paymentRequestLockController.unlock(e),"CANCELED"===t.statusCode)return e.metricsHandler.logEvent(Jo.ExternalSessionCancel),{status:Un.CANCEL};if(e.metricsHandler.logEvent(Jo.ExternalSessionError),t instanceof Error)throw e.errorLogger.captureException(t),t;throw e.errorLogger.captureException(new Vo(JSON.stringify(t),e.methodType)),new Li("tokenizing Google Pay.")}var{token:r,details:n}=yield e.requestGooglePayCardNonce(t);return{details:n,status:Un.OK,token:r}}))()}validateConfiguration(){var e=Dh.join(", ");if(document.querySelectorAll(e).length>0)throw new Ci(this.methodType,e)}checkIfReadyToPay(e){var t=this;return Ph((function*(){var r=!1;try{var{result:n}=yield t.googlePayClient.isReadyToPay(t.isReadyToPayRequest);r=n}catch(e){t.errorLogger.captureException(e)}if(r){var i=t.callbackIntents.length>0?s.Unknown:s.Final;return t.googlePayClient.prefetchPaymentData(Ah(t.isReadyToPayRequest,t.req,t.callbackIntents,i,t.merchantInfo,t.selectedShippingOptionId)),r}throw t.metricsHandler.logEvent(e),new Oi(Xa.GOOGLE_PAY_BROWSER_NOT_SUPPORTED)}))()}loadPaymentData(){return this.googlePayTokenDeferred||(this.googlePayTokenDeferred=this.googlePayClient.loadPaymentData(Ah(this.isReadyToPayRequest,this.req,this.callbackIntents,s.Final,this.merchantInfo,this.selectedShippingOptionId))),this.googlePayTokenDeferred}onPaymentDataChanged(e){switch(e.callbackTrigger){case a.INITIALIZE:case a.SHIPPING_ADDRESS:return this.onPaymentDataChangedShippingAddress(e);case a.SHIPPING_OPTION:return this.onPaymentDataChangedShippingOption(e);default:return this.errorLogger.captureException(new Vo("Unknown callbackTrigger: ".concat(e.callbackTrigger),Ln.GOOGLE_PAY)),Promise.resolve({})}}onPaymentDataChangedShippingOption(e){var t=this;return Ph((function*(){var r;t.selectedShippingOptionId=null===(r=e.shippingOptionData)||void 0===r?void 0:r.id;var{updatedOptionRequest:n,optionErrors:i}=yield t.dispatchShippingOptionChanged(t.selectedShippingOptionId,t.shippingOptions);return t.paymentDataChangedComplete(n,i)}))()}dispatchShippingOptionChanged(e,t){var r=this,n={optionErrors:[],updatedOptionRequest:{}};if(!this.handlers.includes(xn.SHIPPING_OPTION_CHANGED))return Promise.resolve(n);var i=_h(e,t);return i?this.status===oc.DESTROYED?Promise.resolve({optionErrors:[{intent:a.SHIPPING_OPTION,message:"An error occurred when attempting to submit payment, please close this window and try again.",reason:ji.PAYMENT_METHOD_DESTROYED}],updatedOptionRequest:{}}):new Promise((e=>{this.req.dispatchEvent(xn.SHIPPING_OPTION_CHANGED,{contactOrOption:i},(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.metricsHandler.logEvent(Xo.EventListenerOnCompleteResponse,Ch(Ch({},t),{},{eventName:xn.SHIPPING_OPTION_CHANGED})),r.metricsHandler.logEvent(Jo.ShippingOptionChangeOK),e({optionErrors:Sh(t,a.SHIPPING_OPTION),updatedOptionRequest:t})}))})):Promise.resolve(n)}onPaymentDataChangedShippingAddress(e){var t=this;return Ph((function*(){var{updatedContactRequest:r,contactErrors:n}=yield t.dispatchShippingContactChanged(e);if(void 0===t.req.shippingOptions||0===t.req.shippingOptions.length)return t.paymentDataChangedComplete(r,n);var i,o=t.shippingOptions;void 0!==r.shippingOptions?(o=r.shippingOptions,t.selectedShippingOptionId=r.shippingOptions[0].id):t.selectedShippingOptionId=null===(i=t.shippingOptions)||void 0===i?void 0:i[0].id;var{updatedOptionRequest:s,optionErrors:a}=yield t.dispatchShippingOptionChanged(t.selectedShippingOptionId,o),c=Object.assign({},r,s),u=[...n,...a];return t.paymentDataChangedComplete(c,u)}))()}dispatchShippingContactChanged(e){var t=this,r={contactErrors:[],updatedContactRequest:{}};return new Promise((n=>{var i;void 0!==e.shippingAddress&&this.handlers.includes(xn.SHIPPING_CONTACT_CHANGED)?this.status!==oc.DESTROYED?this.req.dispatchEvent(xn.SHIPPING_CONTACT_CHANGED,{contactOrOption:(i=e.shippingAddress,{city:i.locality,countryCode:i.countryCode,postalCode:i.postalCode,state:i.administrativeArea})},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.metricsHandler.logEvent(Xo.EventListenerOnCompleteResponse,Ch(Ch({},e),{},{eventName:xn.SHIPPING_CONTACT_CHANGED})),t.metricsHandler.logEvent(Jo.ShippingAddressChangeOK),n({contactErrors:Sh(e,a.SHIPPING_ADDRESS),updatedContactRequest:e})})):n({contactErrors:[{intent:a.SHIPPING_ADDRESS,message:"An error occurred when attempting to submit payment, please close this window and try again.",reason:ji.PAYMENT_METHOD_DESTROYED}],updatedContactRequest:{}}):n(r)}))}paymentDataChangedComplete(e,t){e.shippingOptions&&e.shippingOptions.length>0&&(this.shippingOptions=e.shippingOptions);var r=function(e,t,r,n){var i,{total:o,countryCode:s,currencyCode:a}=t,c=r,u=mh(null!==(i=e.total)&&void 0!==i?i:o),l={totalPrice:u.price,totalPriceLabel:u.label,totalPriceStatus:u.status},d=Object.assign({},{countryCode:s,currencyCode:a},l),p=Eh(mp(t),mp(e,t));p.length>0&&(d.displayItems=p);var h={newTransactionInfo:d},f=vh(a,n,c,e.shippingOptions);return f&&(h.newShippingOptionParameters=f),h}(e,this.req,this.shippingOptions,this.selectedShippingOptionId);return t.length>0&&(r.error=t[0]),r}requestGooglePayCardNonce(e){var t=this;return Ph((function*(){var r=_h(t.selectedShippingOptionId,t.shippingOptions);try{var n=yield t.paymentMethodMessenger.request(ic.REQUEST_GOOGLE_PAY_CARD_NONCE,e);return t.context.setPaymentMethodTrackingId(n.paymentMethodTrackingId),yield t.context.updateSession(n.sessionId),t.wasFirstInteractionCalled=!1,t.paymentRequestLockController.unlock(t),function(e,t){var{card:r,cardNonce:n,shippingContact:i,billingContact:o}=e,s={details:{card:r,method:Ln.GOOGLE_PAY},token:n};return i&&(s.details.shipping={contact:i},t&&(s.details.shipping.option=t)),o&&(s.details.card&&(s.details.card.billing=o),s.details.billing=o),s}(n,r)}catch(e){throw t.paymentRequestLockController.unlock(t),e instanceof Di||t.errorLogger.captureException(e),e}}))()}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(Zo.FirstInteraction))}detachElement(e,t){this.element&&(this.element.innerHTML=""),this.status=e,this.metricsHandler.logEvent(t)}}!function(e){e.SHIPPING_ADDRESS_UNRECOGNIZED="SHIPPING_ADDRESS_UNRECOGNIZED",e.SHIPPING_ADDRESS_UNSUPPORTED="SHIPPING_ADDRESS_UNSUPPORTED",e.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE"}(Rh||(Rh={})),function(e){e.BADGE="badge",e.LOCKUP="lockup"}(wh||(wh={})),function(e){e.BLACK="black",e.WHITE="white",e.MINT="mint"}(bh||(bh={})),function(e){e.REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN="REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN",e.REQUEST_AFTERPAY_CHECKOUT_HANDLER="REQUEST_AFTERPAY_CHECKOUT_HANDLER"}(Nh||(Nh={}));var xh="sq-afterpay-styles",Uh={[kn.BLACK]:{[Mn.CheckoutWithAfterpay]:"afterpay-buttons/Afterpay_Checkout_Button_Black-White.svg",[Mn.BuyNowWithAfterpay]:"afterpay-buttons/Afterpay_BuyNow_Button_Black-White.svg",[Mn.PlaceOrderWithAfterpay]:"afterpay-buttons/Afterpay_PlaceOrder_Button_Black-White.svg"},[kn.MINT]:{[Mn.CheckoutWithAfterpay]:"afterpay-buttons/Afterpay_Checkout_Button_Mint-Black.svg",[Mn.BuyNowWithAfterpay]:"afterpay-buttons/Afterpay_BuyNow_Button_Mint-Black.svg",[Mn.PlaceOrderWithAfterpay]:"afterpay-buttons/Afterpay_PlaceOrder_Button_Mint-Black.svg"}},kh={[kn.BLACK]:{[Mn.CheckoutWithAfterpay]:"afterpay-buttons/Clearpay_Checkout_Button_Black-White.svg",[Mn.BuyNowWithAfterpay]:"afterpay-buttons/Clearpay_BuyNow_Button_Black-White.svg",[Mn.PlaceOrderWithAfterpay]:"afterpay-buttons/Clearpay_PlaceOrder_Button_Black-White.svg"},[kn.MINT]:{[Mn.CheckoutWithAfterpay]:"afterpay-buttons/Clearpay_Checkout_Button_Mint-Black.svg",[Mn.BuyNowWithAfterpay]:"afterpay-buttons/Clearpay_BuyNow_Button_Mint-Black.svg",[Mn.PlaceOrderWithAfterpay]:"afterpay-buttons/Clearpay_PlaceOrder_Button_Mint-Black.svg"}},Mh=new Set(["US","CA","AU","NZ"]);function Hh(e,t){var r=0;return e.forEach((e=>{r+=Io.paymentRequestAmountToMoneyAmount(e,t)})),Io.moneyAmountToPaymentRequestAmount(r,t)}function Bh(e,t){return Hh(e.map((e=>e.amount)),t)}var Gh=function(e,t){return e.map((e=>({name:e.label,quantity:1,sku:e.id,price:{amount:e.amount,currency:t},imageUrl:e.imageUrl,pageUrl:e.productUrl})))},jh=function(e,t){return e.map((e=>({displayName:e.label,amount:{amount:e.amount,currency:t}})))},qh=function(e){return{area1:e.city,countryCode:e.countryCode,line1:e.addressLines[0],line2:e.addressLines[1],name:"".concat(e.givenName," ").concat(e.familyName),phoneNumber:e.phone,postcode:e.postalCode,region:e.state}},Fh=function(e){if(e.requestShippingContact&&void 0!==e.lineItems&&e.lineItems.length>0){var t=Bh(e.lineItems,e.currencyCode);if(e.discounts)t=Hh([t,(r=e.discounts,n=e.currencyCode,"-".concat(Bh(r,n)))],e.currencyCode);return{amount:t,currency:e.currencyCode}}var r,n;return{amount:e.total.amount,currency:e.currencyCode}},Vh=function(e,t){return e.shippingOptions.map((e=>({description:"",id:e.id,name:e.label,shippingAmount:{amount:e.amount,currency:t.currencyCode},orderAmount:{amount:e.total.amount,currency:t.currencyCode},taxAmount:{amount:Bh(e.taxLineItems||[],t.currencyCode),currency:t.currencyCode}})))},Yh=function(e){var t,r,n=[];return[e.address1,e.address2].forEach((e=>{void 0!==e&&n.push(e)})),e.name&&([t,r]=e.name.split(/\s(?=\S+$)/)),{givenName:t,familyName:r,city:e.suburb,state:e.state,postalCode:e.postcode,countryCode:e.countryCode,phone:e.phoneNumber,addressLines:n}},zh=function(e){return{amount:e.shippingAmount.amount,id:e.id,label:e.name}};function Kh(e,t){return cp({[t]:e},{[t]:{city:"string",countryCode:"string",addressLines:"object",postalCode:"string",state:"string",givenName:"string",familyName:"string"}})}var Wh=function(e){return Kh(e,"shippingContact")};function $h(e){var t=e.split("-")[1];return Mh.has(t)}var Qh,Zh=function(e,t){return $h(t)?Uh[e]:kh[e]},Jh=function(e){return $h(e)?"afterpay-brand.svg":"clearpay-brand.svg"},Xh=[Di];!function(e){e.UNKNOWN="UNKNOWN",e.UNAUTHORIZED="UNAUTHORIZED",e.TRANSACTION_LIMIT="TRANSACTION_LIMIT",e.UNSUPPORTED_CURRENCY="UNSUPPORTED_CURRENCY"}(Qh||(Qh={}));var ef=[ri,ni];function tf(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}var rf=[25,50,75,100];class nf{constructor(e,t){this.attached=!1,this.req=e,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t})),this.context=t,this.locale=this.context.getSession().locale,this.currencyCode=this.req.currencyCode;var r=this.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.weeks;this.PERIOD_TEXT=[this.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.today,"2 ".concat(r),"4 ".concat(r),"6 ".concat(r)],t.addLocaleChangedListener((()=>{this.locale=this.context.getSession().locale,this.update()})),e.addEventListener(lp.UPDATE,(()=>{this.update()}))}attach(e,t){var r,n=this;return(r=function*(){n.element=e,Ed.addStyleElement(_.AFTERPAY_STYLES,xh,n.resolveStylePromise,n.rejectStylePromise);try{yield n.stylesLoadedPromise}catch(e){throw new Li("attaching the Afterpay Checkout Widget")}var r=n.buildAmounts().map((e=>Io.moneyAmountToInternationalizedCurrency(e,n.currencyCode,n.locale))),i=!1;t&&t.includeBranding&&(i=!0);var o=Jh(n.locale),s='\n      <div class="sq-ap__checkout-widget-container">\n        '.concat(i?'<div class="sq-ap__wordmark">\n                <img id="ap-wordmark-image" src="'.concat(_.STATIC_ASSET(o),'"/>\n              </div>'):"",'\n        <p class="sq-ap__checkout-title">').concat(n.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.title,'</p>\n        <div class="sq-ap__payment-container">\n          ').concat(r.map(((e,t)=>'\n              <div id="ap-payment-container-'.concat(t,'" class="sq-ap__individual-payment">\n                <div class="sq-ap__harvey-ball-container">\n                  ').concat(function(e){var t=12,r=2*Math.PI*6,n=r*rf[e]/100;return'\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '.concat(24," ").concat(24,'" class="sq-ap__harvey-ball">\n        <circle\n          r="').concat(t,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="white"\n        />\n        <circle\n          r="').concat(6,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="none"\n          stroke="').concat("#B2FCE4",'"\n          stroke-width="').concat(t,'"\n          stroke-dasharray="').concat(n," ").concat(r,'"\n          transform="rotate(-90) translate(-').concat(24,')"\n        />\n        <circle\n          r="').concat(t,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="none"\n          stroke-width="2"\n          stroke="black"\n       />\n      </svg>\n    ')}(t),'\n                </div>\n                <p id="ap-payment-amount-').concat(t,'" class="sq-ap__amount">').concat(e,'</p>\n                <p class="sq-ap__period">').concat(n.PERIOD_TEXT[t],"</p>\n              </div>\n            "))).join(""),"\n        </div>\n      </div>\n    ");n.element.insertAdjacentHTML("afterbegin",s),n.attached=!0},function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function s(e){tf(o,n,i,s,a,"next",e)}function a(e){tf(o,n,i,s,a,"throw",e)}s(void 0)}))})()}update(){if(this.attached&&this.element){var e=document.getElementById("ap-wordmark-image");if(e){var t=Jh(this.locale);e.src=_.STATIC_ASSET(t)}this.buildAmounts().map((e=>Io.moneyAmountToInternationalizedCurrency(e,this.currencyCode,this.locale))).forEach(((e,t)=>{var r,n=null===(r=this.element)||void 0===r?void 0:r.querySelector("#ap-payment-amount-".concat(t));n&&(n.innerHTML=e)}))}}buildAmounts(){var e=Io.paymentRequestAmountToMoneyAmount(this.req.total.amount,this.req.currencyCode),t=e/4;switch(e%4){case 0:return of(t,0);case 1:return of(t,1);case 2:return of(t,-2);case 3:return of(t,-1);default:return[]}}}function of(e,t){var r=Array.from({length:3}).fill(Math.round(e));return r.push(e+t),r}function sf(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function af(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){sf(o,n,i,s,a,"next",e)}function a(e){sf(o,n,i,s,a,"throw",e)}s(void 0)}))}}var cf,uf,lf=new Set(["en_US","en_CA","fr_CA","en_AU","en_NZ","en_GB","fr_FR","es_ES","it_IT"]),df=new Set(["AUD","GBP","USD","CAD","EUR"]),pf={[kn.BLACK]:"#000",[kn.MINT]:"#b2fce4"};class hf extends cc{constructor(e,t,r,n,i){if(super(n),this.methodType=Ln.AFTERPAY_CLEARPAY,this.onTokenizeCallbacks=[],this.tokenizationBuffer=[],this.wasFirstInteractionCalled=!1,this.onTokenizeHandlerAdded=!1,this.transferOptions={},this.buyNowOption=!1,this.afterpayLibrary=e,this.afterpayMessagingLibrary=t,this.req=r,this.paymentRequestLockController=i,this.paymentMessenger=new pc(this.context),this.total=this.totalMoney(),!this.session.locationId)throw new Oi(Xa.INVALID_CONFIG,"locationId");this.locationID=this.session.locationId,this.req.addEventListener("update",(()=>{delete this.checkoutTokenResponse,this.element&&this.initializeAfterpayPopup(this.element),this.total=this.totalMoney()})),this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t}))}attach(e,t){var r=this;return af((function*(){var n,i;r.throwIfDestroyedOrAlreadyAttached(),r.status=oc.ATTACHED,r.metricsHandler.logEvent(Zo.AttachStart),r.metricsHandler.logEvent(Xo.Configured,t);try{n=gd(e)}catch(e){throw r.metricsHandler.logEvent(Zo.AttachError),r.status===oc.ATTACHED&&(r.status=oc.DETACHED),e}if(!t||!t.useCustomButton){Ed.addStyleElement(_.AFTERPAY_STYLES,xh,r.resolveStylePromise,r.rejectStylePromise);try{yield r.stylesLoadedPromise}catch(e){throw r.status===oc.ATTACHED&&(r.status=oc.DETACHED),new Li("attaching Afterpay")}var o=(null==t?void 0:t.buttonColor)||kn.BLACK,s=(null==t?void 0:t.buttonType)||Mn.BuyNowWithAfterpay,a=Zh(o,r.session.locale);if(!a)throw r.status===oc.ATTACHED&&(r.status=oc.DETACHED),new mi("buttonColor",o);var c=a[s];if(!c)throw r.status===oc.ATTACHED&&(r.status=oc.DETACHED),new mi("buttonType",s);var u='\n        <button\n          type="button"\n          class="sq-ap__button"\n          style="\n            background-color: '.concat(pf[o],";\n            background-image: url(").concat(_.STATIC_ASSET(c),');\n          "\n        ></button>\n      ');n.insertAdjacentHTML("afterbegin",u)}r.buyNowOption=(null==t?void 0:t.finalCtaButtonType)===Hn.BUY_NOW,r.initializeAfterpayPopup(n),r.metricsHandler.logEvent(Zo.AttachOK),r.element=n,r.onTokenizeHandlerAdded&&(null===(i=r.element)||void 0===i||i.addEventListener("click",af((function*(){yield r.openPaymentModal()}))))}))()}attachMessaging(e,t){return this.throwIfDestroyed(),function(e){hd(e,dd)}(e),this.afterpayMessagingLibrary.createPlacements({targetSelector:e,attributes:{amount:Number(this.req.total.amount),badgeTheme:null==t?void 0:t.badgeTheme,currency:this.req.currencyCode,locale:this.session.locale,modalLinkStyle:null==t?void 0:t.modalLinkStyle,modalTheme:null==t?void 0:t.modalTheme,size:null==t?void 0:t.size}}),Promise.resolve()}attachCheckoutWidget(e,t){var r=this;return af((function*(){if(!df.has(r.req.currencyCode))throw new si("Currency is not supported by Afterpay. Valid currencies are: ".concat([...df].join(", ")));var n=new nf(r.req,r.context),i=gd(e);yield n.attach(i,t)}))()}displayInformationModal(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Io.convertLocaleToUnderscore(this.session.locale);lf.has(t)||(t="en_US"),this.afterpayMessagingLibrary.launchModal(Object.assign({},e,{locale:t}))}onTokenize(e){var t,r=this;this.throwIfDestroyed(),this.onTokenizeCallbacks.push(e),1===this.onTokenizeCallbacks.length&&(this.tokenizationBuffer.forEach((e=>{var{result:t,error:r}=e;this.emitTokenizationResult(t,r)})),this.tokenizationBuffer=[]),this.onTokenizeHandlerAdded||void 0===this.element||null===(t=this.element)||void 0===t||t.addEventListener("click",af((function*(){yield r.openPaymentModal()}))),this.onTokenizeHandlerAdded=!0}tokenize(){var e=this;return af((function*(){if(e.throwIfDestroyedOrNotAttached(),e.onTokenizeHandlerAdded)throw new ei;var t,r,n=new Promise(((e,n)=>{t=e,r=n}));return e.onTokenizeCallbacks=[function(e,n){void 0===n?void 0!==e?t(e):r(new Di([wo.UNKNOWN])):r(n)}],yield e.openPaymentModal(),n}))()}destroy(){return this.status===oc.DESTROYED?Promise.resolve(!1):(this.detachElement(oc.DESTROYED,Xo.Destroyed),Promise.resolve(!0))}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(oc.DETACHED,Xo.Detached),Promise.resolve()}internalSetCheckoutToken(){var e=this;return af((function*(){try{var t=yield e.paymentMessenger.request(Nh.REQUEST_AFTERPAY_CHECKOUT_HANDLER,e.buildCheckoutPayload());return e.checkoutTokenResponse=t,e.checkoutTokenResponse.token}catch(t){var r=t;throw Io.isInstanceOf(t,[...ef,ci,si])||(e.errorLogger.captureException(t),r=new Li("tokenizing with Afterpay")),r}}))()}commenceCheckout(e){var t=this;return af((function*(){if(t.wasFirstInteractionCalled||(t.wasFirstInteractionCalled=!0,t.metricsHandler.logEvent(Zo.FirstInteraction)),t.metricsHandler.logEvent(Jo.ExternalSessionStart),t.paymentRequestLockController.lock(t),void 0!==t.checkoutTokenResponse&&new Date(t.checkoutTokenResponse.expires)>new Date)e.resolve(t.checkoutTokenResponse.token);else try{var r=yield t.internalSetCheckoutToken();e.resolve(r)}catch(r){t.paymentRequestLockController.unlock(t),t.metricsHandler.logEvent(Jo.ExternalSessionError),t.emitTokenizationResult(void 0,r),e.reject(r.message)}}))()}completeCheckout(e){var t=this;return af((function*(){try{if(function(e){return"SUCCESS"===e.status&&void 0!==e.orderToken}(e)){var r,n=yield t.paymentMessenger.request(Nh.REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN,t.buildInstantWalletTokenPayload(e.orderToken,t.total));t.context.updateSession(n.sessionID),t.metricsHandler.logEvent(Jo.ExternalSessionOK);var i={details:{method:Ln.AFTERPAY_CLEARPAY,shipping:{contact:{email:null==n||null===(r=n.afterpayData)||void 0===r?void 0:r.email}}},status:Un.OK,token:n.token};null!=n&&n.billingContact&&(i.details.billing=null==n?void 0:n.billingContact),null!=n&&n.shippingContact&&(i.details.shipping={contact:null==n?void 0:n.shippingContact}),delete t.checkoutTokenResponse,t.emitTokenizationResult(i)}else t.metricsHandler.logEvent(Jo.ExternalSessionCancel),t.emitTokenizationResult({status:Un.CANCEL})}catch(e){var o=e;t.metricsHandler.logEvent(Jo.ExternalSessionError),Io.isInstanceOf(e,Xh)||(t.errorLogger.captureException(e),o=new Li("tokenizing Afterpay")),t.emitTokenizationResult(void 0,o)}t.paymentRequestLockController.unlock(t)}))()}onShippingOptionChange(e){this.metricsHandler.logEvent(Jo.ShippingOptionChangeOK),this.total.amount=Io.paymentRequestAmountToMoneyAmount(e.orderAmount.amount,this.req.currencyCode),this.req.dispatchEvent(Fn.AFTERPAY_SHIPPING_OPTION_CHANGED,{contactOrOption:zh(e)},(e=>{}))}onShippingAddressChange(e,t){if(!this.req.hasEventListener(Fn.AFTERPAY_SHIPPING_ADDRESS_CHANGED))return this.emitTokenizationResult(void 0,new ti("PaymentRequest",Fn.AFTERPAY_SHIPPING_ADDRESS_CHANGED)),t.reject(Rh.SERVICE_UNAVAILABLE),void this.afterpayLibrary.close();var r=this.req;this.metricsHandler.logEvent(Jo.ShippingAddressChangeOK),this.req.dispatchEvent(Fn.AFTERPAY_SHIPPING_ADDRESS_CHANGED,{contactOrOption:Yh(e)},(e=>{if(e.error)t.reject(Rh.SHIPPING_ADDRESS_UNSUPPORTED);else if(e.shippingErrors)t.reject(Rh.SHIPPING_ADDRESS_UNRECOGNIZED);else{var n=Vh(e,r);t.resolve(n)}}))}emitTokenizationResult(e,t){0===this.onTokenizeCallbacks.length?this.tokenizationBuffer.push({result:e,error:t}):this.onTokenizeCallbacks.forEach((r=>{r(e,t)}))}buildInstantWalletTokenPayload(e,t){return{paymentMethodTrackingID:this.context.getPaymentMethodTrackingId(),analyticsToken:this.session.analyticsToken,afterpayData:{afterpayToken:e,buyerAmount:t},clientID:this.session.applicationId,locationID:this.locationID,sessionID:this.session.sessionId,websdkVersion:_.VERSION,websiteURL:this.session.sourceUrl,requestBillingContact:this.req.requestBillingContact,requestShippingContact:this.req.requestShippingContact}}buildCheckoutPayload(){var e,t={applicationID:this.session.applicationId,discounts:[],locationID:this.locationID,popupOriginUrl:this.session.sourceUrl,amount:Fh(this.req)};if(this.req.lineItems&&(t.items=Gh(this.req.lineItems,this.req.currencyCode)),this.req.discounts&&(t.discounts=jh(this.req.discounts,this.req.currencyCode)),this.req.requestShippingContact?e=this.req.shippingContact:this.req.pickupContact&&(e=this.req.pickupContact),void 0!==e){var r=Wh(e);if(!r.isValid)throw new ci(r.missingFields);t.shipping=qh(e)}return t}totalMoney(){return{amount:Io.paymentRequestAmountToMoneyAmount(this.req.total.amount,this.req.currencyCode),currency:this.req.currencyCode}}openPaymentModal(){var e=this;return af((function*(){e.afterpayLibrary.open();var t=yield new Promise(((t,r)=>{e.commenceCheckout({resolve:t,reject:r})}));e.afterpayLibrary.transfer(Object.assign({token:t},e.transferOptions))}))()}initializeAfterpayPopup(e){var t=this.commenceCheckout.bind(this),r=this.completeCheckout.bind(this),n=document.createElement("div");n.id="sq-afterpay-dummy-element-".concat(sc()),n.style.visibility="hidden",e.appendChild(n),this.transferOptions={buyNow:this.buyNowOption,shippingOptionRequired:this.req.requestShippingContact},this.req.requestShippingContact||this.req.pickupContact||(this.transferOptions.addressMode="NO_ADDRESS");var i,o,s={countryCode:this.req.countryCode,onCommenceCheckout:(o=af((function*(e){yield t(e)})),function(e){return o.apply(this,arguments)}),onComplete:(i=af((function*(e){var{data:t}=e;yield r(t)})),function(e){return i.apply(this,arguments)}),target:"#".concat(n.id),shippingOptionRequired:this.req.requestShippingContact,addressMode:this.transferOptions.addressMode};this.req.requestShippingContact?(s.onShippingAddressChange=this.onShippingAddressChange.bind(this),s.onShippingOptionChange=this.onShippingOptionChange.bind(this)):this.req.pickupContact&&(this.transferOptions.pickup=!0),this.afterpayLibrary.initializeForPopup(s),e.removeChild(n)}detachElement(e,t){this.afterpayLibrary.close(),this.element&&(this.element.innerHTML=""),this.element=null,this.tokenizationBuffer=[],this.onTokenizeCallbacks=[],this.status=e,this.metricsHandler.logEvent(t)}}!function(e){e.CUSTOMER_INTERACTION="CUSTOMER_INTERACTION",e.CUSTOMER_DISMISSED="CUSTOMER_DISMISSED",e.CUSTOMER_REQUEST_APPROVED="CUSTOMER_REQUEST_APPROVED",e.CUSTOMER_REQUEST_DECLINED="CUSTOMER_REQUEST_DECLINED",e.CUSTOMER_REQUEST_FAILED="CUSTOMER_REQUEST_FAILED"}(cf||(cf={})),function(e){e.REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN="REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN"}(uf||(uf={}));class ff extends Zn{constructor(e){var t=e.map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).join("\n");super("\n".concat(t)),this.name="InvalidCashAppPayV1OptionsFieldTypes",Object.setPrototypeOf(this,ff.prototype)}}class gf extends Zn{constructor(e){var t=e.map((e=>{var[t,r]=e;return'accepted property: "'.concat(t,'" values are "').concat(r,'"')})).join("\n");super("\n".concat(t)),this.name="InvalidCashAppPayV1OptionsFieldValues",Object.setPrototypeOf(this,gf.prototype)}}class mf extends Zn{constructor(e){super(e),this.name="CashAppPayInvalidPaymentRequestError",Object.setPrototypeOf(this,mf.prototype)}}class Ef extends Zn{constructor(){super("A redirect url is always required for requests. This must also be a secure link."),this.name="CashAppPayMissingRedirectUrlError",Object.setPrototypeOf(this,Ef.prototype)}}class yf extends Zn{constructor(){super("Non function passed as shouldTokenize checker"),this.name="CashAppPayInvalidShouldTokenizeError",Object.setPrototypeOf(this,yf.prototype)}}class vf extends Zn{constructor(){super("A grant was not returned from CashApp and is required for tokenization"),this.name="CashAppPayGrantIsUndefinedError",Object.setPrototypeOf(this,vf.prototype)}}function _f(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Af(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){_f(o,n,i,s,a,"next",e)}function a(e){_f(o,n,i,s,a,"throw",e)}s(void 0)}))}}function Sf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function If(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sf(Object(r),!0).forEach((function(t){Cf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Cf(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Of=new Set(["USD"]),Tf="cash_app_pay_v1_element";class Pf extends cc{constructor(e,t,r,n,i){if(super(n),this.methodType=Ln.CASH_APP_PAY,this.wasFirstInteractionCalled=!1,this.CashAppPayInstance=e,this.req=t,this.context=n,this.paymentRequestLockController=i,this.paymentMessenger=new pc(this.context),this.tokenizeValidator=function(){return Promise.resolve(!0)},this.clickEventHandler=()=>{this.beginAuthorizationFlow()},!this.session.locationId)throw new Oi(Xa.INVALID_CONFIG,"locationId");if(!this.session.cashAppPayMerchantIdentifier)throw new Oi(Xa.INVALID_CONFIG,"merchantId");if(!Of.has(this.req.currencyCode))throw new mf("".concat(this.req.currencyCode," is not supported by CashAppPay. Valid currencies are: ").concat([...Of].join(", ")));if(!r.redirectURL)throw new Ef;var o=If({actions:{payment:{amount:{currency:this.req.currencyCode,value:Io.paymentRequestAmountToMoneyAmount(this.req.total.amount,this.req.currencyCode)},scopeId:this.session.cashAppPayMerchantIdentifier}}},r);e.customerRequest(o).catch((e=>{this.errorLogger.captureException(e),this.customerRequestFailedEvent()})),this.cashAppEventHandler={[cf.CUSTOMER_INTERACTION]:e=>this.registerExternalEventStart(e),[cf.CUSTOMER_DISMISSED]:()=>{this.dispatchEvent("customerDismissed",null)},[cf.CUSTOMER_REQUEST_APPROVED]:e=>this.customerRequestApprovedEvent(e),[cf.CUSTOMER_REQUEST_DECLINED]:()=>this.customerRequestDeclinedEvent(),[cf.CUSTOMER_REQUEST_FAILED]:()=>this.customerRequestFailedEvent()},Object.keys(cf).forEach((e=>this.CashAppPayInstance.addEventListener(e,this.cashAppEventHandler[e]))),this.paymentRequestLockController.lock(this)}attach(e,t,r){var n=this;return Af((function*(){n.throwIfDestroyedOrAlreadyAttached();var i=t,o=!1===i;i&&i.values&&(i.theme||(i.theme=i.values));var s=function(e){if(void 0===e||!1===e)return{isValid:!0,missingFields:[]};var t={};return Object.keys(e).forEach((function(e){Bs.has(e)&&(t[e]="string")})),cp(e,t)}(i);if(!s.isValid)throw new ff(s.missingFields);var a=function(e){var t=[],r=!0;if(void 0===e||!1===e)return{isValid:r,missingFields:t};var n={shape:Js,size:Zs,theme:Xs,width:ea},i=JSON.parse(oa(e));return Object.entries(i).forEach((function(e){var[i,o]=e;o===Rs&&(r=!1,t.push([i,[...n[i]].join(",")]))})),{isValid:r,missingFields:t}}(i);if(!a.isValid)throw new gf(a.missingFields);if(r&&(n.tokenizeValidator=r),"function"!=typeof n.tokenizeValidator)throw new yf;n.metricsHandler.logEvent(Zo.AttachStart),i&&n.metricsHandler.logEvent(Xo.Configured,i),n.status=oc.ATTACHED,n.element=o?gd(e):fd(e);try{var c=document.createElement("div");c.id=Tf,o?n.element.before(c):n.element.appendChild(c);var u="#".concat(Tf);n.renderController=yield n.CashAppPayInstance.render(u,{button:i,manage:!1}),n.element.addEventListener("click",n.clickEventHandler),n.metricsHandler.logEvent(Zo.AttachOK)}catch(e){throw n.metricsHandler.logEvent(Zo.AttachError),n.status===oc.ATTACHED&&(n.status=oc.DETACHED),e}}))()}destroy(){return this.status===oc.DESTROYED?Promise.resolve(!1):(this.detachElement(oc.DESTROYED,Xo.Destroyed),this.paymentRequestLockController.unlock(this),this.CashAppPayInstance.restart(),Object.keys(cf).forEach((e=>this.CashAppPayInstance.removeEventListener(e,this.cashAppEventHandler[e]))),Promise.resolve(!0))}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(oc.DETACHED,Xo.Detached),Promise.resolve(!0)}addEventListener(e,t){this.metricsHandler.logEvent(Xo.EventListenerAdded,e),super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}customerRequestApprovedEvent(e){var t=this;return Af((function*(){var r=yield t.createNonce(e);t.dispatchEvent("ontokenization",{tokenResult:r})}))()}customerRequestDeclinedEvent(){var e={status:Un.CANCEL};this.metricsHandler.logEvent(Jo.ExternalSessionCancel),this.dispatchEvent("ontokenization",{tokenResult:e})}customerRequestFailedEvent(){var e={status:Un.ERROR,errors:[new Li("tokenizing Cash App Pay")]};this.metricsHandler.logEvent(Jo.ExternalSessionError),this.dispatchEvent("ontokenization",{tokenResult:e})}createNonce(e){var t=this;return Af((function*(){var{customerProfile:r,grants:n,referenceId:i}=e,o=r.cashtag,s=n.payment,a=t.req.total.amount,c=t.req.currencyCode;try{if(!s)throw new vf;var u=yield t.paymentMessenger.request(uf.REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN,{paymentMethodTrackingID:t.context.getPaymentMethodTrackingId(),analyticsToken:t.session.analyticsToken,clientID:t.session.applicationId,locationID:t.session.locationId,sessionID:t.session.sessionId,websdkVersion:_.VERSION,websiteURL:t.session.sourceUrl,requestBillingContact:t.req.requestBillingContact,requestShippingContact:t.req.requestShippingContact,applicationId:t.session.applicationId,cashAppPayData:{referenceId:i,grantId:s.grantId,cashtag:o,totalAmount:{amount:a,currency:c}}});return t.context.updateSession(u.sessionID),t.metricsHandler.logEvent(Jo.ExternalSessionOK),{details:{method:Ln.CASH_APP_PAY},status:Un.OK,token:u.token}}catch(e){var l=e;return t.metricsHandler.logEvent(Jo.ExternalSessionError),Io.isInstanceOf(e,[Di])||(t.errorLogger.captureException(e),l=new Li("tokenizing CashAppPay")),{status:Un.ERROR,errors:[l]}}}))()}beginAuthorizationFlow(){var e=this;return Af((function*(){if(e.throwIfDestroyedOrNotAttached(),!e.renderController)throw new Li("Could not begin Cash App Pay authorization flow");e.metricsHandler.logEvent(Zo.CashAppPayClickValidating);try{(yield e.tokenizeValidator())?(e.renderController.begin(),e.metricsHandler.logEvent(Zo.CashAppPayAuthStart)):e.metricsHandler.logEvent(Zo.CashAppPayClickInvalid)}catch(t){throw e.metricsHandler.logEvent(Zo.CashAppPayClickError),t}}))()}registerExternalEventStart(e){this.metricsHandler.logEvent(Jo.ExternalSessionStart),this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(Zo.FirstInteraction)),this.dispatchEvent("customerInteraction",If({},e))}detachElement(e,t){this.renderController&&this.renderController.destroy(),this.element&&(this.element.innerHTML="",this.element.removeEventListener("click",this.clickEventHandler)),this.status=e,this.metricsHandler.logEvent(t)}}var Rf=function(e,t,r,n,i){return new hf(e,t,r,n,i)},wf=function(e,t,r){return new ph(e,t,r)},bf=function(e,t,r,n,i){return new Pf(e,t,r,n,i)},Nf=function(e,t,r,n,i){return new Lh(e,t,r,n,i)};function Df(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Lf(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Df(o,n,i,s,a,"next",e)}function a(e){Df(o,n,i,s,a,"throw",e)}s(void 0)}))}}function xf(e,t){var{paymentMethodSupportDetail:r,metricsHandler:n}=t,i=t.getSession();if(!i.locationId||0===i.locationId.length)throw new Oi(Xa.INVALID_CONFIG,"locationId");if(r&&r[e]&&!r[e].IsSupported){var{UnsupportedReasonType:o}=r[e],s=Xa.UNKNOWN;throw o&&o in Ja&&(s=ec[o]),n.logEvent(Zo.BuildError),new Oi(s)}}function Uf(e,t){if(!(e instanceof Sp))throw t.metricsHandler.logEvent(Zo.BuildError),new ci([["paymentRequest","PaymentRequest"]])}function kf(){return(kf=Lf((function*(e,t){return{authJwt:(yield e.request(ic.GENERATE_GOOGLE_PAY_AUTH_TOKEN,{session:t})).token,merchantId:_.GOOGLE_PAY_MERCHANT_ID}}))).apply(this,arguments)}class Mf{constructor(e,t,r){this.localeStrings=new Ps(navigator.language),this.paymentOptions=e,this.metrics=t,this.errorLogger=r,this.paymentRequestLockMap=new WeakMap}overrideStrings(e){var t=this;return Lf((function*(){try{var r=yield t.getPaymentContext(os.App);if(!r.featureFlagHandler.isActive(vo.CanUseOverrideStrings))throw new Ti("overrideStrings");r.metricsHandler.logEvent(Xo.OverrideStrings,e),r.setTranslationOverrides(e)}catch(e){if(Qo(e))throw t.errorLogger.captureException(e),new Li("overriding the strings");throw e}}))()}setLocale(e){var t=this;return Lf((function*(){try{var r=yield t.getPaymentContext(os.App);return r.metricsHandler.logEvent(Xo.SetLocale,e),r.setLocale(e)}catch(e){if(Qo(e))throw t.errorLogger.captureException(e),new Li("setting the locale");throw e}}))()}verifyBuyer(e,t){var r=this;return Lf((function*(){var n=[];if(r.paymentOptions.locationId&&0!==r.paymentOptions.locationId.length||n.push(new tc("verifyBuyer","locationId","string")),e&&"string"==typeof e&&0!==e.length||n.push(new tc("verifyBuyer","source","string")),t&&"object"==typeof t?n.push(...jp.validateVerificationDetails(t,"verifyBuyer")):n.push(new tc("verifyBuyer","details","object")),n.length>0)throw new rc(n);var i=yield r.getPaymentContext(os.App);try{i.metricsHandler.logEvent(Zo.VerificationStart);var o=yield Ya.analyticsLibrary({applicationId:r.paymentOptions.applicationId,locationId:r.paymentOptions.locationId}),s=yield Ya.verifyBuyer(o,e,t);return i.metricsHandler.logEvent(Zo.VerificationOK),s}catch(e){if(i.metricsHandler.logEvent(Zo.VerificationError),e instanceof Pi)throw r.errorLogger.captureException(e),e;throw new hi(e)}}))()}card(e){var t=this;return Lf((function*(){var r=yield t.getPaymentContext(os.Card);r.metricsHandler.logEvent(Zo.BuildStart);try{var n=new Pd(r,e);return r.metricsHandler.logEvent(Zo.BuildOK),n}catch(e){throw r.metricsHandler.logEvent(Zo.BuildError),e}}))()}paymentRequest(e){var t=new Op,r=new Sp(e,this.localeStrings,t);return this.paymentRequestLockMap.set(r,t),this.getPaymentContext(os.PaymentRequest).then((t=>{var{metricsHandler:n}=t;r.setMetricsHandler(n),n.logEvent(Xo.Configured,e)})),r}googlePay(e){var t=this;return Lf((function*(){var r,n,i=yield t.getPaymentContext(os.GooglePay);i.metricsHandler.logEvent(Zo.BuildStart),xf(ma.GOOGLE_PAY,i),function(e){if("undefined"==typeof ShadowRoot)throw e.metricsHandler.logEvent(Zo.BuildError),new Oi(Xa.GOOGLE_PAY_BROWSER_NOT_SUPPORTED)}(i),Uf(e,i);try{var o=function(e,t){return kf.apply(this,arguments)}(i.messenger,i.getSession()),s=xa();[r,n]=yield Promise.all([s,o])}catch(e){throw i.metricsHandler.logEvent(Zo.BuildError),e}try{var a=t.getPaymentRequestLock(e),c=Nf(r,e,i,n,a);return i.metricsHandler.logEvent(Zo.BuildOK),c}catch(e){throw i.metricsHandler.logEvent(Zo.BuildError),e}}))()}applePay(e){var t=this;return Lf((function*(){var r=yield t.getPaymentContext(os.ApplePay);r.metricsHandler.logEvent(Zo.BuildStart),xf(ma.APPLE_PAY,r),Uf(e,r);try{var n=t.getPaymentRequestLock(e),i=wf(e,r,n);return r.metricsHandler.logEvent(Zo.BuildOK),i}catch(e){throw r.metricsHandler.logEvent(Zo.BuildError),e}}))()}ach(e){var t=this;return Lf((function*(){var r=yield t.getPaymentContext(os.Ach);r.metricsHandler.logEvent(Zo.BuildStart),xf(ma.ACH,r);try{var n=yield Ua();return r.metricsHandler.logEvent(Zo.BuildOK),new iu(n,r,e)}catch(e){throw r.metricsHandler.logEvent(Zo.BuildError),e}}))()}cashApp(e){var t=this;return Lf((function*(){var r=yield t.getPaymentContext(os.CashApp);r.metricsHandler.logEvent(Zo.BuildStart),xf(ma.CASH_APP,r);try{var n=new Kd(r,e);return r.metricsHandler.logEvent(Zo.BuildOK),n}catch(e){throw r.metricsHandler.logEvent(Zo.BuildError),e}}))()}giftCard(e){var t=this;return Lf((function*(){var r=yield t.getPaymentContext(os.GiftCard);r.metricsHandler.logEvent(Zo.BuildStart);try{var n=new rp(r,e);return r.metricsHandler.logEvent(Zo.BuildOK),n}catch(e){throw r.metricsHandler.logEvent(Zo.BuildError),e}}))()}afterpayClearpay(e){var t=this;return Lf((function*(){var r=yield t.getPaymentContext(os.Afterpay);if(r.metricsHandler.logEvent(Zo.BuildStart),!r.featureFlagHandler.isActive(vo.CanUseBNPLA))throw r.metricsHandler.logEvent(Zo.BuildError),new Tp;xf(ma.AFTERPAY,r),Uf(e,r);try{var n=t.getPaymentRequestLock(e),[i,o]=yield Promise.all([ba(),Na()]),s=Rf(i,o,e,r,n);return yield s.internalSetCheckoutToken(),r.metricsHandler.logEvent(Zo.BuildOK),s}catch(e){throw r.metricsHandler.logEvent(Zo.BuildError),e}}))()}cashAppPay(e,t){var r=this;return Lf((function*(){var n,i=yield r.getPaymentContext(os.CashAppPayV1);i.metricsHandler.logEvent(Zo.BuildStart),xf(ma.CASH_APP_PAY_V1,i),Uf(e,i);try{n=yield La()}catch(e){throw i.errorLogger.captureException(e),e}try{if(void 0===n)throw new Li("initializing Cash App Pay");var o=r.getPaymentRequestLock(e),s=_.CASH_APP_PAY_CLIENT_ID,a=yield n.pay({clientId:s}),c=bf(a,e,t,i,o);return i.metricsHandler.logEvent(Zo.BuildOK),c}catch(e){throw i.metricsHandler.logEvent(Zo.BuildError),e}}))()}getPaymentContext(e){var t=this;return Lf((function*(){var{featureFlagValues:r,messenger:n,session:i,paymentMethodSupportDetail:o}=yield t.initializePaymentMethod();i.avt&&t.errorLogger.setAvt(i.avt),i.sessionId&&t.errorLogger.setSessionId(i.sessionId),i.instanceId&&t.errorLogger.setInstanceId(i.instanceId);var s=sc(),a=new ac(t.metrics,i,e,s);t.setAnalytics(i),t.contextEventTarget||(t.contextEventTarget=new nc);var c=new $a(t.errorLogger,n,a,i,o,t.localeStrings,t.contextEventTarget,r);return t.errorLogger.setFeatureFlagHandler(c.featureFlagHandler),c}))()}initializePaymentMethod(){return this.initializePaymentParamPromise||(this.initializePaymentParamPromise=jp.initializePayment(this.paymentOptions,this.metrics,this.errorLogger,this.localeStrings)),this.initializePaymentParamPromise}setAnalytics(e){if(!this.analyticsInterval){var t=this.analyticsInterval=window.setInterval((()=>{jp.initializeAnalytics(e,this.errorLogger,t)}),ja);jp.initializeAnalytics(e,this.errorLogger,t)}}getPaymentRequestLock(e){var t=this.paymentRequestLockMap.get(e);if(!t){var r=new Li("PaymentRequestLockMap entry does not exist. This should never happen.");throw this.errorLogger.captureException(r),r}return t}}function Hf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hf(Object(r),!0).forEach((function(t){Gf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gf(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jf=_.ENABLE_ERROR_LOGGING,qf=_.env,Ff=new Map;function Vf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r="".concat(e,"-").concat(t);if(Ff.has(r))return Ff.get(r);if(!to(g.windowLocation))throw new vi;if(!g.isSupported())throw new yi;so(e);var n=new Po({applicationId:e,applicationUrl:window.location.origin,enableErrorLogging:jf,environment:qf,sourceName:"web-payments-sdk-public",useGlobalHandlers:!1,version:_.VERSION}),i=g.windowLocation.hostname,o=g.windowLocation.origin,s={applicationId:e,hostname:i,locationId:t,sourceUrl:o},a=new va(n,{applicationId:e,hostname:i,locationId:t});a.logEvent({event:Zo.LoadOK,eventSource:os.App});var c=new Mf(s,a,n);return Ff.set(r,c),c}window.Square?(window.Square.errors=window.Square.errors?Bf(Bf({},us),window.Square.errors):us,window.Square._buildWebSDKV1Payments=Vf):window.Square={errors:us,_buildWebSDKV1Payments:Vf,payments:Vf}})()})();